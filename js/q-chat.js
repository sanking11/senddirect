const _0x3f3d29=_0x37b3;(function(_0x591f83,_0x39e944){const _0x4cbae5=_0x37b3,_0x1f4b5d=_0x591f83();while(!![]){try{const _0x5c2ad2=parseInt(_0x4cbae5(0x1ff))/0x1*(parseInt(_0x4cbae5(0x238))/0x2)+-parseInt(_0x4cbae5(0x22b))/0x3+-parseInt(_0x4cbae5(0x1db))/0x4*(-parseInt(_0x4cbae5(0x22d))/0x5)+-parseInt(_0x4cbae5(0x18d))/0x6+-parseInt(_0x4cbae5(0x1ee))/0x7*(parseInt(_0x4cbae5(0x19a))/0x8)+-parseInt(_0x4cbae5(0x224))/0x9+-parseInt(_0x4cbae5(0x22f))/0xa*(-parseInt(_0x4cbae5(0x1c3))/0xb);if(_0x5c2ad2===_0x39e944)break;else _0x1f4b5d['push'](_0x1f4b5d['shift']());}catch(_0x189a00){_0x1f4b5d['push'](_0x1f4b5d['shift']());}}}(_0x4a7e,0xa7ab6));function _0x37b3(_0x3a7486,_0x401076){_0x3a7486=_0x3a7486-0x164;const _0x4a7efb=_0x4a7e();let _0x37b3e4=_0x4a7efb[_0x3a7486];return _0x37b3e4;}function _0x4a7e(){const _0x511231=['getElementById','then','Q-Chat:\x20Received\x20message:','message','now','display','Q-Chat:\x20ICE\x20gathering\x20complete','answer','error','isArray','top','createRoom','shiftKey','connectSection','substring','urls','OPEN','active','onmessage','Q-Chat:\x20Error\x20handling\x20offer:','updateBadge','handleAnswer','connectionTimeout','qchatRoomCodeSection','oniceconnectionstatechange','protocol','create-room','contains','retry-relay','togglePanel','received','5982633UnQfbs','Peer\x20left','messageInput','roomInfoSection','qchatSendBtn','qchatToggle','join-room','642111EERViU','open','55ZhaTwv','updateStatus','259550KWcpoC','setupDataChannel','remove','inputSection','hidden','Error:\x20','connectionAttempt','Failed\x20to\x20send\x20message','Joining...','444dzIapo','cachedIceServers','keypress','panel','length','toggleBtn','handleDisconnect','fade-out','Q-Chat:\x20Creating\x20and\x20sending\x20offer...','Establishing\x20Secure\x20Link...','joinRoom','scrollHeight','getWebSocketUrl','toUpperCase','Q-Chat:\x20Error\x20sending\x20message:','isHost','px)','add','charAt','sent','createAndSendOffer','connecting','disabled','floor','Enter','Secure\x20P2P','unreadCount','reveal','parse','qchat-status\x20','createBtn','type','Q-Chat:\x20Using\x20relay-only\x20mode\x20for\x20VPN\x20compatibility','qchatWaiting','matrixSphereStatus','send','transform','createOffer','clearUnread','copyRoomCode','Q-Chat:\x20Invalid\x20TURN\x20response,\x20using\x20STUN\x20fallback','peerConnection','onopen','textContent','Q-Chat\x20Server\x20Error:','qchatConnect','div','ice-candidate','matrixSphere','createMatrixSphere','3051630YZywYW','stun:stun1.l.google.com:19302','value','opacity','flex','receiveMessage','scrollTop','trim','escapeHtml','qchatCopyCode','handleSignalingMessage','closePanel','body','8yZXNWa','Connecting...','badge','/api/turn-credentials','failed','sendBtn','onclose','handleRetryRelay','setLocalDescription','retryWithRelayMode','location','initializeWebRTC','url','key','qchatJoin','data','connectionState','Q-Chat:\x20Connection\x20failed,\x20retrying\x20with\x20relay\x20mode','candidate','sin','all','showChatUI','Q-Chat:\x20ICE\x20Server\x20','span','onicegatheringstatechange','messagesList','querySelector','digitChangeInterval','disableChat','qchatInputSection','wss:','offer','copyCodeBtn','close','text','statusEl','/ws','copy','bindEvents','timestamp','qchatPanel','572ZHVQsM','forceRelayMode','Q-Chat:\x20Received\x20retry-relay\x20signal\x20from\x20peer','Q-Chat:\x20Data\x20channel\x20open','Q-Chat:\x20Connecting\x20to:','isPanelOpen','scrollToBottom','click','joinBtn','connectToServer','openPanel','addEventListener','showSystemMessage','clipboard','setRemoteDescription','readyState','qchatCreate','Q-Chat:\x20Using\x20TURN\x20servers\x20for\x20NAT\x20traversal,\x20count:','createElement','50%','isConnected','createAnswer','-10px','className','188692XkUxwS','sqrt','classList','preventDefault','Peer\x20disconnected','none','handleIceCandidate','Failed\x20to\x20connect\x20to\x20server','closeBtn','disconnected','log','https:','onconnectionstatechange','enableChat','Finalizing\x20Quantum\x20Code...','Q-Chat:\x20WebRTC\x20initialized,\x20peerConnection:','qchatMessages','roomInput','random','7112532Hxwpkv','acos','Q-Chat:\x20TURN\x20fetch\x20failed,\x20using\x20STUN\x20fallback','qchatRoomCode','style','maxConnectionAttempts','host','Error','dataChannel','onerror','roomCodeEl','innerHTML','sdp','appendChild','removeChild','Peer\x20requested\x20VPN-compatible\x20mode...','stringify','5503wxZDjk','Generating\x20Quantum\x20Tunnel...','qchatStatus','Connection\x20failed','messagesSection','roomId'];_0x4a7e=function(){return _0x511231;};return _0x4a7e();}class QChat{constructor(){const _0x275362=_0x37b3;this['ws']=null,this[_0x275362(0x184)]=null,this[_0x275362(0x1f6)]=null,this[_0x275362(0x204)]=null,this['isHost']=![],this[_0x275362(0x1d7)]=![],this[_0x275362(0x175)]=0x0,this[_0x275362(0x1c8)]=![],this[_0x275362(0x1c4)]=![],this[_0x275362(0x235)]=0x0,this['cachedIceServers']=null,this[_0x275362(0x21b)]=null,this['maxConnectionAttempts']=0x2,this['initElements'](),this['bindEvents']();}['initElements'](){const _0x1ffd86=_0x37b3;this['panel']=document[_0x1ffd86(0x205)](_0x1ffd86(0x1c2)),this[_0x1ffd86(0x23d)]=document['getElementById'](_0x1ffd86(0x229)),this['closeBtn']=document['getElementById']('qchatClose'),this[_0x1ffd86(0x19c)]=document[_0x1ffd86(0x205)]('qchatBadge'),this[_0x1ffd86(0x212)]=document['getElementById'](_0x1ffd86(0x188)),this['roomInfoSection']=document['getElementById']('qchatRoomInfo'),this['messagesSection']=document['getElementById'](_0x1ffd86(0x1eb)),this[_0x1ffd86(0x232)]=document[_0x1ffd86(0x205)](_0x1ffd86(0x1b7)),this[_0x1ffd86(0x1bd)]=document[_0x1ffd86(0x205)](_0x1ffd86(0x201)),this[_0x1ffd86(0x1f8)]=document[_0x1ffd86(0x205)](_0x1ffd86(0x1f1)),this['createBtn']=document['getElementById'](_0x1ffd86(0x1d3)),this[_0x1ffd86(0x1cb)]=document[_0x1ffd86(0x205)](_0x1ffd86(0x1a8)),this[_0x1ffd86(0x1ba)]=document['getElementById'](_0x1ffd86(0x196)),this['sendBtn']=document[_0x1ffd86(0x205)](_0x1ffd86(0x228)),this['roomInput']=document[_0x1ffd86(0x205)]('qchatRoomInput'),this[_0x1ffd86(0x226)]=document[_0x1ffd86(0x205)]('qchatMessageInput'),this[_0x1ffd86(0x1b3)]=document[_0x1ffd86(0x205)]('qchatMessagesList');}[_0x3f3d29(0x1c0)](){const _0x36b96d=_0x3f3d29;this[_0x36b96d(0x23d)]?.['addEventListener'](_0x36b96d(0x1ca),()=>this['togglePanel']()),this[_0x36b96d(0x1e3)]?.[_0x36b96d(0x1ce)](_0x36b96d(0x1ca),()=>this[_0x36b96d(0x198)]()),this[_0x36b96d(0x179)]?.['addEventListener'](_0x36b96d(0x1ca),()=>this['createRoom']()),this['joinBtn']?.[_0x36b96d(0x1ce)]('click',()=>this[_0x36b96d(0x165)]()),this['roomInput']?.[_0x36b96d(0x1ce)](_0x36b96d(0x23a),_0x143c1b=>{const _0x1cd254=_0x36b96d;if(_0x143c1b[_0x1cd254(0x1a7)]==='Enter')this[_0x1cd254(0x165)]();}),this['copyCodeBtn']?.['addEventListener']('click',()=>this[_0x36b96d(0x182)]()),this['sendBtn']?.['addEventListener']('click',()=>this['sendMessage']()),this['messageInput']?.[_0x36b96d(0x1ce)]('keypress',_0x59755c=>{const _0x200ed5=_0x36b96d;_0x59755c[_0x200ed5(0x1a7)]===_0x200ed5(0x173)&&!_0x59755c[_0x200ed5(0x211)]&&(_0x59755c[_0x200ed5(0x1de)](),this['sendMessage']());}),document['addEventListener'](_0x36b96d(0x1ca),_0x1a81e9=>{const _0x1c2a09=_0x36b96d;this[_0x1c2a09(0x1c8)]&&!this['panel']?.[_0x1c2a09(0x220)](_0x1a81e9['target'])&&!this['toggleBtn']?.[_0x1c2a09(0x220)](_0x1a81e9['target'])&&this[_0x1c2a09(0x198)]();});}[_0x3f3d29(0x222)](){const _0x1c2c6d=_0x3f3d29;this[_0x1c2c6d(0x1c8)]?this[_0x1c2c6d(0x198)]():this['openPanel']();}[_0x3f3d29(0x1cd)](){const _0x19a2f7=_0x3f3d29;this[_0x19a2f7(0x23b)]?.['classList']['add'](_0x19a2f7(0x22c)),this[_0x19a2f7(0x23d)]?.['classList'][_0x19a2f7(0x16c)]('active'),this['isPanelOpen']=!![],this['clearUnread']();}['closePanel'](){const _0x41502a=_0x3f3d29;this['panel']?.['classList'][_0x41502a(0x231)](_0x41502a(0x22c)),this[_0x41502a(0x23d)]?.[_0x41502a(0x1dd)]['remove'](_0x41502a(0x216)),this[_0x41502a(0x1c8)]=![];}['generateRoomId'](){const _0x33ce35=_0x3f3d29,_0x4716b1='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';let _0x404b56='';for(let _0x14e732=0x0;_0x14e732<0x6;_0x14e732++){_0x404b56+=_0x4716b1[_0x33ce35(0x16d)](Math[_0x33ce35(0x172)](Math['random']()*_0x4716b1['length']));}return _0x404b56;}[_0x3f3d29(0x167)](){const _0x477246=_0x3f3d29,_0x5411a0=window[_0x477246(0x1a4)][_0x477246(0x21e)]===_0x477246(0x1e6)?_0x477246(0x1b8):'ws:';return _0x5411a0+'//'+window[_0x477246(0x1a4)][_0x477246(0x1f4)]+_0x477246(0x1be);}async[_0x3f3d29(0x1cc)](){return new Promise((_0x543452,_0x278301)=>{const _0x1b1a6d=_0x37b3,_0x2d9936=this[_0x1b1a6d(0x167)]();console['log'](_0x1b1a6d(0x1c7),_0x2d9936),this['ws']=new WebSocket(_0x2d9936),this['ws'][_0x1b1a6d(0x185)]=()=>{const _0x3787e7=_0x1b1a6d;console[_0x3787e7(0x1e5)]('Q-Chat:\x20WebSocket\x20connected'),_0x543452();},this['ws'][_0x1b1a6d(0x1f7)]=_0x103a2b=>{const _0xee5073=_0x1b1a6d;console[_0xee5073(0x20d)]('Q-Chat:\x20WebSocket\x20error:',_0x103a2b),_0x278301(_0x103a2b);},this['ws'][_0x1b1a6d(0x1a0)]=()=>{const _0x4ad5e6=_0x1b1a6d;console[_0x4ad5e6(0x1e5)]('Q-Chat:\x20WebSocket\x20closed'),this[_0x4ad5e6(0x23e)]();},this['ws'][_0x1b1a6d(0x217)]=_0xa55c3b=>{const _0x1aeeda=_0x1b1a6d,_0x1bb2cb=JSON[_0x1aeeda(0x177)](_0xa55c3b['data']);console['log'](_0x1aeeda(0x207),_0x1bb2cb['type'],_0x1bb2cb),this['handleSignalingMessage'](_0x1bb2cb);};});}[_0x3f3d29(0x17e)](_0x4fb86){const _0x208c94=_0x3f3d29;this['ws']&&this['ws'][_0x208c94(0x1d2)]===WebSocket[_0x208c94(0x215)]&&this['ws'][_0x208c94(0x17e)](JSON[_0x208c94(0x1fe)](_0x4fb86));}async[_0x3f3d29(0x210)](){const _0x386606=_0x3f3d29;this[_0x386606(0x16a)]=!![],this[_0x386606(0x204)]=this['generateRoomId'](),this['updateStatus'](_0x386606(0x170),_0x386606(0x19b));try{await this['connectToServer'](),this['send']({'type':_0x386606(0x21f),'roomId':this[_0x386606(0x204)]});}catch(_0x6cd3ea){this[_0x386606(0x1cf)]('Failed\x20to\x20connect\x20to\x20server'),this['updateStatus'](_0x386606(0x1e4),_0x386606(0x202));}}async['joinRoom'](){const _0x9c7e06=_0x3f3d29,_0x5df0fa=this[_0x9c7e06(0x1ec)]?.['value'][_0x9c7e06(0x194)]()[_0x9c7e06(0x168)]();if(!_0x5df0fa||_0x5df0fa['length']<0x4){this[_0x9c7e06(0x1cf)]('Please\x20enter\x20a\x20valid\x20room\x20code');return;}this[_0x9c7e06(0x16a)]=![],this['roomId']=_0x5df0fa,this[_0x9c7e06(0x22e)](_0x9c7e06(0x170),_0x9c7e06(0x237));try{await this['connectToServer'](),this['send']({'type':_0x9c7e06(0x22a),'roomId':this['roomId']});}catch(_0x2cbfaa){this[_0x9c7e06(0x1cf)](_0x9c7e06(0x1e2)),this[_0x9c7e06(0x22e)](_0x9c7e06(0x1e4),'Connection\x20failed');}}async[_0x3f3d29(0x197)](_0x7693a0){const _0x45ce9b=_0x3f3d29;switch(_0x7693a0['type']){case'room-created':this['showRoomInfo'](),this[_0x45ce9b(0x22e)]('connecting','Waiting\x20for\x20peer...');break;case'room-joined':this[_0x45ce9b(0x1cf)]('Joined\x20room!\x20Waiting\x20for\x20host...'),this['updateStatus']('connecting','Waiting\x20for\x20host...');break;case'peer-joined':console[_0x45ce9b(0x1e5)]('Q-Chat:\x20peer-joined\x20received,\x20isHost:',this[_0x45ce9b(0x16a)]),this['showSystemMessage']('Peer\x20connected!\x20Setting\x20up\x20secure\x20channel...'),this['updateStatus']('connecting','Establishing\x20P2P...');try{await this[_0x45ce9b(0x1a5)](),console['log'](_0x45ce9b(0x1ea),!!this['peerConnection']),this['isHost']&&(console[_0x45ce9b(0x1e5)](_0x45ce9b(0x240)),await this[_0x45ce9b(0x16f)](),console[_0x45ce9b(0x1e5)]('Q-Chat:\x20Offer\x20sent'));}catch(_0x7a3932){console['error']('Q-Chat:\x20Error\x20in\x20peer-joined\x20handler:',_0x7a3932),this['showSystemMessage']('Connection\x20setup\x20failed'),this[_0x45ce9b(0x22e)](_0x45ce9b(0x1e4),'Setup\x20failed');}break;case'peer-left':this[_0x45ce9b(0x1cf)](_0x45ce9b(0x1df)),this[_0x45ce9b(0x22e)](_0x45ce9b(0x1e4),_0x45ce9b(0x225)),this[_0x45ce9b(0x1b6)]();break;case'offer':await this['handleOffer'](_0x7693a0);break;case'answer':await this[_0x45ce9b(0x21a)](_0x7693a0);break;case _0x45ce9b(0x18a):await this[_0x45ce9b(0x1e1)](_0x7693a0);break;case'retry-relay':await this['handleRetryRelay']();break;case'error':this[_0x45ce9b(0x1cf)](_0x45ce9b(0x234)+_0x7693a0['message']),this['updateStatus'](_0x45ce9b(0x1e4),_0x45ce9b(0x1f5)),console[_0x45ce9b(0x20d)](_0x45ce9b(0x187),_0x7693a0['message']);break;}}async[_0x3f3d29(0x1a5)](_0x270e46=![]){const _0x4d15fe=_0x3f3d29;this['forceRelayMode']=_0x270e46,this[_0x4d15fe(0x235)]++,console[_0x4d15fe(0x1e5)]('Q-Chat:\x20Initializing\x20WebRTC\x20(attempt\x20'+this[_0x4d15fe(0x235)]+',\x20forceRelay:\x20'+_0x270e46+')');let _0x214589=this[_0x4d15fe(0x239)];if(!_0x214589){const _0x3eaad0=[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0x4d15fe(0x18e)}];_0x214589=_0x3eaad0;try{const _0x86510d=await fetch(_0x4d15fe(0x19d)),_0x4c3dc1=await _0x86510d['json']();Array[_0x4d15fe(0x20e)](_0x4c3dc1)&&_0x4c3dc1[_0x4d15fe(0x23c)]>0x0?(_0x214589=_0x4c3dc1['map'](_0x4611f0=>{const _0x161dd7=_0x4d15fe,_0xcc2378={..._0x4611f0};return _0x4611f0['urls']&&!_0x4611f0[_0x161dd7(0x1a6)]&&(_0xcc2378['url']=_0x4611f0[_0x161dd7(0x214)]),_0xcc2378;}),console['log'](_0x4d15fe(0x1d4),_0x214589[_0x4d15fe(0x23c)]),_0x214589['forEach']((_0x4465a7,_0x2dade6)=>{const _0x165990=_0x4d15fe;console[_0x165990(0x1e5)](_0x165990(0x1b0)+_0x2dade6+':',JSON[_0x165990(0x1fe)](_0x4465a7));})):console[_0x4d15fe(0x1e5)](_0x4d15fe(0x183));}catch(_0xaeb13f){console['log'](_0x4d15fe(0x1f0),_0xaeb13f);}this[_0x4d15fe(0x239)]=_0x214589;}else console[_0x4d15fe(0x1e5)]('Q-Chat:\x20Using\x20cached\x20ICE\x20servers\x20for\x20retry');const _0x39ee14={'iceServers':_0x214589,'iceTransportPolicy':_0x270e46?'relay':_0x4d15fe(0x1ae)};_0x270e46&&console['log'](_0x4d15fe(0x17b)),this['peerConnection']=new RTCPeerConnection(_0x39ee14),this['peerConnection']['onicecandidate']=_0x171ca8=>{const _0x5efa8e=_0x4d15fe;_0x171ca8['candidate']?(console[_0x5efa8e(0x1e5)]('Q-Chat:\x20Sending\x20ICE\x20candidate:',_0x171ca8[_0x5efa8e(0x1ac)][_0x5efa8e(0x1ac)][_0x5efa8e(0x213)](0x0,0x32)),this['send']({'type':'ice-candidate','roomId':this[_0x5efa8e(0x204)],'candidate':_0x171ca8[_0x5efa8e(0x1ac)]})):console[_0x5efa8e(0x1e5)](_0x5efa8e(0x20b));},this[_0x4d15fe(0x184)][_0x4d15fe(0x21d)]=()=>{console['log']('Q-Chat:\x20ICE\x20connection\x20state:',this['peerConnection']['iceConnectionState']);},this['peerConnection'][_0x4d15fe(0x1b2)]=()=>{const _0x4d7be4=_0x4d15fe;console[_0x4d7be4(0x1e5)]('Q-Chat:\x20ICE\x20gathering\x20state:',this['peerConnection']['iceGatheringState']);},this[_0x4d15fe(0x184)][_0x4d15fe(0x1e7)]=()=>{const _0x6ca239=_0x4d15fe,_0x4db46b=this['peerConnection']['connectionState'];console['log']('Q-Chat:\x20Connection\x20state:',_0x4db46b);if(_0x4db46b==='connecting')this['connectionTimeout']&&clearTimeout(this[_0x6ca239(0x21b)]),this['connectionTimeout']=setTimeout(()=>{const _0x544536=_0x6ca239;this['peerConnection']&&this['peerConnection'][_0x544536(0x1aa)]===_0x544536(0x170)&&(console[_0x544536(0x1e5)]('Q-Chat:\x20Connection\x20timeout\x20-\x20may\x20be\x20behind\x20VPN'),!this['forceRelayMode']&&this['connectionAttempt']<this[_0x544536(0x1f3)]&&(this[_0x544536(0x1cf)]('Connection\x20slow,\x20trying\x20VPN-compatible\x20mode...'),this['retryWithRelayMode']()));},0x3a98);else{if(_0x4db46b==='connected')this['connectionTimeout']&&(clearTimeout(this['connectionTimeout']),this[_0x6ca239(0x21b)]=null),this['updateStatus']('connected',_0x6ca239(0x174)),this['forceRelayMode']?this[_0x6ca239(0x1cf)]('ðŸ”’\x20Secure\x20connection\x20established\x20via\x20relay\x20(VPN\x20mode)'):this[_0x6ca239(0x1cf)]('ðŸ”’\x20Secure\x20connection\x20established\x20(DTLS\x201.3)');else(_0x4db46b==='disconnected'||_0x4db46b===_0x6ca239(0x19e))&&(this['connectionTimeout']&&(clearTimeout(this[_0x6ca239(0x21b)]),this['connectionTimeout']=null),_0x4db46b===_0x6ca239(0x19e)&&!this[_0x6ca239(0x1c4)]&&this[_0x6ca239(0x235)]<this['maxConnectionAttempts']?(console[_0x6ca239(0x1e5)](_0x6ca239(0x1ab)),this[_0x6ca239(0x1cf)]('Direct\x20connection\x20failed,\x20trying\x20VPN-compatible\x20mode...'),this[_0x6ca239(0x1a3)]()):(this[_0x6ca239(0x22e)]('disconnected','Disconnected'),this['disableChat']()));}},this[_0x4d15fe(0x16a)]?(this[_0x4d15fe(0x1f6)]=this['peerConnection']['createDataChannel']('qchat',{'ordered':!![]}),this[_0x4d15fe(0x230)]()):this['peerConnection']['ondatachannel']=_0x3c99a7=>{const _0x2c6ce6=_0x4d15fe;this['dataChannel']=_0x3c99a7['channel'],this[_0x2c6ce6(0x230)]();};}[_0x3f3d29(0x230)](){const _0x4c2d5d=_0x3f3d29;this['dataChannel']['onopen']=()=>{const _0x35e20f=_0x37b3;console['log'](_0x35e20f(0x1c6)),this[_0x35e20f(0x1d7)]=!![],this[_0x35e20f(0x1e8)](),this[_0x35e20f(0x1af)]();},this[_0x4c2d5d(0x1f6)][_0x4c2d5d(0x1a0)]=()=>{const _0xdb28f8=_0x4c2d5d;console[_0xdb28f8(0x1e5)]('Q-Chat:\x20Data\x20channel\x20closed'),this[_0xdb28f8(0x1d7)]=![],this['disableChat']();},this['dataChannel']['onmessage']=_0x5a4fbe=>{const _0x3001cc=_0x4c2d5d,_0xf868d7=JSON[_0x3001cc(0x177)](_0x5a4fbe[_0x3001cc(0x1a9)]);this['receiveMessage'](_0xf868d7);};}async['createAndSendOffer'](){const _0x4ebffa=_0x3f3d29;try{const _0x2d78bf=await this['peerConnection'][_0x4ebffa(0x180)]();await this['peerConnection'][_0x4ebffa(0x1a2)](_0x2d78bf),this[_0x4ebffa(0x17e)]({'type':_0x4ebffa(0x1b9),'roomId':this['roomId'],'sdp':_0x2d78bf[_0x4ebffa(0x1fa)]});}catch(_0x5655e0){console[_0x4ebffa(0x20d)]('Q-Chat:\x20Error\x20creating\x20offer:',_0x5655e0);}}async['handleOffer'](_0x357a34){const _0x2a266b=_0x3f3d29;try{!this[_0x2a266b(0x184)]&&await this['initializeWebRTC']();await this[_0x2a266b(0x184)][_0x2a266b(0x1d1)](new RTCSessionDescription({'type':'offer','sdp':_0x357a34['sdp']}));const _0x585f81=await this[_0x2a266b(0x184)][_0x2a266b(0x1d8)]();await this['peerConnection']['setLocalDescription'](_0x585f81),this['send']({'type':_0x2a266b(0x20c),'roomId':this['roomId'],'sdp':_0x585f81['sdp']});}catch(_0x3370c9){console[_0x2a266b(0x20d)](_0x2a266b(0x218),_0x3370c9);}}async['handleAnswer'](_0x176a45){const _0x4a8c73=_0x3f3d29;try{await this[_0x4a8c73(0x184)]['setRemoteDescription'](new RTCSessionDescription({'type':_0x4a8c73(0x20c),'sdp':_0x176a45['sdp']}));}catch(_0x38ba21){console[_0x4a8c73(0x20d)]('Q-Chat:\x20Error\x20handling\x20answer:',_0x38ba21);}}async[_0x3f3d29(0x1e1)](_0x8b18d4){const _0x22bab9=_0x3f3d29;try{_0x8b18d4[_0x22bab9(0x1ac)]&&this[_0x22bab9(0x184)]&&(console['log']('Q-Chat:\x20Received\x20ICE\x20candidate:',_0x8b18d4['candidate']['candidate']?.[_0x22bab9(0x213)](0x0,0x32)),await this[_0x22bab9(0x184)]['addIceCandidate'](new RTCIceCandidate(_0x8b18d4['candidate'])));}catch(_0x339199){console['error']('Q-Chat:\x20Error\x20handling\x20ICE\x20candidate:',_0x339199);}}async['retryWithRelayMode'](){const _0x1499bc=_0x3f3d29;console['log']('Q-Chat:\x20Retrying\x20with\x20relay-only\x20mode\x20for\x20VPN\x20compatibility'),this['send']({'type':_0x1499bc(0x221),'roomId':this['roomId']}),this[_0x1499bc(0x1f6)]&&(this['dataChannel'][_0x1499bc(0x1bb)](),this[_0x1499bc(0x1f6)]=null),this[_0x1499bc(0x184)]&&(this['peerConnection']['close'](),this[_0x1499bc(0x184)]=null),await this['initializeWebRTC'](!![]),this[_0x1499bc(0x16a)]&&await this[_0x1499bc(0x16f)]();}async[_0x3f3d29(0x1a1)](){const _0x55c925=_0x3f3d29;console[_0x55c925(0x1e5)](_0x55c925(0x1c5)),this[_0x55c925(0x1cf)](_0x55c925(0x1fd)),this[_0x55c925(0x1f6)]&&(this[_0x55c925(0x1f6)][_0x55c925(0x1bb)](),this['dataChannel']=null),this['peerConnection']&&(this[_0x55c925(0x184)][_0x55c925(0x1bb)](),this['peerConnection']=null),await this['initializeWebRTC'](!![]);}['showRoomInfo'](){const _0x46ddda=_0x3f3d29;if(this[_0x46ddda(0x212)])this['connectSection']['style']['display']='none';if(this['roomInfoSection'])this['roomInfoSection']['style']['display']='block';this['startMatrixSphereAnimation']();}['startMatrixSphereAnimation'](){const _0x32e880=_0x3f3d29,_0x410b17=document[_0x32e880(0x205)]('matrixSphereContainer'),_0x2e477a=document[_0x32e880(0x205)](_0x32e880(0x18b)),_0x48ca9a=document[_0x32e880(0x205)](_0x32e880(0x17d)),_0x14984e=document['getElementById'](_0x32e880(0x21c)),_0x48a7b6=document[_0x32e880(0x205)](_0x32e880(0x17c));if(!_0x2e477a||!_0x410b17){if(this[_0x32e880(0x1f8)])this[_0x32e880(0x1f8)]['textContent']=this['roomId'];return;}this[_0x32e880(0x18c)](_0x2e477a);const _0xe37dbc=[_0x32e880(0x200),'Encrypting\x20Neural\x20Pathway...',_0x32e880(0x164),_0x32e880(0x1e9)];let _0x503d94=0x0;const _0x30d020=setInterval(()=>{const _0x7f31c5=_0x32e880;_0x503d94++,_0x503d94<_0xe37dbc[_0x7f31c5(0x23c)]&&_0x48ca9a&&(_0x48ca9a[_0x7f31c5(0x186)]=_0xe37dbc[_0x503d94]);},0x258);setTimeout(()=>{const _0x362ab6=_0x32e880;clearInterval(_0x30d020),_0x2e477a[_0x362ab6(0x1dd)]['add'](_0x362ab6(0x23f));if(_0x48ca9a)_0x48ca9a['style']['display']=_0x362ab6(0x1e0);setTimeout(()=>{const _0x8616ba=_0x362ab6;_0x410b17[_0x8616ba(0x1f2)][_0x8616ba(0x20a)]='none';if(this[_0x8616ba(0x1f8)])this['roomCodeEl']['textContent']=this['roomId'];_0x14984e&&(_0x14984e['classList'][_0x8616ba(0x231)](_0x8616ba(0x233)),_0x14984e['classList'][_0x8616ba(0x16c)](_0x8616ba(0x176))),_0x48a7b6&&_0x48a7b6[_0x8616ba(0x1dd)][_0x8616ba(0x231)](_0x8616ba(0x233));},0x320);},0x9c4);}[_0x3f3d29(0x18c)](_0x4a942a){const _0x286577=_0x3f3d29;_0x4a942a[_0x286577(0x1f9)]='';const _0x5bd639=0x78,_0x46b33d=0x3c;for(let _0x3b9a86=0x0;_0x3b9a86<_0x5bd639;_0x3b9a86++){const _0x4c78d1=document[_0x286577(0x1d5)](_0x286577(0x1b1));_0x4c78d1[_0x286577(0x1da)]='matrix-digit',_0x4c78d1[_0x286577(0x186)]=Math[_0x286577(0x172)](Math[_0x286577(0x1ed)]()*0xa);const _0x13b61f=Math[_0x286577(0x1ef)](0x1-0x2*(_0x3b9a86+0.5)/_0x5bd639),_0x5c1dde=Math['PI']*(0x1+Math[_0x286577(0x1dc)](0x5))*_0x3b9a86,_0x2264dd=_0x46b33d*Math[_0x286577(0x1ad)](_0x13b61f)*Math['cos'](_0x5c1dde),_0x5ab345=_0x46b33d*Math['sin'](_0x13b61f)*Math['sin'](_0x5c1dde),_0x16596b=_0x46b33d*Math['cos'](_0x13b61f);_0x4c78d1[_0x286577(0x1f2)][_0x286577(0x17f)]='translate3d('+_0x2264dd+'px,\x20'+_0x5ab345+'px,\x20'+_0x16596b+_0x286577(0x16b),_0x4c78d1[_0x286577(0x1f2)]['left']='50%',_0x4c78d1[_0x286577(0x1f2)][_0x286577(0x20f)]=_0x286577(0x1d6),_0x4c78d1['style']['marginLeft']='-7px',_0x4c78d1[_0x286577(0x1f2)]['marginTop']=_0x286577(0x1d9),_0x4c78d1['style']['animationDelay']=Math[_0x286577(0x1ed)]()*0.5+'s';const _0x2c4629=0.4+(_0x16596b+_0x46b33d)/(0x2*_0x46b33d)*0.6;_0x4c78d1[_0x286577(0x1f2)][_0x286577(0x190)]=_0x2c4629,_0x4a942a[_0x286577(0x1fb)](_0x4c78d1);}this[_0x286577(0x1b5)]=setInterval(()=>{const _0x35bb47=_0x286577,_0xe16f8c=_0x4a942a['querySelectorAll']('.matrix-digit'),_0x4d5c70=_0xe16f8c[Math[_0x35bb47(0x172)](Math[_0x35bb47(0x1ed)]()*_0xe16f8c['length'])];_0x4d5c70&&(_0x4d5c70[_0x35bb47(0x186)]=Math[_0x35bb47(0x172)](Math['random']()*0xa));},0x32),setTimeout(()=>{const _0x2e4b16=_0x286577;this[_0x2e4b16(0x1b5)]&&clearInterval(this['digitChangeInterval']);},0xdac);}[_0x3f3d29(0x1af)](){const _0x599b7d=_0x3f3d29;if(this[_0x599b7d(0x212)])this[_0x599b7d(0x212)][_0x599b7d(0x1f2)]['display']='none';if(this[_0x599b7d(0x227)])this['roomInfoSection']['style']['display']=_0x599b7d(0x1e0);if(this['messagesSection'])this['messagesSection']['style']['display']=_0x599b7d(0x191);if(this['inputSection'])this[_0x599b7d(0x232)]['style']['display']='block';}[_0x3f3d29(0x1e8)](){const _0x20968d=_0x3f3d29;this['messageInput']&&(this['messageInput'][_0x20968d(0x171)]=![],this[_0x20968d(0x226)]['focus']());if(this[_0x20968d(0x19f)])this['sendBtn']['disabled']=![];}[_0x3f3d29(0x1b6)](){const _0x3f5b98=_0x3f3d29;if(this[_0x3f5b98(0x226)])this['messageInput']['disabled']=!![];if(this[_0x3f5b98(0x19f)])this[_0x3f5b98(0x19f)][_0x3f5b98(0x171)]=!![];}['sendMessage'](){const _0x43c8ae=_0x3f3d29,_0x56f58d=this['messageInput']?.['value']['trim']();if(!_0x56f58d||!this[_0x43c8ae(0x1d7)])return;const _0x2e1a20={'type':_0x43c8ae(0x208),'text':_0x56f58d,'timestamp':Date[_0x43c8ae(0x209)]()};try{this[_0x43c8ae(0x1f6)]['send'](JSON[_0x43c8ae(0x1fe)](_0x2e1a20)),this['addMessage'](_0x56f58d,_0x43c8ae(0x16e),_0x2e1a20[_0x43c8ae(0x1c1)]),this[_0x43c8ae(0x226)]['value']='';}catch(_0x231316){console['error'](_0x43c8ae(0x169),_0x231316),this[_0x43c8ae(0x1cf)](_0x43c8ae(0x236));}}[_0x3f3d29(0x192)](_0xe3b103){const _0x30bfad=_0x3f3d29;_0xe3b103[_0x30bfad(0x17a)]==='message'&&(this['addMessage'](_0xe3b103[_0x30bfad(0x1bc)],_0x30bfad(0x223),_0xe3b103['timestamp']),!this['isPanelOpen']&&(this['unreadCount']++,this[_0x30bfad(0x219)]()));}['addMessage'](_0x59be2d,_0xd8233d,_0x1fa7ad){const _0x53b2f2=_0x3f3d29,_0x41952c=document['createElement']('div');_0x41952c['className']='qchat-message\x20'+_0xd8233d;const _0x289089=new Date(_0x1fa7ad)['toLocaleTimeString']([],{'hour':'2-digit','minute':'2-digit'});_0x41952c[_0x53b2f2(0x1f9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-text\x22>'+this[_0x53b2f2(0x195)](_0x59be2d)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xd8233d==='sent'?'âœ“\x20':'')+_0x289089+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',this[_0x53b2f2(0x1b3)]?.[_0x53b2f2(0x1fb)](_0x41952c),this[_0x53b2f2(0x1c9)]();}[_0x3f3d29(0x1cf)](_0x208cc3){const _0x4b0e5f=_0x3f3d29,_0x20d829=document['createElement'](_0x4b0e5f(0x189));_0x20d829[_0x4b0e5f(0x1da)]='qchat-system-message',_0x20d829['textContent']=_0x208cc3,this[_0x4b0e5f(0x1b3)]?.['appendChild'](_0x20d829),this[_0x4b0e5f(0x1c9)]();}['scrollToBottom'](){const _0x366e3a=_0x3f3d29;this[_0x366e3a(0x203)]&&(this['messagesSection'][_0x366e3a(0x193)]=this['messagesSection'][_0x366e3a(0x166)]);}['updateStatus'](_0x108eca,_0x3f7c9d){const _0x12c05d=_0x3f3d29;if(this[_0x12c05d(0x1bd)]){this['statusEl']['className']=_0x12c05d(0x178)+_0x108eca;const _0x17ec2f=this[_0x12c05d(0x1bd)][_0x12c05d(0x1b4)]('.status-text');if(_0x17ec2f)_0x17ec2f[_0x12c05d(0x186)]=_0x3f7c9d;}}[_0x3f3d29(0x219)](){const _0x25c59d=_0x3f3d29;this['badge']&&(this['unreadCount']>0x0?(this[_0x25c59d(0x19c)][_0x25c59d(0x186)]=this[_0x25c59d(0x175)]>0x63?'99+':this[_0x25c59d(0x175)],this[_0x25c59d(0x19c)][_0x25c59d(0x1f2)][_0x25c59d(0x20a)]='flex'):this[_0x25c59d(0x19c)]['style'][_0x25c59d(0x20a)]=_0x25c59d(0x1e0));}[_0x3f3d29(0x181)](){this['unreadCount']=0x0,this['updateBadge']();}[_0x3f3d29(0x182)](){const _0x4f6883=_0x3f3d29;this[_0x4f6883(0x204)]&&navigator[_0x4f6883(0x1d0)]['writeText'](this[_0x4f6883(0x204)])[_0x4f6883(0x206)](()=>{this['showSystemMessage']('Room\x20code\x20copied!');})['catch'](()=>{const _0x5d9ee7=_0x4f6883,_0x3c225f=document['createElement']('textarea');_0x3c225f[_0x5d9ee7(0x18f)]=this['roomId'],document[_0x5d9ee7(0x199)]['appendChild'](_0x3c225f),_0x3c225f['select'](),document['execCommand'](_0x5d9ee7(0x1bf)),document['body'][_0x5d9ee7(0x1fc)](_0x3c225f),this['showSystemMessage']('Room\x20code\x20copied!');});}[_0x3f3d29(0x23e)](){const _0x7fa825=_0x3f3d29;this['isConnected']=![],this[_0x7fa825(0x22e)](_0x7fa825(0x1e4),'Disconnected'),this['disableChat']();}['escapeHtml'](_0x29bf7b){const _0x45e257=_0x3f3d29,_0x3af57f=document['createElement']('div');return _0x3af57f['textContent']=_0x29bf7b,_0x3af57f[_0x45e257(0x1f9)];}}document[_0x3f3d29(0x1ce)]('DOMContentLoaded',()=>{window['qChat']=new QChat();});