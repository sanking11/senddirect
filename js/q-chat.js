const _0x2d7cc2=_0x4798;(function(_0x5c2619,_0xe2bbb7){const _0x48f49a=_0x4798,_0x5c5653=_0x5c2619();while(!![]){try{const _0x3556fe=parseInt(_0x48f49a(0xce))/0x1+-parseInt(_0x48f49a(0x155))/0x2*(parseInt(_0x48f49a(0x104))/0x3)+parseInt(_0x48f49a(0xaf))/0x4+parseInt(_0x48f49a(0xa8))/0x5*(-parseInt(_0x48f49a(0xfc))/0x6)+parseInt(_0x48f49a(0xd5))/0x7+parseInt(_0x48f49a(0x112))/0x8*(parseInt(_0x48f49a(0x10a))/0x9)+parseInt(_0x48f49a(0xf4))/0xa;if(_0x3556fe===_0xe2bbb7)break;else _0x5c5653['push'](_0x5c5653['shift']());}catch(_0xde087c){_0x5c5653['push'](_0x5c5653['shift']());}}}(_0x596e,0x8066f));class QChat{constructor(){const _0x51ebc1=_0x4798;this['ws']=null,this['peerConnection']=null,this['dataChannel']=null,this['roomId']=null,this['isHost']=![],this['isConnected']=![],this['unreadCount']=0x0,this['isPanelOpen']=![],this[_0x51ebc1(0x122)](),this[_0x51ebc1(0xe3)]();}[_0x2d7cc2(0x122)](){const _0x2b8331=_0x2d7cc2;this['panel']=document['getElementById']('qchatPanel'),this['toggleBtn']=document[_0x2b8331(0xea)]('qchatToggle'),this[_0x2b8331(0xc8)]=document[_0x2b8331(0xea)](_0x2b8331(0x15c)),this[_0x2b8331(0x145)]=document['getElementById'](_0x2b8331(0xa2)),this['connectSection']=document['getElementById']('qchatConnect'),this['roomInfoSection']=document[_0x2b8331(0xea)]('qchatRoomInfo'),this['messagesSection']=document['getElementById']('qchatMessages'),this[_0x2b8331(0xf8)]=document[_0x2b8331(0xea)](_0x2b8331(0xe9)),this['statusEl']=document['getElementById'](_0x2b8331(0x12c)),this['roomCodeEl']=document[_0x2b8331(0xea)](_0x2b8331(0xf3)),this[_0x2b8331(0xac)]=document['getElementById'](_0x2b8331(0x113)),this[_0x2b8331(0x13b)]=document[_0x2b8331(0xea)]('qchatJoin'),this[_0x2b8331(0x13f)]=document[_0x2b8331(0xea)](_0x2b8331(0xa1)),this['sendBtn']=document[_0x2b8331(0xea)]('qchatSendBtn'),this['roomInput']=document[_0x2b8331(0xea)]('qchatRoomInput'),this[_0x2b8331(0x12f)]=document[_0x2b8331(0xea)](_0x2b8331(0xb9)),this['messagesList']=document[_0x2b8331(0xea)]('qchatMessagesList');}['bindEvents'](){const _0x4b33a4=_0x2d7cc2;this['toggleBtn']?.['addEventListener']('click',()=>this['togglePanel']()),this[_0x4b33a4(0xc8)]?.[_0x4b33a4(0xdb)]('click',()=>this['closePanel']()),this['createBtn']?.[_0x4b33a4(0xdb)](_0x4b33a4(0x15b),()=>this[_0x4b33a4(0x106)]()),this['joinBtn']?.['addEventListener'](_0x4b33a4(0x15b),()=>this['joinRoom']()),this['roomInput']?.['addEventListener']('keypress',_0x4637ca=>{const _0x517e97=_0x4b33a4;if(_0x4637ca['key']===_0x517e97(0xb4))this['joinRoom']();}),this['copyCodeBtn']?.['addEventListener']('click',()=>this[_0x4b33a4(0x159)]()),this[_0x4b33a4(0xfa)]?.['addEventListener'](_0x4b33a4(0x15b),()=>this['sendMessage']()),this[_0x4b33a4(0x12f)]?.['addEventListener']('keypress',_0x42ea90=>{const _0x3604bf=_0x4b33a4;_0x42ea90['key']==='Enter'&&!_0x42ea90['shiftKey']&&(_0x42ea90['preventDefault'](),this[_0x3604bf(0x114)]());}),document[_0x4b33a4(0xdb)](_0x4b33a4(0x15b),_0x2b95b7=>{const _0x4824bd=_0x4b33a4;this[_0x4824bd(0x10f)]&&!this[_0x4824bd(0x12a)]?.[_0x4824bd(0xb1)](_0x2b95b7['target'])&&!this[_0x4824bd(0x11b)]?.['contains'](_0x2b95b7[_0x4824bd(0xd0)])&&this[_0x4824bd(0xe6)]();});}[_0x2d7cc2(0x148)](){const _0xa7d522=_0x2d7cc2;this[_0xa7d522(0x10f)]?this[_0xa7d522(0xe6)]():this['openPanel']();}[_0x2d7cc2(0xa4)](){const _0xe704ea=_0x2d7cc2;this[_0xe704ea(0x12a)]?.[_0xe704ea(0xde)]['add'](_0xe704ea(0x136)),this[_0xe704ea(0x11b)]?.[_0xe704ea(0xde)]['add']('active'),this['isPanelOpen']=!![],this['clearUnread']();}['closePanel'](){const _0x1db866=_0x2d7cc2;this[_0x1db866(0x12a)]?.[_0x1db866(0xde)]['remove']('open'),this['toggleBtn']?.['classList'][_0x1db866(0x153)]('active'),this['isPanelOpen']=![];}['generateRoomId'](){const _0x3c1a6d=_0x2d7cc2,_0x22d998=_0x3c1a6d(0xc1);let _0x19a597='';for(let _0x532147=0x0;_0x532147<0x6;_0x532147++){_0x19a597+=_0x22d998[_0x3c1a6d(0x11e)](Math['floor'](Math[_0x3c1a6d(0xf5)]()*_0x22d998[_0x3c1a6d(0x9e)]));}return _0x19a597;}[_0x2d7cc2(0xad)](){const _0x4d38d7=_0x2d7cc2,_0x3d926a=window[_0x4d38d7(0xc2)][_0x4d38d7(0x12b)]==='https:'?'wss:':'ws:';return _0x3d926a+'//'+window['location'][_0x4d38d7(0xbe)]+'/ws';}async[_0x2d7cc2(0xa6)](){return new Promise((_0xc35d63,_0x20789a)=>{const _0x585985=_0x4798,_0x57b5eb=this['getWebSocketUrl']();console[_0x585985(0x101)]('Q-Chat:\x20Connecting\x20to:',_0x57b5eb),this['ws']=new WebSocket(_0x57b5eb),this['ws']['onopen']=()=>{console['log']('Q-Chat:\x20WebSocket\x20connected'),_0xc35d63();},this['ws']['onerror']=_0x316c98=>{const _0x1b12ad=_0x585985;console[_0x1b12ad(0x157)](_0x1b12ad(0x150),_0x316c98),_0x20789a(_0x316c98);},this['ws'][_0x585985(0xd9)]=()=>{const _0x3b26a3=_0x585985;console[_0x3b26a3(0x101)](_0x3b26a3(0xb6)),this['handleDisconnect']();},this['ws'][_0x585985(0x15f)]=_0x374440=>{const _0xfc0b06=_0x585985,_0x3565fe=JSON[_0xfc0b06(0x10b)](_0x374440['data']);console[_0xfc0b06(0x101)](_0xfc0b06(0xcb),_0x3565fe['type'],_0x3565fe),this[_0xfc0b06(0xdf)](_0x3565fe);};});}['send'](_0x395c8d){const _0x5ca654=_0x2d7cc2;this['ws']&&this['ws'][_0x5ca654(0xb2)]===WebSocket[_0x5ca654(0x144)]&&this['ws'][_0x5ca654(0xec)](JSON['stringify'](_0x395c8d));}async['createRoom'](){const _0x5abbc6=_0x2d7cc2;this['isHost']=!![],this['roomId']=this[_0x5abbc6(0x12d)](),this['updateStatus']('connecting','Connecting...');try{await this[_0x5abbc6(0xa6)](),this['send']({'type':'create-room','roomId':this[_0x5abbc6(0xcd)]});}catch(_0x556710){this['showSystemMessage']('Failed\x20to\x20connect\x20to\x20server'),this[_0x5abbc6(0xc4)](_0x5abbc6(0xa5),'Connection\x20failed');}}async[_0x2d7cc2(0x11f)](){const _0x150220=_0x2d7cc2,_0x3e3938=this[_0x150220(0xe1)]?.['value']['trim']()[_0x150220(0x133)]();if(!_0x3e3938||_0x3e3938[_0x150220(0x9e)]<0x4){this[_0x150220(0x10e)]('Please\x20enter\x20a\x20valid\x20room\x20code');return;}this['isHost']=![],this['roomId']=_0x3e3938,this[_0x150220(0xc4)](_0x150220(0xb8),'Joining...');try{await this['connectToServer'](),this[_0x150220(0xec)]({'type':_0x150220(0x142),'roomId':this['roomId']});}catch(_0x1435d0){this['showSystemMessage']('Failed\x20to\x20connect\x20to\x20server'),this[_0x150220(0xc4)]('disconnected',_0x150220(0x161));}}async['handleSignalingMessage'](_0x397378){const _0x297d6a=_0x2d7cc2;switch(_0x397378[_0x297d6a(0xb7)]){case'room-created':this['showRoomInfo'](),this[_0x297d6a(0xc4)](_0x297d6a(0xb8),_0x297d6a(0x103));break;case _0x297d6a(0xab):this['showSystemMessage']('Joined\x20room!\x20Waiting\x20for\x20host...'),this[_0x297d6a(0xc4)]('connecting',_0x297d6a(0xd2));break;case'peer-joined':console[_0x297d6a(0x101)](_0x297d6a(0x152),this['isHost']),this['showSystemMessage'](_0x297d6a(0x124)),this[_0x297d6a(0xc4)](_0x297d6a(0xb8),_0x297d6a(0xfe));try{await this['initializeWebRTC'](),console[_0x297d6a(0x101)]('Q-Chat:\x20WebRTC\x20initialized,\x20peerConnection:',!!this[_0x297d6a(0x9d)]),this['isHost']&&(console[_0x297d6a(0x101)](_0x297d6a(0xff)),await this[_0x297d6a(0x129)](),console[_0x297d6a(0x101)]('Q-Chat:\x20Offer\x20sent'));}catch(_0x1a3266){console[_0x297d6a(0x157)]('Q-Chat:\x20Error\x20in\x20peer-joined\x20handler:',_0x1a3266),this['showSystemMessage']('Connection\x20setup\x20failed'),this['updateStatus']('disconnected',_0x297d6a(0xef));}break;case'peer-left':this['showSystemMessage']('Peer\x20disconnected'),this[_0x297d6a(0xc4)](_0x297d6a(0xa5),'Peer\x20left'),this['disableChat']();break;case'offer':await this[_0x297d6a(0x141)](_0x397378);break;case'answer':await this[_0x297d6a(0x11d)](_0x397378);break;case _0x297d6a(0x128):await this['handleIceCandidate'](_0x397378);break;case'error':this['showSystemMessage']('Error:\x20'+_0x397378['message']),this['updateStatus']('disconnected','Error'),console['error']('Q-Chat\x20Server\x20Error:',_0x397378['message']);break;}}async['initializeWebRTC'](){const _0x3a9f66=_0x2d7cc2,_0x118a24=[{'urls':'stun:stun.l.google.com:19302'},{'urls':_0x3a9f66(0x109)}];let _0x4a4838=_0x118a24;try{const _0x43f829=await fetch(_0x3a9f66(0x14d)),_0x58feea=await _0x43f829[_0x3a9f66(0xae)]();Array[_0x3a9f66(0x115)](_0x58feea)&&_0x58feea[_0x3a9f66(0x9e)]>0x0?(_0x4a4838=_0x58feea[_0x3a9f66(0x108)](_0x1f334b=>{const _0x591d38={..._0x1f334b};return _0x1f334b['urls']&&!_0x1f334b['url']&&(_0x591d38['url']=_0x1f334b['urls']),_0x591d38;}),console['log']('Q-Chat:\x20Using\x20TURN\x20servers\x20for\x20NAT\x20traversal,\x20count:',_0x4a4838[_0x3a9f66(0x9e)])):console['log'](_0x3a9f66(0xc9));}catch(_0x362972){console['log']('Q-Chat:\x20TURN\x20fetch\x20failed,\x20using\x20STUN\x20fallback',_0x362972);}const _0x4bde83={'iceServers':_0x4a4838};this['peerConnection']=new RTCPeerConnection(_0x4bde83),this['peerConnection']['onicecandidate']=_0x37759f=>{const _0x58fd3c=_0x3a9f66;_0x37759f[_0x58fd3c(0xdd)]?(console['log'](_0x58fd3c(0x14c),_0x37759f[_0x58fd3c(0xdd)][_0x58fd3c(0xdd)]['substring'](0x0,0x32)),this['send']({'type':_0x58fd3c(0x128),'roomId':this['roomId'],'candidate':_0x37759f['candidate']})):console[_0x58fd3c(0x101)]('Q-Chat:\x20ICE\x20gathering\x20complete');},this[_0x3a9f66(0x9d)][_0x3a9f66(0x10d)]=()=>{const _0x49dd20=_0x3a9f66;console[_0x49dd20(0x101)]('Q-Chat:\x20ICE\x20connection\x20state:',this['peerConnection'][_0x49dd20(0xe7)]);},this[_0x3a9f66(0x9d)]['onicegatheringstatechange']=()=>{const _0x2a48e9=_0x3a9f66;console[_0x2a48e9(0x101)](_0x2a48e9(0x9f),this[_0x2a48e9(0x9d)][_0x2a48e9(0x131)]);},this[_0x3a9f66(0x9d)]['onconnectionstatechange']=()=>{const _0x4b2769=_0x3a9f66,_0x58a91b=this[_0x4b2769(0x9d)]['connectionState'];console['log'](_0x4b2769(0xb3),_0x58a91b);if(_0x58a91b==='connected')this[_0x4b2769(0xc4)]('connected','Secure\x20P2P'),this[_0x4b2769(0x10e)](_0x4b2769(0xc7));else(_0x58a91b===_0x4b2769(0xa5)||_0x58a91b==='failed')&&(this[_0x4b2769(0xc4)]('disconnected',_0x4b2769(0xa9)),this[_0x4b2769(0xe2)]());},this[_0x3a9f66(0x13c)]?(this[_0x3a9f66(0x9c)]=this['peerConnection'][_0x3a9f66(0x135)]('qchat',{'ordered':!![]}),this[_0x3a9f66(0xf9)]()):this[_0x3a9f66(0x9d)]['ondatachannel']=_0x400bd8=>{const _0x11adb6=_0x3a9f66;this['dataChannel']=_0x400bd8['channel'],this[_0x11adb6(0xf9)]();};}['setupDataChannel'](){const _0x47ecd0=_0x2d7cc2;this[_0x47ecd0(0x9c)][_0x47ecd0(0x13d)]=()=>{const _0xeeaf07=_0x47ecd0;console['log']('Q-Chat:\x20Data\x20channel\x20open'),this[_0xeeaf07(0xf2)]=!![],this['enableChat'](),this[_0xeeaf07(0x139)]();},this[_0x47ecd0(0x9c)]['onclose']=()=>{const _0x48848a=_0x47ecd0;console['log'](_0x48848a(0xf7)),this['isConnected']=![],this[_0x48848a(0xe2)]();},this[_0x47ecd0(0x9c)][_0x47ecd0(0x15f)]=_0x102518=>{const _0x2dea03=_0x47ecd0,_0x1c6abb=JSON['parse'](_0x102518[_0x2dea03(0xf1)]);this[_0x2dea03(0x154)](_0x1c6abb);};}async[_0x2d7cc2(0x129)](){const _0x407285=_0x2d7cc2;try{const _0x388dee=await this[_0x407285(0x9d)][_0x407285(0xe5)]();await this['peerConnection'][_0x407285(0xed)](_0x388dee),this[_0x407285(0xec)]({'type':'offer','roomId':this['roomId'],'sdp':_0x388dee[_0x407285(0x11c)]});}catch(_0xeced28){console[_0x407285(0x157)]('Q-Chat:\x20Error\x20creating\x20offer:',_0xeced28);}}async['handleOffer'](_0x3202b3){const _0x109fe9=_0x2d7cc2;try{!this[_0x109fe9(0x9d)]&&await this['initializeWebRTC']();await this['peerConnection'][_0x109fe9(0xbb)](new RTCSessionDescription({'type':_0x109fe9(0x15e),'sdp':_0x3202b3[_0x109fe9(0x11c)]}));const _0x30dfac=await this[_0x109fe9(0x9d)]['createAnswer']();await this['peerConnection']['setLocalDescription'](_0x30dfac),this['send']({'type':'answer','roomId':this[_0x109fe9(0xcd)],'sdp':_0x30dfac['sdp']});}catch(_0x156bfb){console['error']('Q-Chat:\x20Error\x20handling\x20offer:',_0x156bfb);}}async[_0x2d7cc2(0x11d)](_0x4e6471){const _0x73bad4=_0x2d7cc2;try{await this['peerConnection']['setRemoteDescription'](new RTCSessionDescription({'type':_0x73bad4(0xf6),'sdp':_0x4e6471['sdp']}));}catch(_0x44a960){console[_0x73bad4(0x157)]('Q-Chat:\x20Error\x20handling\x20answer:',_0x44a960);}}async['handleIceCandidate'](_0x18d8c9){const _0x55ccc7=_0x2d7cc2;try{_0x18d8c9[_0x55ccc7(0xdd)]&&this[_0x55ccc7(0x9d)]&&(console['log']('Q-Chat:\x20Received\x20ICE\x20candidate:',_0x18d8c9['candidate'][_0x55ccc7(0xdd)]?.['substring'](0x0,0x32)),await this['peerConnection'][_0x55ccc7(0x105)](new RTCIceCandidate(_0x18d8c9[_0x55ccc7(0xdd)])));}catch(_0x41099f){console[_0x55ccc7(0x157)]('Q-Chat:\x20Error\x20handling\x20ICE\x20candidate:',_0x41099f);}}[_0x2d7cc2(0xc5)](){const _0x525ccd=_0x2d7cc2;if(this[_0x525ccd(0xda)])this[_0x525ccd(0xda)]['style']['display']=_0x525ccd(0x107);if(this['roomInfoSection'])this['roomInfoSection'][_0x525ccd(0xb5)]['display']=_0x525ccd(0xd6);this[_0x525ccd(0x143)]();}[_0x2d7cc2(0x143)](){const _0x231235=_0x2d7cc2,_0x5d3b4a=document['getElementById'](_0x231235(0xd3)),_0xfb6cc1=document[_0x231235(0xea)](_0x231235(0xa3)),_0x4a42e8=document[_0x231235(0xea)](_0x231235(0x13a)),_0x9a636e=document[_0x231235(0xea)](_0x231235(0x15a)),_0x3faacc=document[_0x231235(0xea)]('qchatWaiting');if(!_0xfb6cc1||!_0x5d3b4a){if(this[_0x231235(0x11a)])this['roomCodeEl'][_0x231235(0xc3)]=this['roomId'];return;}this['createMatrixSphere'](_0xfb6cc1);const _0x25bd27=[_0x231235(0x130),_0x231235(0xca),'Establishing\x20Secure\x20Link...','Finalizing\x20Quantum\x20Code...'];let _0x423535=0x0;const _0x2ec756=setInterval(()=>{const _0x31d6bc=_0x231235;_0x423535++,_0x423535<_0x25bd27['length']&&_0x4a42e8&&(_0x4a42e8[_0x31d6bc(0xc3)]=_0x25bd27[_0x423535]);},0x258);setTimeout(()=>{const _0x12ff1a=_0x231235;clearInterval(_0x2ec756),_0xfb6cc1[_0x12ff1a(0xde)][_0x12ff1a(0x125)]('fade-out');if(_0x4a42e8)_0x4a42e8[_0x12ff1a(0xb5)]['display']='none';setTimeout(()=>{const _0x29a85f=_0x12ff1a;_0x5d3b4a['style']['display']=_0x29a85f(0x107);if(this[_0x29a85f(0x11a)])this[_0x29a85f(0x11a)][_0x29a85f(0xc3)]=this['roomId'];_0x9a636e&&(_0x9a636e['classList'][_0x29a85f(0x153)](_0x29a85f(0x126)),_0x9a636e[_0x29a85f(0xde)][_0x29a85f(0x125)](_0x29a85f(0x110))),_0x3faacc&&_0x3faacc['classList']['remove']('hidden');},0x320);},0x9c4);}[_0x2d7cc2(0x10c)](_0x19a8b1){const _0x22adf4=_0x2d7cc2;_0x19a8b1[_0x22adf4(0xba)]='';const _0x5d2574=0x78,_0x48328d=0x3c;for(let _0x14dfb9=0x0;_0x14dfb9<_0x5d2574;_0x14dfb9++){const _0x42aecc=document[_0x22adf4(0x15d)]('span');_0x42aecc[_0x22adf4(0x132)]=_0x22adf4(0x14f),_0x42aecc['textContent']=Math[_0x22adf4(0x137)](Math[_0x22adf4(0xf5)]()*0xa);const _0x22dec1=Math[_0x22adf4(0xa0)](0x1-0x2*(_0x14dfb9+0.5)/_0x5d2574),_0x47f488=Math['PI']*(0x1+Math[_0x22adf4(0xd1)](0x5))*_0x14dfb9,_0x204176=_0x48328d*Math['sin'](_0x22dec1)*Math[_0x22adf4(0x121)](_0x47f488),_0x49b537=_0x48328d*Math['sin'](_0x22dec1)*Math[_0x22adf4(0x118)](_0x47f488),_0x4330fe=_0x48328d*Math[_0x22adf4(0x121)](_0x22dec1);_0x42aecc['style'][_0x22adf4(0x127)]=_0x22adf4(0xd8)+_0x204176+'px,\x20'+_0x49b537+_0x22adf4(0x119)+_0x4330fe+'px)',_0x42aecc['style'][_0x22adf4(0x111)]=_0x22adf4(0x123),_0x42aecc['style']['top']='50%',_0x42aecc[_0x22adf4(0xb5)]['marginLeft']=_0x22adf4(0xcc),_0x42aecc['style'][_0x22adf4(0x149)]=_0x22adf4(0xcf),_0x42aecc['style'][_0x22adf4(0x156)]=Math['random']()*0.5+'s';const _0x41f27c=0.4+(_0x4330fe+_0x48328d)/(0x2*_0x48328d)*0.6;_0x42aecc[_0x22adf4(0xb5)]['opacity']=_0x41f27c,_0x19a8b1[_0x22adf4(0xb0)](_0x42aecc);}this[_0x22adf4(0x158)]=setInterval(()=>{const _0x489d15=_0x22adf4,_0x368e45=_0x19a8b1[_0x489d15(0xa7)]('.matrix-digit'),_0x211d02=_0x368e45[Math[_0x489d15(0x137)](Math[_0x489d15(0xf5)]()*_0x368e45['length'])];_0x211d02&&(_0x211d02['textContent']=Math[_0x489d15(0x137)](Math['random']()*0xa));},0x32),setTimeout(()=>{this['digitChangeInterval']&&clearInterval(this['digitChangeInterval']);},0xdac);}[_0x2d7cc2(0x139)](){const _0x3aa0b3=_0x2d7cc2;if(this['connectSection'])this['connectSection'][_0x3aa0b3(0xb5)]['display']='none';if(this['roomInfoSection'])this[_0x3aa0b3(0x14a)]['style'][_0x3aa0b3(0xfd)]='none';if(this['messagesSection'])this['messagesSection']['style'][_0x3aa0b3(0xfd)]=_0x3aa0b3(0x146);if(this[_0x3aa0b3(0xf8)])this[_0x3aa0b3(0xf8)][_0x3aa0b3(0xb5)][_0x3aa0b3(0xfd)]='block';}[_0x2d7cc2(0x9a)](){const _0x2aa1b1=_0x2d7cc2;this[_0x2aa1b1(0x12f)]&&(this[_0x2aa1b1(0x12f)][_0x2aa1b1(0x160)]=![],this[_0x2aa1b1(0x12f)][_0x2aa1b1(0x13e)]());if(this[_0x2aa1b1(0xfa)])this[_0x2aa1b1(0xfa)]['disabled']=![];}[_0x2d7cc2(0xe2)](){const _0x4916b9=_0x2d7cc2;if(this['messageInput'])this[_0x4916b9(0x12f)][_0x4916b9(0x160)]=!![];if(this[_0x4916b9(0xfa)])this[_0x4916b9(0xfa)]['disabled']=!![];}['sendMessage'](){const _0x1c3fde=_0x2d7cc2,_0x7fe847=this['messageInput']?.[_0x1c3fde(0xeb)]['trim']();if(!_0x7fe847||!this[_0x1c3fde(0xf2)])return;const _0x20a427={'type':_0x1c3fde(0x151),'text':_0x7fe847,'timestamp':Date[_0x1c3fde(0x147)]()};try{this['dataChannel'][_0x1c3fde(0xec)](JSON[_0x1c3fde(0xd7)](_0x20a427)),this['addMessage'](_0x7fe847,'sent',_0x20a427[_0x1c3fde(0x140)]),this['messageInput'][_0x1c3fde(0xeb)]='';}catch(_0x43b1c8){console['error']('Q-Chat:\x20Error\x20sending\x20message:',_0x43b1c8),this[_0x1c3fde(0x10e)](_0x1c3fde(0xee));}}[_0x2d7cc2(0x154)](_0x330cf3){const _0x1ff835=_0x2d7cc2;_0x330cf3['type']===_0x1ff835(0x151)&&(this[_0x1ff835(0x14b)](_0x330cf3['text'],'received',_0x330cf3['timestamp']),!this['isPanelOpen']&&(this[_0x1ff835(0x100)]++,this[_0x1ff835(0x99)]()));}[_0x2d7cc2(0x14b)](_0xad36ef,_0x29cb93,_0x2bad74){const _0x275ff7=_0x2d7cc2,_0x6c0d50=document['createElement'](_0x275ff7(0xc0));_0x6c0d50[_0x275ff7(0x132)]='qchat-message\x20'+_0x29cb93;const _0x5630ef=new Date(_0x2bad74)['toLocaleTimeString']([],{'hour':_0x275ff7(0x138),'minute':'2-digit'});_0x6c0d50['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-text\x22>'+this['escapeHtml'](_0xad36ef)+_0x275ff7(0xe8)+(_0x29cb93==='sent'?'âœ“\x20':'')+_0x5630ef+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',this[_0x275ff7(0xc6)]?.[_0x275ff7(0xb0)](_0x6c0d50),this['scrollToBottom']();}['showSystemMessage'](_0x179ab1){const _0x4f3536=_0x2d7cc2,_0x32257e=document[_0x4f3536(0x15d)](_0x4f3536(0xc0));_0x32257e[_0x4f3536(0x132)]='qchat-system-message',_0x32257e['textContent']=_0x179ab1,this['messagesList']?.['appendChild'](_0x32257e),this[_0x4f3536(0x14e)]();}['scrollToBottom'](){const _0x4b2798=_0x2d7cc2;this[_0x4b2798(0xd4)]&&(this['messagesSection']['scrollTop']=this[_0x4b2798(0xd4)]['scrollHeight']);}['updateStatus'](_0x2cca64,_0x202e1e){const _0x2cbc0c=_0x2d7cc2;if(this[_0x2cbc0c(0xe4)]){this['statusEl'][_0x2cbc0c(0x132)]=_0x2cbc0c(0x134)+_0x2cca64;const _0x47da3c=this['statusEl'][_0x2cbc0c(0x116)](_0x2cbc0c(0x12e));if(_0x47da3c)_0x47da3c['textContent']=_0x202e1e;}}['updateBadge'](){const _0x40e1a6=_0x2d7cc2;this[_0x40e1a6(0x145)]&&(this[_0x40e1a6(0x100)]>0x0?(this[_0x40e1a6(0x145)][_0x40e1a6(0xc3)]=this[_0x40e1a6(0x100)]>0x63?_0x40e1a6(0xaa):this['unreadCount'],this[_0x40e1a6(0x145)][_0x40e1a6(0xb5)]['display']='flex'):this['badge'][_0x40e1a6(0xb5)][_0x40e1a6(0xfd)]=_0x40e1a6(0x107));}[_0x2d7cc2(0x102)](){this['unreadCount']=0x0,this['updateBadge']();}['copyRoomCode'](){const _0x75a946=_0x2d7cc2;this['roomId']&&navigator['clipboard'][_0x75a946(0x9b)](this[_0x75a946(0xcd)])[_0x75a946(0xdc)](()=>{const _0x18a858=_0x75a946;this['showSystemMessage'](_0x18a858(0x117));})[_0x75a946(0xf0)](()=>{const _0x410991=_0x75a946,_0x319509=document[_0x410991(0x15d)](_0x410991(0xe0));_0x319509[_0x410991(0xeb)]=this['roomId'],document[_0x410991(0xbc)]['appendChild'](_0x319509),_0x319509['select'](),document['execCommand'](_0x410991(0x120)),document[_0x410991(0xbc)][_0x410991(0xfb)](_0x319509),this['showSystemMessage']('Room\x20code\x20copied!');});}['handleDisconnect'](){const _0xf0b2e7=_0x2d7cc2;this[_0xf0b2e7(0xf2)]=![],this['updateStatus'](_0xf0b2e7(0xa5),_0xf0b2e7(0xa9)),this[_0xf0b2e7(0xe2)]();}[_0x2d7cc2(0xbf)](_0x53f4e1){const _0x2c9a3e=_0x2d7cc2,_0x28acd5=document[_0x2c9a3e(0x15d)](_0x2c9a3e(0xc0));return _0x28acd5[_0x2c9a3e(0xc3)]=_0x53f4e1,_0x28acd5['innerHTML'];}}function _0x4798(_0x58fd90,_0x150b2d){_0x58fd90=_0x58fd90-0x99;const _0x596e68=_0x596e();let _0x47986f=_0x596e68[_0x58fd90];return _0x47986f;}function _0x596e(){const _0x205cdf=['marginTop','roomInfoSection','addMessage','Q-Chat:\x20Sending\x20ICE\x20candidate:','/api/turn-credentials','scrollToBottom','matrix-digit','Q-Chat:\x20WebSocket\x20error:','message','Q-Chat:\x20peer-joined\x20received,\x20isHost:','remove','receiveMessage','1524066kTkZoG','animationDelay','error','digitChangeInterval','copyRoomCode','qchatRoomCodeSection','click','qchatClose','createElement','offer','onmessage','disabled','Connection\x20failed','updateBadge','enableChat','writeText','dataChannel','peerConnection','length','Q-Chat:\x20ICE\x20gathering\x20state:','acos','qchatCopyCode','qchatBadge','matrixSphere','openPanel','disconnected','connectToServer','querySelectorAll','5UBxcLu','Disconnected','99+','room-joined','createBtn','getWebSocketUrl','json','2056952pcOzZi','appendChild','contains','readyState','Q-Chat:\x20Connection\x20state:','Enter','style','Q-Chat:\x20WebSocket\x20closed','type','connecting','qchatMessageInput','innerHTML','setRemoteDescription','body','qChat','host','escapeHtml','div','ABCDEFGHJKLMNPQRSTUVWXYZ23456789','location','textContent','updateStatus','showRoomInfo','messagesList','ðŸ”’\x20Secure\x20connection\x20established\x20(DTLS\x201.3)','closeBtn','Q-Chat:\x20Invalid\x20TURN\x20response,\x20using\x20STUN\x20fallback','Encrypting\x20Neural\x20Pathway...','Q-Chat:\x20Received\x20message:','-7px','roomId','692863rzANHe','-10px','target','sqrt','Waiting\x20for\x20host...','matrixSphereContainer','messagesSection','3387811SgcPSI','block','stringify','translate3d(','onclose','connectSection','addEventListener','then','candidate','classList','handleSignalingMessage','textarea','roomInput','disableChat','bindEvents','statusEl','createOffer','closePanel','iceConnectionState','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','qchatInputSection','getElementById','value','send','setLocalDescription','Failed\x20to\x20send\x20message','Setup\x20failed','catch','data','isConnected','qchatRoomCode','2495530ITkaPr','random','answer','Q-Chat:\x20Data\x20channel\x20closed','inputSection','setupDataChannel','sendBtn','removeChild','4307412KtqfAl','display','Establishing\x20P2P...','Q-Chat:\x20Creating\x20and\x20sending\x20offer...','unreadCount','log','clearUnread','Waiting\x20for\x20peer...','3LVuccS','addIceCandidate','createRoom','none','map','stun:stun1.l.google.com:19302','11079HdmDzb','parse','createMatrixSphere','oniceconnectionstatechange','showSystemMessage','isPanelOpen','reveal','left','424babDrN','qchatCreate','sendMessage','isArray','querySelector','Room\x20code\x20copied!','sin','px,\x20','roomCodeEl','toggleBtn','sdp','handleAnswer','charAt','joinRoom','copy','cos','initElements','50%','Peer\x20connected!\x20Setting\x20up\x20secure\x20channel...','add','hidden','transform','ice-candidate','createAndSendOffer','panel','protocol','qchatStatus','generateRoomId','.status-text','messageInput','Generating\x20Quantum\x20Tunnel...','iceGatheringState','className','toUpperCase','qchat-status\x20','createDataChannel','open','floor','2-digit','showChatUI','matrixSphereStatus','joinBtn','isHost','onopen','focus','copyCodeBtn','timestamp','handleOffer','join-room','startMatrixSphereAnimation','OPEN','badge','flex','now','togglePanel'];_0x596e=function(){return _0x205cdf;};return _0x596e();}document['addEventListener']('DOMContentLoaded',()=>{const _0x22841a=_0x2d7cc2;window[_0x22841a(0xbd)]=new QChat();});