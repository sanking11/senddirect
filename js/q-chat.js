const _0x533267=_0x4d34;(function(_0x30e5c3,_0x5df018){const _0x10af95=_0x4d34,_0x4ae13c=_0x30e5c3();while(!![]){try{const _0x33825d=parseInt(_0x10af95(0x1be))/0x1*(parseInt(_0x10af95(0x175))/0x2)+-parseInt(_0x10af95(0x1b1))/0x3+-parseInt(_0x10af95(0x15f))/0x4+-parseInt(_0x10af95(0x1a2))/0x5+parseInt(_0x10af95(0x197))/0x6*(parseInt(_0x10af95(0x1bd))/0x7)+parseInt(_0x10af95(0x18d))/0x8+parseInt(_0x10af95(0x1d7))/0x9*(parseInt(_0x10af95(0x1df))/0xa);if(_0x33825d===_0x5df018)break;else _0x4ae13c['push'](_0x4ae13c['shift']());}catch(_0xf7b16){_0x4ae13c['push'](_0x4ae13c['shift']());}}}(_0x2464,0x255bc));function _0x4d34(_0x7535a1,_0x38120b){_0x7535a1=_0x7535a1-0x13b;const _0x2464e1=_0x2464();let _0x4d34e7=_0x2464e1[_0x7535a1];return _0x4d34e7;}function _0x2464(){const _0x33072a=['acos','Please\x20enter\x20a\x20valid\x20room\x20code','Q-Chat:\x20Data\x20channel\x20open','hidden','qchatToggle','matrixSphere','value','73701wXSqjY','handleAnswer','Generating\x20Quantum\x20Tunnel...','isPanelOpen','textContent','received','Q-Chat:\x20Error\x20handling\x20offer:','candidate','div','peer-joined','closePanel','opacity','27167CJBoab','728JUNZAR','badge','showSystemMessage','joinBtn','Error:\x20','isHost','peerConnection','onclose','Waiting\x20for\x20peer...','disconnected','appendChild','addIceCandidate','now','connecting','createAnswer','onerror','onicecandidate','random','querySelectorAll','log','toUpperCase','readyState','digitChangeInterval','remove','data','2334888iddxJu','closeBtn','px,\x20','dataChannel','getWebSocketUrl','createRoom','sendMessage','host','10kzCmco','classList','transform','showChatUI','key','flex','Connecting...','Q-Chat:\x20Using\x20TURN\x20servers\x20for\x20NAT\x20traversal','block','join-room','setRemoteDescription','Enter','px)','copyRoomCode','sent','receiveMessage','isConnected','copyCodeBtn','onopen','parse','connectSection','createOffer','roomInfoSection','updateStatus','Q-Chat:\x20Connecting\x20to:','onconnectionstatechange','connected','clearUnread','Peer\x20left','Peer\x20disconnected','fade-out','text','trim','handleDisconnect','qchatStatus','offer','charAt','toggleBtn','messagesList','top','Q-Chat:\x20WebSocket\x20closed','createBtn','send','room-created','Q-Chat:\x20TURN\x20fetch\x20failed,\x20using\x20STUN\x20fallback','qChat','handleOffer','qchat-status\x20','getElementById','translate3d(','setLocalDescription','connectionState','addMessage','location','Peer\x20connected!\x20Setting\x20up\x20secure\x20channel...','timestamp','joinRoom','panel','https:','roomCodeEl','Joined\x20room!\x20Waiting\x20for\x20host...','908896RQzxai','copy','escapeHtml','active','floor','style','inputSection','ice-candidate','showRoomInfo','bindEvents','messagesSection','updateBadge','removeChild','marginTop','body','unreadCount','matrixSphereContainer','qchatCreate','enableChat','disableChat','length','answer','512TPZpZW','click','createElement','cos','disabled','error','-10px','preventDefault','marginLeft','-7px','Encrypting\x20Neural\x20Pathway...','statusEl','Q-Chat:\x20Error\x20handling\x20answer:','qchatConnect','ðŸ”’\x20Secure\x20connection\x20established\x20(DTLS\x201.3)','initializeWebRTC','scrollToBottom','sdp','99+','qchatJoin','add','qchatRoomCode','sin','wss:','664176wvtTQC','isArray','startMatrixSphereAnimation','Q-Chat:\x20Data\x20channel\x20closed','qchatRoomCodeSection','connectToServer','none','qchatWaiting','messageInput','className','138BjvBwj','initElements','Error','/ws','roomId','sendBtn','display','peer-left','type','addEventListener','innerHTML','1066370xeIUur','message','qchatCopyCode','handleSignalingMessage','setupDataChannel','catch','sqrt','span'];_0x2464=function(){return _0x33072a;};return _0x2464();}class QChat{constructor(){const _0x1638ab=_0x4d34;this['ws']=null,this[_0x1638ab(0x1c4)]=null,this['dataChannel']=null,this['roomId']=null,this[_0x1638ab(0x1c3)]=![],this['isConnected']=![],this['unreadCount']=0x0,this[_0x1638ab(0x1b4)]=![],this['initElements'](),this[_0x1638ab(0x168)]();}[_0x533267(0x198)](){const _0x343364=_0x533267;this[_0x343364(0x15b)]=document['getElementById']('qchatPanel'),this['toggleBtn']=document[_0x343364(0x152)](_0x343364(0x1ae)),this[_0x343364(0x1d8)]=document[_0x343364(0x152)]('qchatClose'),this['badge']=document[_0x343364(0x152)]('qchatBadge'),this[_0x343364(0x1f3)]=document[_0x343364(0x152)](_0x343364(0x182)),this[_0x343364(0x1f5)]=document['getElementById']('qchatRoomInfo'),this[_0x343364(0x169)]=document['getElementById']('qchatMessages'),this[_0x343364(0x165)]=document['getElementById']('qchatInputSection'),this[_0x343364(0x180)]=document[_0x343364(0x152)](_0x343364(0x144)),this[_0x343364(0x15d)]=document['getElementById'](_0x343364(0x18a)),this[_0x343364(0x14b)]=document[_0x343364(0x152)](_0x343364(0x170)),this[_0x343364(0x1c1)]=document['getElementById'](_0x343364(0x188)),this[_0x343364(0x1f0)]=document['getElementById'](_0x343364(0x1a4)),this['sendBtn']=document['getElementById']('qchatSendBtn'),this['roomInput']=document['getElementById']('qchatRoomInput'),this[_0x343364(0x195)]=document[_0x343364(0x152)]('qchatMessageInput'),this['messagesList']=document['getElementById']('qchatMessagesList');}['bindEvents'](){const _0x5774ff=_0x533267;this['toggleBtn']?.[_0x5774ff(0x1a0)]('click',()=>this['togglePanel']()),this['closeBtn']?.['addEventListener'](_0x5774ff(0x176),()=>this[_0x5774ff(0x1bb)]()),this[_0x5774ff(0x14b)]?.['addEventListener'](_0x5774ff(0x176),()=>this[_0x5774ff(0x1dc)]()),this['joinBtn']?.['addEventListener'](_0x5774ff(0x176),()=>this[_0x5774ff(0x15a)]()),this['roomInput']?.[_0x5774ff(0x1a0)]('keypress',_0x4429fe=>{const _0x5af528=_0x5774ff;if(_0x4429fe['key']==='Enter')this[_0x5af528(0x15a)]();}),this[_0x5774ff(0x1f0)]?.['addEventListener'](_0x5774ff(0x176),()=>this[_0x5774ff(0x1ec)]()),this['sendBtn']?.['addEventListener']('click',()=>this['sendMessage']()),this[_0x5774ff(0x195)]?.[_0x5774ff(0x1a0)]('keypress',_0x5dd1cb=>{const _0x2ac783=_0x5774ff;_0x5dd1cb[_0x2ac783(0x1e3)]===_0x2ac783(0x1ea)&&!_0x5dd1cb['shiftKey']&&(_0x5dd1cb[_0x2ac783(0x17c)](),this[_0x2ac783(0x1dd)]());}),document[_0x5774ff(0x1a0)](_0x5774ff(0x176),_0x532d72=>{const _0x3d99c7=_0x5774ff;this[_0x3d99c7(0x1b4)]&&!this['panel']?.['contains'](_0x532d72['target'])&&!this['toggleBtn']?.['contains'](_0x532d72['target'])&&this[_0x3d99c7(0x1bb)]();});}['togglePanel'](){const _0x399fcd=_0x533267;this[_0x399fcd(0x1b4)]?this['closePanel']():this['openPanel']();}['openPanel'](){const _0x5af542=_0x533267;this[_0x5af542(0x15b)]?.[_0x5af542(0x1e0)]['add']('open'),this[_0x5af542(0x147)]?.[_0x5af542(0x1e0)][_0x5af542(0x189)](_0x5af542(0x162)),this['isPanelOpen']=!![],this[_0x5af542(0x13d)]();}[_0x533267(0x1bb)](){const _0x1f7723=_0x533267;this[_0x1f7723(0x15b)]?.['classList']['remove']('open'),this['toggleBtn']?.['classList'][_0x1f7723(0x1d5)]('active'),this[_0x1f7723(0x1b4)]=![];}['generateRoomId'](){const _0x312f45=_0x533267,_0x2b61d9='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';let _0x55b3df='';for(let _0xb3e2d3=0x0;_0xb3e2d3<0x6;_0xb3e2d3++){_0x55b3df+=_0x2b61d9[_0x312f45(0x146)](Math['floor'](Math['random']()*_0x2b61d9[_0x312f45(0x173)]));}return _0x55b3df;}[_0x533267(0x1db)](){const _0x1c6bf7=_0x533267,_0x2c2944=window[_0x1c6bf7(0x157)]['protocol']===_0x1c6bf7(0x15c)?_0x1c6bf7(0x18c):'ws:';return _0x2c2944+'//'+window['location'][_0x1c6bf7(0x1de)]+_0x1c6bf7(0x19a);}async['connectToServer'](){return new Promise((_0x3a474e,_0x928414)=>{const _0x3ac8aa=_0x4d34,_0x1877fd=this['getWebSocketUrl']();console['log'](_0x3ac8aa(0x1f7),_0x1877fd),this['ws']=new WebSocket(_0x1877fd),this['ws'][_0x3ac8aa(0x1f1)]=()=>{console['log']('Q-Chat:\x20WebSocket\x20connected'),_0x3a474e();},this['ws'][_0x3ac8aa(0x1cd)]=_0xf58572=>{const _0x31ac99=_0x3ac8aa;console[_0x31ac99(0x17a)]('Q-Chat:\x20WebSocket\x20error:',_0xf58572),_0x928414(_0xf58572);},this['ws']['onclose']=()=>{const _0x5263c1=_0x3ac8aa;console[_0x5263c1(0x1d1)](_0x5263c1(0x14a)),this['handleDisconnect']();},this['ws']['onmessage']=_0xfc84f3=>{const _0x4e807a=_0x3ac8aa,_0x256abc=JSON[_0x4e807a(0x1f2)](_0xfc84f3[_0x4e807a(0x1d6)]);this[_0x4e807a(0x1a5)](_0x256abc);};});}['send'](_0xe20e7){const _0x5bd330=_0x533267;this['ws']&&this['ws'][_0x5bd330(0x1d3)]===WebSocket['OPEN']&&this['ws']['send'](JSON['stringify'](_0xe20e7));}async['createRoom'](){const _0x3e9b2a=_0x533267;this['isHost']=!![],this[_0x3e9b2a(0x19b)]=this['generateRoomId'](),this[_0x3e9b2a(0x1f6)](_0x3e9b2a(0x1cb),_0x3e9b2a(0x1e5));try{await this[_0x3e9b2a(0x192)](),this[_0x3e9b2a(0x14c)]({'type':'create-room','roomId':this[_0x3e9b2a(0x19b)]});}catch(_0x5de335){this[_0x3e9b2a(0x1c0)]('Failed\x20to\x20connect\x20to\x20server'),this['updateStatus']('disconnected','Connection\x20failed');}}async['joinRoom'](){const _0x4ecbd8=_0x533267,_0x135dc3=this['roomInput']?.[_0x4ecbd8(0x1b0)]['trim']()[_0x4ecbd8(0x1d2)]();if(!_0x135dc3||_0x135dc3[_0x4ecbd8(0x173)]<0x4){this[_0x4ecbd8(0x1c0)](_0x4ecbd8(0x1ab));return;}this['isHost']=![],this[_0x4ecbd8(0x19b)]=_0x135dc3,this[_0x4ecbd8(0x1f6)]('connecting','Joining...');try{await this[_0x4ecbd8(0x192)](),this[_0x4ecbd8(0x14c)]({'type':_0x4ecbd8(0x1e8),'roomId':this['roomId']});}catch(_0x14cf83){this['showSystemMessage']('Failed\x20to\x20connect\x20to\x20server'),this['updateStatus'](_0x4ecbd8(0x1c7),'Connection\x20failed');}}async[_0x533267(0x1a5)](_0x1c859b){const _0x5aceb8=_0x533267;switch(_0x1c859b['type']){case _0x5aceb8(0x14d):this['showRoomInfo'](),this['updateStatus'](_0x5aceb8(0x1cb),_0x5aceb8(0x1c6));break;case'room-joined':this[_0x5aceb8(0x1c0)](_0x5aceb8(0x15e)),this[_0x5aceb8(0x1f6)](_0x5aceb8(0x1cb),'Waiting\x20for\x20host...');break;case _0x5aceb8(0x1ba):this[_0x5aceb8(0x1c0)](_0x5aceb8(0x158)),this['updateStatus']('connecting','Establishing\x20P2P...'),await this['initializeWebRTC']();this[_0x5aceb8(0x1c3)]&&await this['createAndSendOffer']();break;case _0x5aceb8(0x19e):this['showSystemMessage'](_0x5aceb8(0x13f)),this['updateStatus']('disconnected',_0x5aceb8(0x13e)),this[_0x5aceb8(0x172)]();break;case'offer':await this['handleOffer'](_0x1c859b);break;case _0x5aceb8(0x174):await this[_0x5aceb8(0x1b2)](_0x1c859b);break;case _0x5aceb8(0x166):await this['handleIceCandidate'](_0x1c859b);break;case'error':this[_0x5aceb8(0x1c0)](_0x5aceb8(0x1c2)+_0x1c859b['message']),this['updateStatus'](_0x5aceb8(0x1c7),_0x5aceb8(0x199)),console[_0x5aceb8(0x17a)]('Q-Chat\x20Server\x20Error:',_0x1c859b[_0x5aceb8(0x1a3)]);break;}}async[_0x533267(0x184)](){const _0xb1c8f2=_0x533267,_0x583cf1=[{'urls':'stun:stun.l.google.com:19302'},{'urls':'stun:stun1.l.google.com:19302'}];let _0x2f987c=_0x583cf1;try{const _0x29c44f=await fetch('/api/turn-credentials'),_0x255d84=await _0x29c44f['json']();Array[_0xb1c8f2(0x18e)](_0x255d84)&&_0x255d84['length']>0x0?(_0x2f987c=_0x255d84,console[_0xb1c8f2(0x1d1)](_0xb1c8f2(0x1e6))):console['log']('Q-Chat:\x20Invalid\x20TURN\x20response,\x20using\x20STUN\x20fallback');}catch(_0x49c855){console[_0xb1c8f2(0x1d1)](_0xb1c8f2(0x14e));}const _0x44e368={'iceServers':_0x2f987c};this['peerConnection']=new RTCPeerConnection(_0x44e368),this[_0xb1c8f2(0x1c4)][_0xb1c8f2(0x1ce)]=_0x450bf8=>{const _0x1a81e6=_0xb1c8f2;_0x450bf8[_0x1a81e6(0x1b8)]&&this[_0x1a81e6(0x14c)]({'type':_0x1a81e6(0x166),'roomId':this[_0x1a81e6(0x19b)],'candidate':_0x450bf8['candidate']});},this['peerConnection'][_0xb1c8f2(0x13b)]=()=>{const _0x570f8d=_0xb1c8f2,_0x414cf1=this[_0x570f8d(0x1c4)][_0x570f8d(0x155)];console[_0x570f8d(0x1d1)]('Q-Chat:\x20Connection\x20state:',_0x414cf1);if(_0x414cf1===_0x570f8d(0x13c))this['updateStatus']('connected','Secure\x20P2P'),this[_0x570f8d(0x1c0)](_0x570f8d(0x183));else(_0x414cf1===_0x570f8d(0x1c7)||_0x414cf1==='failed')&&(this[_0x570f8d(0x1f6)]('disconnected','Disconnected'),this['disableChat']());},this['isHost']?(this['dataChannel']=this[_0xb1c8f2(0x1c4)]['createDataChannel']('qchat',{'ordered':!![]}),this[_0xb1c8f2(0x1a6)]()):this[_0xb1c8f2(0x1c4)]['ondatachannel']=_0x5ef6d8=>{this['dataChannel']=_0x5ef6d8['channel'],this['setupDataChannel']();};}[_0x533267(0x1a6)](){const _0x2191fd=_0x533267;this[_0x2191fd(0x1da)][_0x2191fd(0x1f1)]=()=>{const _0x497473=_0x2191fd;console[_0x497473(0x1d1)](_0x497473(0x1ac)),this[_0x497473(0x1ef)]=!![],this[_0x497473(0x171)](),this[_0x497473(0x1e2)]();},this[_0x2191fd(0x1da)][_0x2191fd(0x1c5)]=()=>{const _0x21c9d3=_0x2191fd;console['log'](_0x21c9d3(0x190)),this['isConnected']=![],this[_0x21c9d3(0x172)]();},this[_0x2191fd(0x1da)]['onmessage']=_0x4b9330=>{const _0xf2f400=_0x2191fd,_0xf6d58b=JSON['parse'](_0x4b9330[_0xf2f400(0x1d6)]);this[_0xf2f400(0x1ee)](_0xf6d58b);};}async['createAndSendOffer'](){const _0x26bcd1=_0x533267;try{const _0x2f1d5a=await this['peerConnection'][_0x26bcd1(0x1f4)]();await this['peerConnection'][_0x26bcd1(0x154)](_0x2f1d5a),this['send']({'type':_0x26bcd1(0x145),'roomId':this[_0x26bcd1(0x19b)],'sdp':_0x2f1d5a[_0x26bcd1(0x186)]});}catch(_0x1f8312){console['error']('Q-Chat:\x20Error\x20creating\x20offer:',_0x1f8312);}}async[_0x533267(0x150)](_0x466967){const _0x5b4096=_0x533267;try{await this['initializeWebRTC'](),await this[_0x5b4096(0x1c4)]['setRemoteDescription'](new RTCSessionDescription({'type':_0x5b4096(0x145),'sdp':_0x466967['sdp']}));const _0xc75299=await this['peerConnection'][_0x5b4096(0x1cc)]();await this['peerConnection'][_0x5b4096(0x154)](_0xc75299),this[_0x5b4096(0x14c)]({'type':'answer','roomId':this['roomId'],'sdp':_0xc75299['sdp']});}catch(_0x3410e7){console['error'](_0x5b4096(0x1b7),_0x3410e7);}}async['handleAnswer'](_0x19b0d0){const _0x547c0b=_0x533267;try{await this['peerConnection'][_0x547c0b(0x1e9)](new RTCSessionDescription({'type':_0x547c0b(0x174),'sdp':_0x19b0d0[_0x547c0b(0x186)]}));}catch(_0x12dfb5){console[_0x547c0b(0x17a)](_0x547c0b(0x181),_0x12dfb5);}}async['handleIceCandidate'](_0x419934){const _0x1d28f7=_0x533267;try{_0x419934['candidate']&&await this['peerConnection'][_0x1d28f7(0x1c9)](new RTCIceCandidate(_0x419934['candidate']));}catch(_0x38f594){console[_0x1d28f7(0x17a)]('Q-Chat:\x20Error\x20handling\x20ICE\x20candidate:',_0x38f594);}}[_0x533267(0x167)](){const _0x4d8677=_0x533267;if(this['connectSection'])this['connectSection'][_0x4d8677(0x164)]['display']='none';if(this['roomInfoSection'])this['roomInfoSection'][_0x4d8677(0x164)][_0x4d8677(0x19d)]=_0x4d8677(0x1e7);this[_0x4d8677(0x18f)]();}['startMatrixSphereAnimation'](){const _0x5eb485=_0x533267,_0x5cc43f=document['getElementById'](_0x5eb485(0x16f)),_0x3a2808=document[_0x5eb485(0x152)](_0x5eb485(0x1af)),_0x145954=document[_0x5eb485(0x152)]('matrixSphereStatus'),_0x2883a3=document['getElementById'](_0x5eb485(0x191)),_0x46488e=document[_0x5eb485(0x152)](_0x5eb485(0x194));if(!_0x3a2808||!_0x5cc43f){if(this[_0x5eb485(0x15d)])this['roomCodeEl']['textContent']=this['roomId'];return;}this['createMatrixSphere'](_0x3a2808);const _0x492444=[_0x5eb485(0x1b3),_0x5eb485(0x17f),'Establishing\x20Secure\x20Link...','Finalizing\x20Quantum\x20Code...'];let _0x52c9b8=0x0;const _0x3985e7=setInterval(()=>{_0x52c9b8++,_0x52c9b8<_0x492444['length']&&_0x145954&&(_0x145954['textContent']=_0x492444[_0x52c9b8]);},0x258);setTimeout(()=>{const _0x1ea632=_0x5eb485;clearInterval(_0x3985e7),_0x3a2808['classList']['add'](_0x1ea632(0x140));if(_0x145954)_0x145954['style']['display']=_0x1ea632(0x193);setTimeout(()=>{const _0x1be770=_0x1ea632;_0x5cc43f['style']['display']=_0x1be770(0x193);if(this[_0x1be770(0x15d)])this['roomCodeEl'][_0x1be770(0x1b5)]=this['roomId'];_0x2883a3&&(_0x2883a3[_0x1be770(0x1e0)]['remove']('hidden'),_0x2883a3['classList'][_0x1be770(0x189)]('reveal')),_0x46488e&&_0x46488e[_0x1be770(0x1e0)]['remove'](_0x1be770(0x1ad));},0x320);},0x9c4);}['createMatrixSphere'](_0x6d2824){const _0x215d3c=_0x533267;_0x6d2824[_0x215d3c(0x1a1)]='';const _0x2ccc79=0x78,_0x718bad=0x3c;for(let _0x87a8a6=0x0;_0x87a8a6<_0x2ccc79;_0x87a8a6++){const _0x28a22b=document[_0x215d3c(0x177)](_0x215d3c(0x1a9));_0x28a22b[_0x215d3c(0x196)]='matrix-digit',_0x28a22b['textContent']=Math[_0x215d3c(0x163)](Math['random']()*0xa);const _0x384700=Math[_0x215d3c(0x1aa)](0x1-0x2*(_0x87a8a6+0.5)/_0x2ccc79),_0x3f7e17=Math['PI']*(0x1+Math[_0x215d3c(0x1a8)](0x5))*_0x87a8a6,_0x30c3a1=_0x718bad*Math[_0x215d3c(0x18b)](_0x384700)*Math[_0x215d3c(0x178)](_0x3f7e17),_0x5bdaf9=_0x718bad*Math['sin'](_0x384700)*Math['sin'](_0x3f7e17),_0x24621d=_0x718bad*Math[_0x215d3c(0x178)](_0x384700);_0x28a22b['style'][_0x215d3c(0x1e1)]=_0x215d3c(0x153)+_0x30c3a1+'px,\x20'+_0x5bdaf9+_0x215d3c(0x1d9)+_0x24621d+_0x215d3c(0x1eb),_0x28a22b[_0x215d3c(0x164)]['left']='50%',_0x28a22b['style'][_0x215d3c(0x149)]='50%',_0x28a22b[_0x215d3c(0x164)][_0x215d3c(0x17d)]=_0x215d3c(0x17e),_0x28a22b['style'][_0x215d3c(0x16c)]=_0x215d3c(0x17b),_0x28a22b['style']['animationDelay']=Math['random']()*0.5+'s';const _0x225685=0.4+(_0x24621d+_0x718bad)/(0x2*_0x718bad)*0.6;_0x28a22b[_0x215d3c(0x164)][_0x215d3c(0x1bc)]=_0x225685,_0x6d2824['appendChild'](_0x28a22b);}this['digitChangeInterval']=setInterval(()=>{const _0x200818=_0x215d3c,_0x3fa0f2=_0x6d2824[_0x200818(0x1d0)]('.matrix-digit'),_0x6c2761=_0x3fa0f2[Math[_0x200818(0x163)](Math['random']()*_0x3fa0f2[_0x200818(0x173)])];_0x6c2761&&(_0x6c2761['textContent']=Math['floor'](Math[_0x200818(0x1cf)]()*0xa));},0x32),setTimeout(()=>{const _0x4e9efe=_0x215d3c;this[_0x4e9efe(0x1d4)]&&clearInterval(this['digitChangeInterval']);},0xdac);}[_0x533267(0x1e2)](){const _0x5b320a=_0x533267;if(this['connectSection'])this[_0x5b320a(0x1f3)]['style'][_0x5b320a(0x19d)]=_0x5b320a(0x193);if(this['roomInfoSection'])this[_0x5b320a(0x1f5)][_0x5b320a(0x164)]['display']='none';if(this['messagesSection'])this[_0x5b320a(0x169)]['style'][_0x5b320a(0x19d)]='flex';if(this['inputSection'])this['inputSection'][_0x5b320a(0x164)]['display']=_0x5b320a(0x1e7);}[_0x533267(0x171)](){const _0x22a830=_0x533267;this['messageInput']&&(this['messageInput'][_0x22a830(0x179)]=![],this[_0x22a830(0x195)]['focus']());if(this['sendBtn'])this[_0x22a830(0x19c)]['disabled']=![];}['disableChat'](){const _0x37bfc6=_0x533267;if(this['messageInput'])this[_0x37bfc6(0x195)][_0x37bfc6(0x179)]=!![];if(this[_0x37bfc6(0x19c)])this[_0x37bfc6(0x19c)][_0x37bfc6(0x179)]=!![];}['sendMessage'](){const _0x5f5364=_0x533267,_0x57c3c7=this['messageInput']?.[_0x5f5364(0x1b0)][_0x5f5364(0x142)]();if(!_0x57c3c7||!this[_0x5f5364(0x1ef)])return;const _0x294b72={'type':_0x5f5364(0x1a3),'text':_0x57c3c7,'timestamp':Date[_0x5f5364(0x1ca)]()};try{this[_0x5f5364(0x1da)]['send'](JSON['stringify'](_0x294b72)),this[_0x5f5364(0x156)](_0x57c3c7,'sent',_0x294b72['timestamp']),this[_0x5f5364(0x195)][_0x5f5364(0x1b0)]='';}catch(_0x14d8c2){console['error']('Q-Chat:\x20Error\x20sending\x20message:',_0x14d8c2),this['showSystemMessage']('Failed\x20to\x20send\x20message');}}['receiveMessage'](_0xa15186){const _0x1553b4=_0x533267;_0xa15186[_0x1553b4(0x19f)]===_0x1553b4(0x1a3)&&(this['addMessage'](_0xa15186[_0x1553b4(0x141)],_0x1553b4(0x1b6),_0xa15186[_0x1553b4(0x159)]),!this[_0x1553b4(0x1b4)]&&(this[_0x1553b4(0x16e)]++,this[_0x1553b4(0x16a)]()));}['addMessage'](_0x1ea672,_0x2e171e,_0x3cfb5b){const _0x3c9711=_0x533267,_0x19ebd2=document[_0x3c9711(0x177)](_0x3c9711(0x1b9));_0x19ebd2['className']='qchat-message\x20'+_0x2e171e;const _0x147fd5=new Date(_0x3cfb5b)['toLocaleTimeString']([],{'hour':'2-digit','minute':'2-digit'});_0x19ebd2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-text\x22>'+this[_0x3c9711(0x161)](_0x1ea672)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2e171e===_0x3c9711(0x1ed)?'âœ“\x20':'')+_0x147fd5+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',this[_0x3c9711(0x148)]?.[_0x3c9711(0x1c8)](_0x19ebd2),this[_0x3c9711(0x185)]();}['showSystemMessage'](_0x4c4142){const _0x1dc967=_0x533267,_0x52390b=document[_0x1dc967(0x177)](_0x1dc967(0x1b9));_0x52390b['className']='qchat-system-message',_0x52390b['textContent']=_0x4c4142,this['messagesList']?.[_0x1dc967(0x1c8)](_0x52390b),this['scrollToBottom']();}['scrollToBottom'](){const _0x5a84be=_0x533267;this['messagesSection']&&(this['messagesSection']['scrollTop']=this[_0x5a84be(0x169)]['scrollHeight']);}[_0x533267(0x1f6)](_0x5ea3e0,_0x203972){const _0x6ffb8c=_0x533267;if(this[_0x6ffb8c(0x180)]){this[_0x6ffb8c(0x180)]['className']=_0x6ffb8c(0x151)+_0x5ea3e0;const _0x2df73d=this['statusEl']['querySelector']('.status-text');if(_0x2df73d)_0x2df73d['textContent']=_0x203972;}}['updateBadge'](){const _0x3124ca=_0x533267;this[_0x3124ca(0x1bf)]&&(this['unreadCount']>0x0?(this['badge']['textContent']=this[_0x3124ca(0x16e)]>0x63?_0x3124ca(0x187):this['unreadCount'],this[_0x3124ca(0x1bf)]['style'][_0x3124ca(0x19d)]=_0x3124ca(0x1e4)):this[_0x3124ca(0x1bf)][_0x3124ca(0x164)]['display']='none');}[_0x533267(0x13d)](){this['unreadCount']=0x0,this['updateBadge']();}['copyRoomCode'](){const _0x433434=_0x533267;this[_0x433434(0x19b)]&&navigator['clipboard']['writeText'](this['roomId'])['then'](()=>{const _0x1b7cfd=_0x433434;this[_0x1b7cfd(0x1c0)]('Room\x20code\x20copied!');})[_0x433434(0x1a7)](()=>{const _0x4157b2=_0x433434,_0x4767d6=document[_0x4157b2(0x177)]('textarea');_0x4767d6[_0x4157b2(0x1b0)]=this[_0x4157b2(0x19b)],document[_0x4157b2(0x16d)][_0x4157b2(0x1c8)](_0x4767d6),_0x4767d6['select'](),document['execCommand'](_0x4157b2(0x160)),document['body'][_0x4157b2(0x16b)](_0x4767d6),this[_0x4157b2(0x1c0)]('Room\x20code\x20copied!');});}[_0x533267(0x143)](){const _0x45f013=_0x533267;this['isConnected']=![],this[_0x45f013(0x1f6)]('disconnected','Disconnected'),this['disableChat']();}[_0x533267(0x161)](_0x2b804d){const _0x2c2ed5=_0x533267,_0x207ffc=document['createElement'](_0x2c2ed5(0x1b9));return _0x207ffc[_0x2c2ed5(0x1b5)]=_0x2b804d,_0x207ffc['innerHTML'];}}document[_0x533267(0x1a0)]('DOMContentLoaded',()=>{const _0x3342d3=_0x533267;window[_0x3342d3(0x14f)]=new QChat();});