const _0x59090b=_0x31f3;function _0x382f(){const _0x57f890=['onerror','handleSignalingMessage','Failed\x20to\x20send\x20message','OPEN','handleRetryRelay','classList','peerConnection','span','marginTop','removeChild','getElementById','key','escapeHtml','className','Peer\x20disconnected','scrollHeight','then','sdp','Generating\x20Quantum\x20Tunnel...','Connection\x20failed','createBtn','random','getWebSocketUrl','qchatMessages','parse','99+','matrixSphere','retryWithRelayMode','click','213966luJayU','room-joined','innerHTML','Q-Chat:\x20WebSocket\x20error:','acos','Establishing\x20P2P...','matrix-digit','sendMessage','setupDataChannel','bindEvents','dataChannel','showSystemMessage','roomCodeEl','message','qchatStatus','50AooXVd','handleDisconnect','toLocaleTimeString','connectToServer','log','joinRoom','handleAnswer','Secure\x20P2P','inputSection','addIceCandidate','querySelector','offer','Q-Chat:\x20Connection\x20state:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-text\x22>','updateBadge','scrollTop','qchatBadge','open','location','Encrypting\x20Neural\x20Pathway...','onopen','target','initElements','qChat','Q-Chat:\x20Connection\x20timeout\x20-\x20may\x20be\x20behind\x20VPN','sqrt','onclose','updateStatus','Waiting\x20for\x20host...','px,\x20','246090htPslN','failed','startMatrixSphereAnimation','483020hIpBvI','disableChat','40otXccm','execCommand','close','300174JERqsi','qchatMessageInput','appendChild','disabled','qchat','DOMContentLoaded','setLocalDescription','ws:','maxConnectionAttempts','roomInfoSection','translate3d(','isConnected','50%','addEventListener','textarea','Q-Chat:\x20WebSocket\x20connected','closePanel',',\x20forceRelay:\x20','1311079HUiPZj','shiftKey','Establishing\x20Secure\x20Link...','hidden','url','qchatJoin','roomInput','display','div','active','openPanel','Q-Chat:\x20Invalid\x20TURN\x20response,\x20using\x20STUN\x20fallback','toUpperCase','type','digitChangeInterval','Q-Chat:\x20Connecting\x20to:','room-created','.matrix-digit','connectionAttempt','messagesList','length','json','iceConnectionState','onicecandidate','connectionTimeout','forceRelayMode','stringify','roomId','send','panel','Peer\x20requested\x20VPN-compatible\x20mode...','Setup\x20failed','writeText','remove','qchatRoomCodeSection','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Q-Chat:\x20WebRTC\x20initialized,\x20peerConnection:','Q-Chat:\x20peer-joined\x20received,\x20isHost:','retry-relay','marginLeft','none','now','connected','Enter','messageInput','host','clearUnread','style','qchat-status\x20','569305RsjDdu','contains','textContent','2-digit','/api/turn-credentials','animationDelay','qchatWaiting','12CDTxVP','copy','matrixSphereContainer','sendBtn','copyCodeBtn','sin','Q-Chat:\x20ICE\x20gathering\x20state:','wss:','setRemoteDescription','ondatachannel','onmessage','/ws','Q-Chat:\x20Data\x20channel\x20closed','text','unreadCount','Q-Chat:\x20WebSocket\x20closed','ABCDEFGHJKLMNPQRSTUVWXYZ23456789','substring','add','candidate','qchatMessagesList','enableChat','badge','statusEl','flex','connectSection','messagesSection','Disconnected','Q-Chat:\x20TURN\x20fetch\x20failed,\x20using\x20STUN\x20fallback','Peer\x20connected!\x20Setting\x20up\x20secure\x20channel...','initializeWebRTC','Q-Chat:\x20Error\x20handling\x20answer:','closeBtn','iceGatheringState','togglePanel','disconnected','ðŸ”’\x20Secure\x20connection\x20established\x20via\x20relay\x20(VPN\x20mode)','createElement','handleIceCandidate','isPanelOpen','6DmaFyP','trim','Q-Chat:\x20Connection\x20failed,\x20retrying\x20with\x20relay\x20mode','timestamp','error','Q-Chat:\x20Error\x20creating\x20offer:','createAndSendOffer','Q-Chat:\x20Retrying\x20with\x20relay-only\x20mode\x20for\x20VPN\x20compatibility','forEach','answer','sent','reveal','1656810AKzOVS','urls','value','fade-out','Peer\x20left','addMessage','qchat-system-message','querySelectorAll','Q-Chat:\x20Sending\x20ICE\x20candidate:','connectionState','connecting'];_0x382f=function(){return _0x57f890;};return _0x382f();}function _0x31f3(_0x4c5c84,_0x5721eb){_0x4c5c84=_0x4c5c84-0x1ce;const _0x382f31=_0x382f();let _0x31f338=_0x382f31[_0x4c5c84];return _0x31f338;}(function(_0x3b09df,_0x4c32cd){const _0x1d6e5a=_0x31f3,_0x506b66=_0x3b09df();while(!![]){try{const _0x438540=parseInt(_0x1d6e5a(0x29e))/0x1+-parseInt(_0x1d6e5a(0x2a1))/0x2+-parseInt(_0x1d6e5a(0x271))/0x3*(-parseInt(_0x1d6e5a(0x215))/0x4)+parseInt(_0x1d6e5a(0x20e))/0x5*(parseInt(_0x1d6e5a(0x23d))/0x6)+parseInt(_0x1d6e5a(0x2a6))/0x7*(parseInt(_0x1d6e5a(0x2a3))/0x8)+parseInt(_0x1d6e5a(0x249))/0x9+parseInt(_0x1d6e5a(0x280))/0xa*(-parseInt(_0x1d6e5a(0x1dd))/0xb);if(_0x438540===_0x4c32cd)break;else _0x506b66['push'](_0x506b66['shift']());}catch(_0x5d7a51){_0x506b66['push'](_0x506b66['shift']());}}}(_0x382f,0x20f32));class QChat{constructor(){const _0x402611=_0x31f3;this['ws']=null,this['peerConnection']=null,this[_0x402611(0x27b)]=null,this['roomId']=null,this['isHost']=![],this[_0x402611(0x1d6)]=![],this[_0x402611(0x223)]=0x0,this['isPanelOpen']=![],this['forceRelayMode']=![],this['connectionAttempt']=0x0,this['cachedIceServers']=null,this[_0x402611(0x1f5)]=null,this[_0x402611(0x1d3)]=0x2,this[_0x402611(0x296)](),this['bindEvents']();}['initElements'](){const _0x19d41b=_0x31f3;this[_0x19d41b(0x1fa)]=document['getElementById']('qchatPanel'),this['toggleBtn']=document[_0x19d41b(0x25e)]('qchatToggle'),this['closeBtn']=document['getElementById']('qchatClose'),this[_0x19d41b(0x22b)]=document[_0x19d41b(0x25e)](_0x19d41b(0x290)),this[_0x19d41b(0x22e)]=document[_0x19d41b(0x25e)]('qchatConnect'),this[_0x19d41b(0x1d4)]=document[_0x19d41b(0x25e)]('qchatRoomInfo'),this[_0x19d41b(0x22f)]=document['getElementById'](_0x19d41b(0x26b)),this[_0x19d41b(0x288)]=document[_0x19d41b(0x25e)]('qchatInputSection'),this[_0x19d41b(0x22c)]=document[_0x19d41b(0x25e)](_0x19d41b(0x27f)),this['roomCodeEl']=document['getElementById']('qchatRoomCode'),this[_0x19d41b(0x268)]=document[_0x19d41b(0x25e)]('qchatCreate'),this['joinBtn']=document[_0x19d41b(0x25e)](_0x19d41b(0x1e2)),this[_0x19d41b(0x219)]=document[_0x19d41b(0x25e)]('qchatCopyCode'),this[_0x19d41b(0x218)]=document['getElementById']('qchatSendBtn'),this['roomInput']=document['getElementById']('qchatRoomInput'),this[_0x19d41b(0x209)]=document[_0x19d41b(0x25e)](_0x19d41b(0x2a7)),this[_0x19d41b(0x1f0)]=document[_0x19d41b(0x25e)](_0x19d41b(0x229));}[_0x59090b(0x27a)](){const _0x4d4284=_0x59090b;this['toggleBtn']?.[_0x4d4284(0x1d8)](_0x4d4284(0x270),()=>this[_0x4d4284(0x237)]()),this[_0x4d4284(0x235)]?.[_0x4d4284(0x1d8)]('click',()=>this['closePanel']()),this['createBtn']?.['addEventListener']('click',()=>this['createRoom']()),this['joinBtn']?.['addEventListener']('click',()=>this[_0x4d4284(0x285)]()),this[_0x4d4284(0x1e3)]?.['addEventListener']('keypress',_0x1364c6=>{const _0x41a6be=_0x4d4284;if(_0x1364c6[_0x41a6be(0x25f)]===_0x41a6be(0x208))this['joinRoom']();}),this[_0x4d4284(0x219)]?.[_0x4d4284(0x1d8)](_0x4d4284(0x270),()=>this['copyRoomCode']()),this[_0x4d4284(0x218)]?.['addEventListener']('click',()=>this['sendMessage']()),this['messageInput']?.['addEventListener']('keypress',_0x2a79ee=>{const _0x533886=_0x4d4284;_0x2a79ee[_0x533886(0x25f)]==='Enter'&&!_0x2a79ee[_0x533886(0x1de)]&&(_0x2a79ee['preventDefault'](),this[_0x533886(0x278)]());}),document[_0x4d4284(0x1d8)](_0x4d4284(0x270),_0x8a4b15=>{const _0x1f2b53=_0x4d4284;this['isPanelOpen']&&!this[_0x1f2b53(0x1fa)]?.[_0x1f2b53(0x20f)](_0x8a4b15[_0x1f2b53(0x295)])&&!this['toggleBtn']?.['contains'](_0x8a4b15[_0x1f2b53(0x295)])&&this['closePanel']();});}[_0x59090b(0x237)](){const _0x148532=_0x59090b;this['isPanelOpen']?this[_0x148532(0x1db)]():this[_0x148532(0x1e7)]();}[_0x59090b(0x1e7)](){const _0x5a71e9=_0x59090b;this['panel']?.[_0x5a71e9(0x259)][_0x5a71e9(0x227)](_0x5a71e9(0x291)),this['toggleBtn']?.['classList'][_0x5a71e9(0x227)](_0x5a71e9(0x1e6)),this[_0x5a71e9(0x23c)]=!![],this['clearUnread']();}['closePanel'](){const _0xc5597c=_0x59090b;this['panel']?.['classList']['remove'](_0xc5597c(0x291)),this['toggleBtn']?.[_0xc5597c(0x259)][_0xc5597c(0x1fe)]('active'),this['isPanelOpen']=![];}['generateRoomId'](){const _0x548539=_0x59090b,_0xf8750b=_0x548539(0x225);let _0x123e9f='';for(let _0x5e7190=0x0;_0x5e7190<0x6;_0x5e7190++){_0x123e9f+=_0xf8750b['charAt'](Math['floor'](Math['random']()*_0xf8750b['length']));}return _0x123e9f;}[_0x59090b(0x26a)](){const _0x1950c0=_0x59090b,_0x54708d=window['location']['protocol']==='https:'?_0x1950c0(0x21c):_0x1950c0(0x1d2);return _0x54708d+'//'+window[_0x1950c0(0x292)][_0x1950c0(0x20a)]+_0x1950c0(0x220);}async[_0x59090b(0x283)](){return new Promise((_0xf13315,_0x1b1699)=>{const _0x4cfb71=_0x31f3,_0x1871af=this['getWebSocketUrl']();console[_0x4cfb71(0x284)](_0x4cfb71(0x1ec),_0x1871af),this['ws']=new WebSocket(_0x1871af),this['ws'][_0x4cfb71(0x294)]=()=>{const _0x31a2b1=_0x4cfb71;console[_0x31a2b1(0x284)](_0x31a2b1(0x1da)),_0xf13315();},this['ws'][_0x4cfb71(0x254)]=_0x2f28bd=>{const _0x3f30e0=_0x4cfb71;console['error'](_0x3f30e0(0x274),_0x2f28bd),_0x1b1699(_0x2f28bd);},this['ws'][_0x4cfb71(0x29a)]=()=>{const _0x41bfc0=_0x4cfb71;console[_0x41bfc0(0x284)](_0x41bfc0(0x224)),this[_0x41bfc0(0x281)]();},this['ws']['onmessage']=_0x1fd632=>{const _0x5a314e=_0x4cfb71,_0x662967=JSON[_0x5a314e(0x26c)](_0x1fd632['data']);console['log']('Q-Chat:\x20Received\x20message:',_0x662967[_0x5a314e(0x1ea)],_0x662967),this['handleSignalingMessage'](_0x662967);};});}['send'](_0x13f373){const _0x31a2a7=_0x59090b;this['ws']&&this['ws']['readyState']===WebSocket[_0x31a2a7(0x257)]&&this['ws'][_0x31a2a7(0x1f9)](JSON[_0x31a2a7(0x1f7)](_0x13f373));}async['createRoom'](){const _0x164feb=_0x59090b;this['isHost']=!![],this[_0x164feb(0x1f8)]=this['generateRoomId'](),this['updateStatus'](_0x164feb(0x253),'Connecting...');try{await this['connectToServer'](),this['send']({'type':'create-room','roomId':this[_0x164feb(0x1f8)]});}catch(_0x40c100){this['showSystemMessage']('Failed\x20to\x20connect\x20to\x20server'),this[_0x164feb(0x29b)]('disconnected','Connection\x20failed');}}async['joinRoom'](){const _0x1f015d=_0x59090b,_0x2673da=this['roomInput']?.['value'][_0x1f015d(0x23e)]()[_0x1f015d(0x1e9)]();if(!_0x2673da||_0x2673da['length']<0x4){this[_0x1f015d(0x27c)]('Please\x20enter\x20a\x20valid\x20room\x20code');return;}this['isHost']=![],this[_0x1f015d(0x1f8)]=_0x2673da,this[_0x1f015d(0x29b)]('connecting','Joining...');try{await this['connectToServer'](),this['send']({'type':'join-room','roomId':this[_0x1f015d(0x1f8)]});}catch(_0x1d489e){this['showSystemMessage']('Failed\x20to\x20connect\x20to\x20server'),this[_0x1f015d(0x29b)]('disconnected',_0x1f015d(0x267));}}async[_0x59090b(0x255)](_0x4fa7b0){const _0x41884d=_0x59090b;switch(_0x4fa7b0['type']){case _0x41884d(0x1ed):this['showRoomInfo'](),this['updateStatus']('connecting','Waiting\x20for\x20peer...');break;case _0x41884d(0x272):this[_0x41884d(0x27c)]('Joined\x20room!\x20Waiting\x20for\x20host...'),this['updateStatus']('connecting',_0x41884d(0x29c));break;case'peer-joined':console['log'](_0x41884d(0x202),this['isHost']),this[_0x41884d(0x27c)](_0x41884d(0x232)),this[_0x41884d(0x29b)](_0x41884d(0x253),_0x41884d(0x276));try{await this['initializeWebRTC'](),console['log'](_0x41884d(0x201),!!this['peerConnection']),this['isHost']&&(console[_0x41884d(0x284)]('Q-Chat:\x20Creating\x20and\x20sending\x20offer...'),await this[_0x41884d(0x243)](),console[_0x41884d(0x284)]('Q-Chat:\x20Offer\x20sent'));}catch(_0x12dcd0){console['error']('Q-Chat:\x20Error\x20in\x20peer-joined\x20handler:',_0x12dcd0),this['showSystemMessage']('Connection\x20setup\x20failed'),this['updateStatus']('disconnected',_0x41884d(0x1fc));}break;case'peer-left':this['showSystemMessage'](_0x41884d(0x262)),this['updateStatus']('disconnected',_0x41884d(0x24d)),this['disableChat']();break;case'offer':await this['handleOffer'](_0x4fa7b0);break;case'answer':await this[_0x41884d(0x286)](_0x4fa7b0);break;case'ice-candidate':await this['handleIceCandidate'](_0x4fa7b0);break;case'retry-relay':await this[_0x41884d(0x258)]();break;case'error':this[_0x41884d(0x27c)]('Error:\x20'+_0x4fa7b0[_0x41884d(0x27e)]),this['updateStatus'](_0x41884d(0x238),'Error'),console[_0x41884d(0x241)]('Q-Chat\x20Server\x20Error:',_0x4fa7b0[_0x41884d(0x27e)]);break;}}async[_0x59090b(0x233)](_0x4abcba=![]){const _0x4b0017=_0x59090b;this['forceRelayMode']=_0x4abcba,this[_0x4b0017(0x1ef)]++,console[_0x4b0017(0x284)]('Q-Chat:\x20Initializing\x20WebRTC\x20(attempt\x20'+this[_0x4b0017(0x1ef)]+_0x4b0017(0x1dc)+_0x4abcba+')');let _0x1e89bc=this['cachedIceServers'];if(!_0x1e89bc){const _0x553946=[{'urls':'stun:stun.l.google.com:19302'},{'urls':'stun:stun1.l.google.com:19302'}];_0x1e89bc=_0x553946;try{const _0x117fd8=await fetch(_0x4b0017(0x212)),_0x25fa73=await _0x117fd8[_0x4b0017(0x1f2)]();Array['isArray'](_0x25fa73)&&_0x25fa73[_0x4b0017(0x1f1)]>0x0?(_0x1e89bc=_0x25fa73['map'](_0x393b50=>{const _0x21c156=_0x4b0017,_0x4f0f5d={..._0x393b50};return _0x393b50[_0x21c156(0x24a)]&&!_0x393b50['url']&&(_0x4f0f5d[_0x21c156(0x1e1)]=_0x393b50['urls']),_0x4f0f5d;}),console['log']('Q-Chat:\x20Using\x20TURN\x20servers\x20for\x20NAT\x20traversal,\x20count:',_0x1e89bc[_0x4b0017(0x1f1)]),_0x1e89bc[_0x4b0017(0x245)]((_0x438173,_0x178c97)=>{const _0x3cebb9=_0x4b0017;console['log']('Q-Chat:\x20ICE\x20Server\x20'+_0x178c97+':',JSON[_0x3cebb9(0x1f7)](_0x438173));})):console[_0x4b0017(0x284)](_0x4b0017(0x1e8));}catch(_0x34220b){console['log'](_0x4b0017(0x231),_0x34220b);}this['cachedIceServers']=_0x1e89bc;}else console['log']('Q-Chat:\x20Using\x20cached\x20ICE\x20servers\x20for\x20retry');const _0x33dd77={'iceServers':_0x1e89bc,'iceTransportPolicy':_0x4abcba?'relay':'all'};_0x4abcba&&console[_0x4b0017(0x284)]('Q-Chat:\x20Using\x20relay-only\x20mode\x20for\x20VPN\x20compatibility'),this[_0x4b0017(0x25a)]=new RTCPeerConnection(_0x33dd77),this[_0x4b0017(0x25a)][_0x4b0017(0x1f4)]=_0x141bcc=>{const _0x29302a=_0x4b0017;_0x141bcc['candidate']?(console['log'](_0x29302a(0x251),_0x141bcc['candidate'][_0x29302a(0x228)][_0x29302a(0x226)](0x0,0x32)),this['send']({'type':'ice-candidate','roomId':this[_0x29302a(0x1f8)],'candidate':_0x141bcc['candidate']})):console['log']('Q-Chat:\x20ICE\x20gathering\x20complete');},this[_0x4b0017(0x25a)]['oniceconnectionstatechange']=()=>{const _0x4e9e9d=_0x4b0017;console['log']('Q-Chat:\x20ICE\x20connection\x20state:',this['peerConnection'][_0x4e9e9d(0x1f3)]);},this['peerConnection']['onicegatheringstatechange']=()=>{const _0x2b0ed4=_0x4b0017;console['log'](_0x2b0ed4(0x21b),this[_0x2b0ed4(0x25a)][_0x2b0ed4(0x236)]);},this['peerConnection']['onconnectionstatechange']=()=>{const _0x4bc8b5=_0x4b0017,_0x5d48eb=this[_0x4bc8b5(0x25a)]['connectionState'];console[_0x4bc8b5(0x284)](_0x4bc8b5(0x28c),_0x5d48eb);if(_0x5d48eb==='connecting')this['connectionTimeout']&&clearTimeout(this[_0x4bc8b5(0x1f5)]),this[_0x4bc8b5(0x1f5)]=setTimeout(()=>{const _0x44b075=_0x4bc8b5;this[_0x44b075(0x25a)]&&this[_0x44b075(0x25a)][_0x44b075(0x252)]==='connecting'&&(console['log'](_0x44b075(0x298)),!this['forceRelayMode']&&this['connectionAttempt']<this['maxConnectionAttempts']&&(this['showSystemMessage']('Connection\x20slow,\x20trying\x20VPN-compatible\x20mode...'),this['retryWithRelayMode']()));},0x3a98);else{if(_0x5d48eb===_0x4bc8b5(0x207))this[_0x4bc8b5(0x1f5)]&&(clearTimeout(this['connectionTimeout']),this['connectionTimeout']=null),this[_0x4bc8b5(0x29b)](_0x4bc8b5(0x207),_0x4bc8b5(0x287)),this[_0x4bc8b5(0x1f6)]?this[_0x4bc8b5(0x27c)](_0x4bc8b5(0x239)):this[_0x4bc8b5(0x27c)]('ðŸ”’\x20Secure\x20connection\x20established\x20(DTLS\x201.3)');else(_0x5d48eb===_0x4bc8b5(0x238)||_0x5d48eb===_0x4bc8b5(0x29f))&&(this['connectionTimeout']&&(clearTimeout(this['connectionTimeout']),this['connectionTimeout']=null),_0x5d48eb===_0x4bc8b5(0x29f)&&!this[_0x4bc8b5(0x1f6)]&&this[_0x4bc8b5(0x1ef)]<this[_0x4bc8b5(0x1d3)]?(console['log'](_0x4bc8b5(0x23f)),this['showSystemMessage']('Direct\x20connection\x20failed,\x20trying\x20VPN-compatible\x20mode...'),this['retryWithRelayMode']()):(this['updateStatus']('disconnected',_0x4bc8b5(0x230)),this[_0x4bc8b5(0x2a2)]()));}},this['isHost']?(this['dataChannel']=this[_0x4b0017(0x25a)]['createDataChannel'](_0x4b0017(0x1cf),{'ordered':!![]}),this[_0x4b0017(0x279)]()):this['peerConnection'][_0x4b0017(0x21e)]=_0x19e236=>{const _0x508e49=_0x4b0017;this[_0x508e49(0x27b)]=_0x19e236['channel'],this['setupDataChannel']();};}[_0x59090b(0x279)](){const _0x5158b8=_0x59090b;this[_0x5158b8(0x27b)]['onopen']=()=>{const _0x15a045=_0x5158b8;console['log']('Q-Chat:\x20Data\x20channel\x20open'),this[_0x15a045(0x1d6)]=!![],this['enableChat'](),this['showChatUI']();},this[_0x5158b8(0x27b)][_0x5158b8(0x29a)]=()=>{const _0xf3e3d9=_0x5158b8;console['log'](_0xf3e3d9(0x221)),this['isConnected']=![],this['disableChat']();},this[_0x5158b8(0x27b)][_0x5158b8(0x21f)]=_0x27768e=>{const _0x216333=JSON['parse'](_0x27768e['data']);this['receiveMessage'](_0x216333);};}async['createAndSendOffer'](){const _0x5ea39d=_0x59090b;try{const _0x491488=await this[_0x5ea39d(0x25a)]['createOffer']();await this[_0x5ea39d(0x25a)][_0x5ea39d(0x1d1)](_0x491488),this[_0x5ea39d(0x1f9)]({'type':'offer','roomId':this[_0x5ea39d(0x1f8)],'sdp':_0x491488[_0x5ea39d(0x265)]});}catch(_0x528fc6){console[_0x5ea39d(0x241)](_0x5ea39d(0x242),_0x528fc6);}}async['handleOffer'](_0x44d15c){const _0x5e5812=_0x59090b;try{!this['peerConnection']&&await this['initializeWebRTC']();await this[_0x5e5812(0x25a)][_0x5e5812(0x21d)](new RTCSessionDescription({'type':_0x5e5812(0x28b),'sdp':_0x44d15c[_0x5e5812(0x265)]}));const _0x38b102=await this['peerConnection']['createAnswer']();await this['peerConnection'][_0x5e5812(0x1d1)](_0x38b102),this['send']({'type':_0x5e5812(0x246),'roomId':this[_0x5e5812(0x1f8)],'sdp':_0x38b102[_0x5e5812(0x265)]});}catch(_0x16970b){console['error']('Q-Chat:\x20Error\x20handling\x20offer:',_0x16970b);}}async['handleAnswer'](_0x266dcf){const _0x4ed932=_0x59090b;try{await this[_0x4ed932(0x25a)]['setRemoteDescription'](new RTCSessionDescription({'type':'answer','sdp':_0x266dcf['sdp']}));}catch(_0x29c02d){console['error'](_0x4ed932(0x234),_0x29c02d);}}async[_0x59090b(0x23b)](_0x4021fc){const _0x3b55ed=_0x59090b;try{_0x4021fc['candidate']&&this['peerConnection']&&(console['log']('Q-Chat:\x20Received\x20ICE\x20candidate:',_0x4021fc['candidate']['candidate']?.[_0x3b55ed(0x226)](0x0,0x32)),await this['peerConnection'][_0x3b55ed(0x289)](new RTCIceCandidate(_0x4021fc['candidate'])));}catch(_0x385ab2){console[_0x3b55ed(0x241)]('Q-Chat:\x20Error\x20handling\x20ICE\x20candidate:',_0x385ab2);}}async[_0x59090b(0x26f)](){const _0x231bca=_0x59090b;console['log'](_0x231bca(0x244)),this[_0x231bca(0x1f9)]({'type':_0x231bca(0x203),'roomId':this['roomId']}),this[_0x231bca(0x27b)]&&(this[_0x231bca(0x27b)][_0x231bca(0x2a5)](),this['dataChannel']=null),this['peerConnection']&&(this[_0x231bca(0x25a)]['close'](),this[_0x231bca(0x25a)]=null),await this['initializeWebRTC'](!![]),this['isHost']&&await this['createAndSendOffer']();}async[_0x59090b(0x258)](){const _0x1b3090=_0x59090b;console['log']('Q-Chat:\x20Received\x20retry-relay\x20signal\x20from\x20peer'),this[_0x1b3090(0x27c)](_0x1b3090(0x1fb)),this['dataChannel']&&(this['dataChannel']['close'](),this['dataChannel']=null),this[_0x1b3090(0x25a)]&&(this['peerConnection']['close'](),this[_0x1b3090(0x25a)]=null),await this[_0x1b3090(0x233)](!![]);}['showRoomInfo'](){const _0x165b99=_0x59090b;if(this[_0x165b99(0x22e)])this['connectSection']['style']['display']=_0x165b99(0x205);if(this['roomInfoSection'])this['roomInfoSection'][_0x165b99(0x20c)]['display']='block';this['startMatrixSphereAnimation']();}[_0x59090b(0x2a0)](){const _0x2e2b67=_0x59090b,_0x1de5f6=document['getElementById'](_0x2e2b67(0x217)),_0x288a9e=document['getElementById'](_0x2e2b67(0x26e)),_0x22cab3=document['getElementById']('matrixSphereStatus'),_0x16cd88=document[_0x2e2b67(0x25e)](_0x2e2b67(0x1ff)),_0x142b07=document[_0x2e2b67(0x25e)](_0x2e2b67(0x214));if(!_0x288a9e||!_0x1de5f6){if(this['roomCodeEl'])this[_0x2e2b67(0x27d)]['textContent']=this[_0x2e2b67(0x1f8)];return;}this['createMatrixSphere'](_0x288a9e);const _0x37d793=[_0x2e2b67(0x266),_0x2e2b67(0x293),_0x2e2b67(0x1df),'Finalizing\x20Quantum\x20Code...'];let _0x420250=0x0;const _0x4eb4d3=setInterval(()=>{const _0x26b8ee=_0x2e2b67;_0x420250++,_0x420250<_0x37d793[_0x26b8ee(0x1f1)]&&_0x22cab3&&(_0x22cab3[_0x26b8ee(0x210)]=_0x37d793[_0x420250]);},0x258);setTimeout(()=>{const _0x543129=_0x2e2b67;clearInterval(_0x4eb4d3),_0x288a9e['classList']['add'](_0x543129(0x24c));if(_0x22cab3)_0x22cab3[_0x543129(0x20c)][_0x543129(0x1e4)]=_0x543129(0x205);setTimeout(()=>{const _0xf3656=_0x543129;_0x1de5f6[_0xf3656(0x20c)]['display']='none';if(this[_0xf3656(0x27d)])this[_0xf3656(0x27d)]['textContent']=this['roomId'];_0x16cd88&&(_0x16cd88['classList'][_0xf3656(0x1fe)]('hidden'),_0x16cd88[_0xf3656(0x259)]['add'](_0xf3656(0x248))),_0x142b07&&_0x142b07['classList']['remove'](_0xf3656(0x1e0));},0x320);},0x9c4);}['createMatrixSphere'](_0x252834){const _0x2d497c=_0x59090b;_0x252834[_0x2d497c(0x273)]='';const _0x3dc1f0=0x78,_0x57a488=0x3c;for(let _0x3afad8=0x0;_0x3afad8<_0x3dc1f0;_0x3afad8++){const _0x113ae5=document['createElement'](_0x2d497c(0x25b));_0x113ae5['className']=_0x2d497c(0x277),_0x113ae5[_0x2d497c(0x210)]=Math['floor'](Math['random']()*0xa);const _0x464d54=Math[_0x2d497c(0x275)](0x1-0x2*(_0x3afad8+0.5)/_0x3dc1f0),_0x4242e8=Math['PI']*(0x1+Math[_0x2d497c(0x299)](0x5))*_0x3afad8,_0x5932e0=_0x57a488*Math[_0x2d497c(0x21a)](_0x464d54)*Math['cos'](_0x4242e8),_0x54d6b6=_0x57a488*Math[_0x2d497c(0x21a)](_0x464d54)*Math['sin'](_0x4242e8),_0x113326=_0x57a488*Math['cos'](_0x464d54);_0x113ae5['style']['transform']=_0x2d497c(0x1d5)+_0x5932e0+_0x2d497c(0x29d)+_0x54d6b6+_0x2d497c(0x29d)+_0x113326+'px)',_0x113ae5[_0x2d497c(0x20c)]['left']=_0x2d497c(0x1d7),_0x113ae5['style']['top']=_0x2d497c(0x1d7),_0x113ae5['style'][_0x2d497c(0x204)]='-7px',_0x113ae5['style'][_0x2d497c(0x25c)]='-10px',_0x113ae5['style'][_0x2d497c(0x213)]=Math[_0x2d497c(0x269)]()*0.5+'s';const _0x499593=0.4+(_0x113326+_0x57a488)/(0x2*_0x57a488)*0.6;_0x113ae5['style']['opacity']=_0x499593,_0x252834[_0x2d497c(0x2a8)](_0x113ae5);}this[_0x2d497c(0x1eb)]=setInterval(()=>{const _0x2b44aa=_0x2d497c,_0x57be06=_0x252834[_0x2b44aa(0x250)](_0x2b44aa(0x1ee)),_0x1b6bd8=_0x57be06[Math['floor'](Math[_0x2b44aa(0x269)]()*_0x57be06[_0x2b44aa(0x1f1)])];_0x1b6bd8&&(_0x1b6bd8[_0x2b44aa(0x210)]=Math['floor'](Math['random']()*0xa));},0x32),setTimeout(()=>{this['digitChangeInterval']&&clearInterval(this['digitChangeInterval']);},0xdac);}['showChatUI'](){const _0x8e3a3a=_0x59090b;if(this['connectSection'])this['connectSection']['style']['display']='none';if(this['roomInfoSection'])this[_0x8e3a3a(0x1d4)]['style'][_0x8e3a3a(0x1e4)]='none';if(this[_0x8e3a3a(0x22f)])this[_0x8e3a3a(0x22f)]['style'][_0x8e3a3a(0x1e4)]='flex';if(this[_0x8e3a3a(0x288)])this[_0x8e3a3a(0x288)]['style']['display']='block';}[_0x59090b(0x22a)](){const _0x512143=_0x59090b;this[_0x512143(0x209)]&&(this['messageInput'][_0x512143(0x1ce)]=![],this[_0x512143(0x209)]['focus']());if(this['sendBtn'])this[_0x512143(0x218)][_0x512143(0x1ce)]=![];}['disableChat'](){const _0x35b1b1=_0x59090b;if(this[_0x35b1b1(0x209)])this['messageInput']['disabled']=!![];if(this[_0x35b1b1(0x218)])this[_0x35b1b1(0x218)][_0x35b1b1(0x1ce)]=!![];}[_0x59090b(0x278)](){const _0x2242db=_0x59090b,_0x2628d7=this['messageInput']?.[_0x2242db(0x24b)]['trim']();if(!_0x2628d7||!this['isConnected'])return;const _0x447cc5={'type':'message','text':_0x2628d7,'timestamp':Date[_0x2242db(0x206)]()};try{this['dataChannel'][_0x2242db(0x1f9)](JSON['stringify'](_0x447cc5)),this[_0x2242db(0x24e)](_0x2628d7,_0x2242db(0x247),_0x447cc5[_0x2242db(0x240)]),this[_0x2242db(0x209)]['value']='';}catch(_0x26abdb){console[_0x2242db(0x241)]('Q-Chat:\x20Error\x20sending\x20message:',_0x26abdb),this[_0x2242db(0x27c)](_0x2242db(0x256));}}['receiveMessage'](_0x2fe3c3){const _0x4eb15e=_0x59090b;_0x2fe3c3[_0x4eb15e(0x1ea)]==='message'&&(this[_0x4eb15e(0x24e)](_0x2fe3c3[_0x4eb15e(0x222)],'received',_0x2fe3c3['timestamp']),!this['isPanelOpen']&&(this[_0x4eb15e(0x223)]++,this[_0x4eb15e(0x28e)]()));}['addMessage'](_0x3c3f8c,_0x3d0fdb,_0x55672a){const _0x3e5e8c=_0x59090b,_0x584cfa=document[_0x3e5e8c(0x23a)]('div');_0x584cfa[_0x3e5e8c(0x261)]='qchat-message\x20'+_0x3d0fdb;const _0x4a6d36=new Date(_0x55672a)[_0x3e5e8c(0x282)]([],{'hour':'2-digit','minute':_0x3e5e8c(0x211)});_0x584cfa['innerHTML']=_0x3e5e8c(0x28d)+this[_0x3e5e8c(0x260)](_0x3c3f8c)+_0x3e5e8c(0x200)+(_0x3d0fdb==='sent'?'âœ“\x20':'')+_0x4a6d36+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',this[_0x3e5e8c(0x1f0)]?.[_0x3e5e8c(0x2a8)](_0x584cfa),this['scrollToBottom']();}['showSystemMessage'](_0x169051){const _0x3b67e4=_0x59090b,_0x3263bb=document['createElement']('div');_0x3263bb[_0x3b67e4(0x261)]=_0x3b67e4(0x24f),_0x3263bb['textContent']=_0x169051,this[_0x3b67e4(0x1f0)]?.['appendChild'](_0x3263bb),this['scrollToBottom']();}['scrollToBottom'](){const _0x48d0dc=_0x59090b;this['messagesSection']&&(this[_0x48d0dc(0x22f)][_0x48d0dc(0x28f)]=this[_0x48d0dc(0x22f)][_0x48d0dc(0x263)]);}[_0x59090b(0x29b)](_0x41c336,_0x365ecb){const _0x262c01=_0x59090b;if(this[_0x262c01(0x22c)]){this['statusEl'][_0x262c01(0x261)]=_0x262c01(0x20d)+_0x41c336;const _0x3ce600=this['statusEl'][_0x262c01(0x28a)]('.status-text');if(_0x3ce600)_0x3ce600['textContent']=_0x365ecb;}}['updateBadge'](){const _0x1ab3ae=_0x59090b;this[_0x1ab3ae(0x22b)]&&(this['unreadCount']>0x0?(this['badge'][_0x1ab3ae(0x210)]=this['unreadCount']>0x63?_0x1ab3ae(0x26d):this[_0x1ab3ae(0x223)],this[_0x1ab3ae(0x22b)]['style']['display']=_0x1ab3ae(0x22d)):this['badge'][_0x1ab3ae(0x20c)][_0x1ab3ae(0x1e4)]=_0x1ab3ae(0x205));}[_0x59090b(0x20b)](){const _0x51cd56=_0x59090b;this['unreadCount']=0x0,this[_0x51cd56(0x28e)]();}['copyRoomCode'](){const _0x4c84f9=_0x59090b;this['roomId']&&navigator['clipboard'][_0x4c84f9(0x1fd)](this['roomId'])[_0x4c84f9(0x264)](()=>{const _0x507520=_0x4c84f9;this[_0x507520(0x27c)]('Room\x20code\x20copied!');})['catch'](()=>{const _0x322586=_0x4c84f9,_0x7d3a4e=document[_0x322586(0x23a)](_0x322586(0x1d9));_0x7d3a4e['value']=this['roomId'],document['body']['appendChild'](_0x7d3a4e),_0x7d3a4e['select'](),document[_0x322586(0x2a4)](_0x322586(0x216)),document['body'][_0x322586(0x25d)](_0x7d3a4e),this['showSystemMessage']('Room\x20code\x20copied!');});}['handleDisconnect'](){const _0x369b5f=_0x59090b;this['isConnected']=![],this['updateStatus']('disconnected',_0x369b5f(0x230)),this['disableChat']();}[_0x59090b(0x260)](_0x2f1a2d){const _0x2acebf=_0x59090b,_0x3632dc=document[_0x2acebf(0x23a)](_0x2acebf(0x1e5));return _0x3632dc[_0x2acebf(0x210)]=_0x2f1a2d,_0x3632dc['innerHTML'];}}document['addEventListener'](_0x59090b(0x1d0),()=>{const _0x38700b=_0x59090b;window[_0x38700b(0x297)]=new QChat();});