const _0x4b32ea=_0x3484;(function(_0x26f318,_0x497415){const _0x257ba8=_0x3484,_0x4a8163=_0x26f318();while(!![]){try{const _0x44f388=-parseInt(_0x257ba8(0x165))/0x1*(-parseInt(_0x257ba8(0x164))/0x2)+parseInt(_0x257ba8(0xd5))/0x3+parseInt(_0x257ba8(0x15f))/0x4+parseInt(_0x257ba8(0x147))/0x5+parseInt(_0x257ba8(0x10e))/0x6+-parseInt(_0x257ba8(0xea))/0x7+-parseInt(_0x257ba8(0x154))/0x8*(parseInt(_0x257ba8(0xda))/0x9);if(_0x44f388===_0x497415)break;else _0x4a8163['push'](_0x4a8163['shift']());}catch(_0x201058){_0x4a8163['push'](_0x4a8163['shift']());}}}(_0x38cb,0xf070f));function _0x3484(_0x2c9618,_0x16797b){_0x2c9618=_0x2c9618-0xc5;const _0x38cbd6=_0x38cb();let _0x34847a=_0x38cbd6[_0x2c9618];return _0x34847a;}function _0x38cb(){const _0x3c8fb6=['hidden','removeChild','stun:stun1.l.google.com:19302','addMessage','isPanelOpen','messagesList','Q-Chat:\x20WebSocket\x20connected','create-room','Joining...','joinRoom','channel','floor','Q-Chat:\x20Error\x20handling\x20offer:','Q-Chat:\x20Error\x20handling\x20ICE\x20candidate:','ABCDEFGHJKLMNPQRSTUVWXYZ23456789','generateRoomId','Peer\x20connected!\x20Setting\x20up\x20secure\x20channel...','qchatBadge','initElements','message','appendChild','isArray','marginTop','marginLeft','5396826JegSNd','handleSignalingMessage','dataChannel','toggleBtn','onconnectionstatechange','roomId','textContent','onclose','unreadCount','Room\x20code\x20copied!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-text\x22>','random','setLocalDescription','catch','Q-Chat:\x20TURN\x20fetch\x20failed,\x20using\x20STUN\x20fallback','ws:','closePanel','Peer\x20disconnected','keypress','inputSection','qchatWaiting','Please\x20enter\x20a\x20valid\x20room\x20code','matrix-digit','Q-Chat:\x20WebSocket\x20error:','getElementById','qchatMessagesList','disconnected','Establishing\x20Secure\x20Link...','open','/api/turn-credentials','Waiting\x20for\x20peer...','Disconnected','statusEl','createBtn','messageInput','Q-Chat:\x20Using\x20TURN\x20servers\x20for\x20NAT\x20traversal','received','qchatStatus','translate3d(','px,\x20','shiftKey','type','send','isHost','qchat-system-message','disableChat','select','target','value','qchatRoomInput','location','candidate','badge','add','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22qchat-message-time\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','roomInput','connectToServer','2517265kHddsP','textarea','qchatCreate','flex','log','connectSection','createElement','sdp','Joined\x20room!\x20Waiting\x20for\x20host...','addEventListener','-7px','Encrypting\x20Neural\x20Pathway...','style','3848NWTIux','onmessage','receiveMessage','Q-Chat:\x20WebSocket\x20closed','innerHTML','ice-candidate','offer','none','handleOffer','trim','peerConnection','6566604heOfhy','querySelectorAll','qchatPanel','createRoom','qchatInputSection','8esxzSA','391078stTnnj','disabled','acos','panel','handleDisconnect','json','handleIceCandidate','stun:stun.l.google.com:19302','qchat','connected','querySelector','messagesSection','Q-Chat\x20Server\x20Error:','ðŸ”’\x20Secure\x20connection\x20established\x20(DTLS\x201.3)','scrollHeight','className','stringify','isConnected','showRoomInfo','sendBtn','classList','then','showSystemMessage','qchatSendBtn','Generating\x20Quantum\x20Tunnel...','text','50%','qchatClose','preventDefault','click','qchatMessageInput','Q-Chat:\x20Error\x20handling\x20answer:','OPEN','clearUnread','Q-Chat:\x20Data\x20channel\x20closed','674874ATapBp','Finalizing\x20Quantum\x20Code...','roomCodeEl','display','togglePanel','66051SMemmM','answer','remove','copy','sin','createMatrixSphere','Q-Chat:\x20Data\x20channel\x20open','cos','updateStatus','scrollToBottom','Failed\x20to\x20connect\x20to\x20server','99+','bindEvents','div','length','Connection\x20failed','2232573GKZXyX','readyState','connecting','parse','error','setRemoteDescription','body','openPanel','handleAnswer','updateBadge','block','createAndSendOffer'];_0x38cb=function(){return _0x3c8fb6;};return _0x38cb();}class QChat{constructor(){const _0x469c1b=_0x3484;this['ws']=null,this[_0x469c1b(0x15e)]=null,this['dataChannel']=null,this['roomId']=null,this[_0x469c1b(0x139)]=![],this['isConnected']=![],this['unreadCount']=0x0,this['isPanelOpen']=![],this[_0x469c1b(0x108)](),this[_0x469c1b(0xe6)]();}['initElements'](){const _0x13e569=_0x3484;this['panel']=document[_0x13e569(0x126)](_0x13e569(0x161)),this[_0x13e569(0x111)]=document[_0x13e569(0x126)]('qchatToggle'),this['closeBtn']=document['getElementById'](_0x13e569(0xcd)),this['badge']=document['getElementById'](_0x13e569(0x107)),this['connectSection']=document[_0x13e569(0x126)]('qchatConnect'),this['roomInfoSection']=document['getElementById']('qchatRoomInfo'),this['messagesSection']=document['getElementById']('qchatMessages'),this['inputSection']=document['getElementById'](_0x13e569(0x163)),this[_0x13e569(0x12e)]=document[_0x13e569(0x126)](_0x13e569(0x133)),this['roomCodeEl']=document['getElementById']('qchatRoomCode'),this[_0x13e569(0x12f)]=document['getElementById'](_0x13e569(0x149)),this['joinBtn']=document['getElementById']('qchatJoin'),this['copyCodeBtn']=document[_0x13e569(0x126)]('qchatCopyCode'),this[_0x13e569(0xc5)]=document[_0x13e569(0x126)](_0x13e569(0xc9)),this[_0x13e569(0x145)]=document['getElementById'](_0x13e569(0x13f)),this[_0x13e569(0x130)]=document[_0x13e569(0x126)](_0x13e569(0xd0)),this[_0x13e569(0xfb)]=document[_0x13e569(0x126)](_0x13e569(0x127));}['bindEvents'](){const _0x296015=_0x3484;this[_0x296015(0x111)]?.['addEventListener']('click',()=>this['togglePanel']()),this['closeBtn']?.[_0x296015(0x150)](_0x296015(0xcf),()=>this[_0x296015(0x11e)]()),this[_0x296015(0x12f)]?.[_0x296015(0x150)](_0x296015(0xcf),()=>this['createRoom']()),this['joinBtn']?.[_0x296015(0x150)](_0x296015(0xcf),()=>this['joinRoom']()),this['roomInput']?.[_0x296015(0x150)](_0x296015(0x120),_0x2ac9ce=>{const _0x4ead66=_0x296015;if(_0x2ac9ce['key']==='Enter')this[_0x4ead66(0xff)]();}),this['copyCodeBtn']?.[_0x296015(0x150)]('click',()=>this['copyRoomCode']()),this[_0x296015(0xc5)]?.[_0x296015(0x150)]('click',()=>this['sendMessage']()),this[_0x296015(0x130)]?.[_0x296015(0x150)]('keypress',_0x5271c1=>{const _0x5e28a7=_0x296015;_0x5271c1['key']==='Enter'&&!_0x5271c1[_0x5e28a7(0x136)]&&(_0x5271c1[_0x5e28a7(0xce)](),this['sendMessage']());}),document[_0x296015(0x150)](_0x296015(0xcf),_0x5dfa94=>{const _0x202e5c=_0x296015;this[_0x202e5c(0xfa)]&&!this['panel']?.['contains'](_0x5dfa94[_0x202e5c(0x13d)])&&!this['toggleBtn']?.['contains'](_0x5dfa94['target'])&&this['closePanel']();});}[_0x4b32ea(0xd9)](){const _0x20bd71=_0x4b32ea;this['isPanelOpen']?this[_0x20bd71(0x11e)]():this[_0x20bd71(0xf1)]();}[_0x4b32ea(0xf1)](){const _0x5bd6c2=_0x4b32ea;this[_0x5bd6c2(0x168)]?.[_0x5bd6c2(0xc6)][_0x5bd6c2(0x143)](_0x5bd6c2(0x12a)),this[_0x5bd6c2(0x111)]?.['classList'][_0x5bd6c2(0x143)]('active'),this[_0x5bd6c2(0xfa)]=!![],this[_0x5bd6c2(0xd3)]();}[_0x4b32ea(0x11e)](){const _0x5e583c=_0x4b32ea;this[_0x5e583c(0x168)]?.[_0x5e583c(0xc6)]['remove']('open'),this[_0x5e583c(0x111)]?.['classList']['remove']('active'),this[_0x5e583c(0xfa)]=![];}['generateRoomId'](){const _0xa1f840=_0x4b32ea,_0x48311a=_0xa1f840(0x104);let _0x1450e4='';for(let _0x2ae81f=0x0;_0x2ae81f<0x6;_0x2ae81f++){_0x1450e4+=_0x48311a['charAt'](Math[_0xa1f840(0x101)](Math[_0xa1f840(0x119)]()*_0x48311a[_0xa1f840(0xe8)]));}return _0x1450e4;}['getWebSocketUrl'](){const _0x4fb5e0=_0x4b32ea,_0x23a3fe=window['location']['protocol']==='https:'?'wss:':_0x4fb5e0(0x11d);return _0x23a3fe+'//'+window[_0x4fb5e0(0x140)]['host']+'/ws';}async[_0x4b32ea(0x146)](){return new Promise((_0xe43c8e,_0x129aed)=>{const _0x25d628=_0x3484,_0x5837bc=this['getWebSocketUrl']();console[_0x25d628(0x14b)]('Q-Chat:\x20Connecting\x20to:',_0x5837bc),this['ws']=new WebSocket(_0x5837bc),this['ws']['onopen']=()=>{const _0x1470c7=_0x25d628;console['log'](_0x1470c7(0xfc)),_0xe43c8e();},this['ws']['onerror']=_0x36223a=>{const _0x4b49d9=_0x25d628;console['error'](_0x4b49d9(0x125),_0x36223a),_0x129aed(_0x36223a);},this['ws']['onclose']=()=>{const _0x563a73=_0x25d628;console['log'](_0x563a73(0x157)),this['handleDisconnect']();},this['ws'][_0x25d628(0x155)]=_0x512ba9=>{const _0x122590=_0x25d628,_0x56be4e=JSON[_0x122590(0xed)](_0x512ba9['data']);this[_0x122590(0x10f)](_0x56be4e);};});}['send'](_0x5162df){const _0x29bfd0=_0x4b32ea;this['ws']&&this['ws'][_0x29bfd0(0xeb)]===WebSocket[_0x29bfd0(0xd2)]&&this['ws'][_0x29bfd0(0x138)](JSON[_0x29bfd0(0x175)](_0x5162df));}async[_0x4b32ea(0x162)](){const _0x24402e=_0x4b32ea;this['isHost']=!![],this['roomId']=this[_0x24402e(0x105)](),this[_0x24402e(0xe2)]('connecting','Connecting...');try{await this['connectToServer'](),this[_0x24402e(0x138)]({'type':_0x24402e(0xfd),'roomId':this[_0x24402e(0x113)]});}catch(_0x1d7d52){this['showSystemMessage'](_0x24402e(0xe4)),this['updateStatus']('disconnected',_0x24402e(0xe9));}}async[_0x4b32ea(0xff)](){const _0x847e41=_0x4b32ea,_0x549446=this['roomInput']?.[_0x847e41(0x13e)][_0x847e41(0x15d)]()['toUpperCase']();if(!_0x549446||_0x549446['length']<0x4){this[_0x847e41(0xc8)](_0x847e41(0x123));return;}this[_0x847e41(0x139)]=![],this[_0x847e41(0x113)]=_0x549446,this[_0x847e41(0xe2)](_0x847e41(0xec),_0x847e41(0xfe));try{await this['connectToServer'](),this['send']({'type':'join-room','roomId':this[_0x847e41(0x113)]});}catch(_0x559808){this[_0x847e41(0xc8)](_0x847e41(0xe4)),this[_0x847e41(0xe2)](_0x847e41(0x128),_0x847e41(0xe9));}}async['handleSignalingMessage'](_0x39fe56){const _0x5479b7=_0x4b32ea;switch(_0x39fe56['type']){case'room-created':this[_0x5479b7(0x177)](),this['updateStatus'](_0x5479b7(0xec),_0x5479b7(0x12c));break;case'room-joined':this[_0x5479b7(0xc8)](_0x5479b7(0x14f)),this['updateStatus']('connecting','Waiting\x20for\x20host...');break;case'peer-joined':this[_0x5479b7(0xc8)](_0x5479b7(0x106)),this[_0x5479b7(0xe2)]('connecting','Establishing\x20P2P...'),await this['initializeWebRTC']();this[_0x5479b7(0x139)]&&await this['createAndSendOffer']();break;case'peer-left':this['showSystemMessage'](_0x5479b7(0x11f)),this[_0x5479b7(0xe2)](_0x5479b7(0x128),'Peer\x20left'),this[_0x5479b7(0x13b)]();break;case'offer':await this[_0x5479b7(0x15c)](_0x39fe56);break;case _0x5479b7(0xdb):await this[_0x5479b7(0xf2)](_0x39fe56);break;case'ice-candidate':await this['handleIceCandidate'](_0x39fe56);break;case'error':this[_0x5479b7(0xc8)]('Error:\x20'+_0x39fe56['message']),this['updateStatus'](_0x5479b7(0x128),'Error'),console[_0x5479b7(0xee)](_0x5479b7(0x171),_0x39fe56['message']);break;}}async['initializeWebRTC'](){const _0x462ef1=_0x4b32ea,_0x59e33b=[{'urls':_0x462ef1(0x16c)},{'urls':_0x462ef1(0xf8)}];let _0x1d2abf=_0x59e33b;try{const _0x378450=await fetch(_0x462ef1(0x12b)),_0x4c9da2=await _0x378450[_0x462ef1(0x16a)]();Array[_0x462ef1(0x10b)](_0x4c9da2)&&_0x4c9da2['length']>0x0?(_0x1d2abf=_0x4c9da2,console[_0x462ef1(0x14b)](_0x462ef1(0x131))):console[_0x462ef1(0x14b)]('Q-Chat:\x20Invalid\x20TURN\x20response,\x20using\x20STUN\x20fallback');}catch(_0x3fe5d9){console[_0x462ef1(0x14b)](_0x462ef1(0x11c));}const _0x1df0ac={'iceServers':_0x1d2abf};this[_0x462ef1(0x15e)]=new RTCPeerConnection(_0x1df0ac),this['peerConnection']['onicecandidate']=_0x2f4912=>{const _0x250284=_0x462ef1;_0x2f4912['candidate']&&this[_0x250284(0x138)]({'type':_0x250284(0x159),'roomId':this[_0x250284(0x113)],'candidate':_0x2f4912[_0x250284(0x141)]});},this[_0x462ef1(0x15e)][_0x462ef1(0x112)]=()=>{const _0x5747fd=_0x462ef1,_0x178386=this['peerConnection']['connectionState'];console['log']('Q-Chat:\x20Connection\x20state:',_0x178386);if(_0x178386==='connected')this['updateStatus'](_0x5747fd(0x16e),'Secure\x20P2P'),this['showSystemMessage'](_0x5747fd(0x172));else(_0x178386===_0x5747fd(0x128)||_0x178386==='failed')&&(this[_0x5747fd(0xe2)]('disconnected','Disconnected'),this['disableChat']());},this[_0x462ef1(0x139)]?(this[_0x462ef1(0x110)]=this[_0x462ef1(0x15e)]['createDataChannel'](_0x462ef1(0x16d),{'ordered':!![]}),this['setupDataChannel']()):this['peerConnection']['ondatachannel']=_0x325200=>{const _0x9b3567=_0x462ef1;this[_0x9b3567(0x110)]=_0x325200[_0x9b3567(0x100)],this['setupDataChannel']();};}['setupDataChannel'](){const _0x3a9532=_0x4b32ea;this['dataChannel']['onopen']=()=>{const _0x110d52=_0x3484;console['log'](_0x110d52(0xe0)),this['isConnected']=!![],this['enableChat'](),this['showChatUI']();},this[_0x3a9532(0x110)][_0x3a9532(0x115)]=()=>{const _0x4493ca=_0x3a9532;console['log'](_0x4493ca(0xd4)),this[_0x4493ca(0x176)]=![],this['disableChat']();},this['dataChannel']['onmessage']=_0x5f0b4c=>{const _0xa76922=JSON['parse'](_0x5f0b4c['data']);this['receiveMessage'](_0xa76922);};}async[_0x4b32ea(0xf5)](){const _0x2fa941=_0x4b32ea;try{const _0x33d4fc=await this[_0x2fa941(0x15e)]['createOffer']();await this['peerConnection'][_0x2fa941(0x11a)](_0x33d4fc),this['send']({'type':'offer','roomId':this[_0x2fa941(0x113)],'sdp':_0x33d4fc['sdp']});}catch(_0x78e77f){console['error']('Q-Chat:\x20Error\x20creating\x20offer:',_0x78e77f);}}async[_0x4b32ea(0x15c)](_0x84ebe){const _0x42c3e4=_0x4b32ea;try{await this['initializeWebRTC'](),await this['peerConnection'][_0x42c3e4(0xef)](new RTCSessionDescription({'type':_0x42c3e4(0x15a),'sdp':_0x84ebe[_0x42c3e4(0x14e)]}));const _0x256052=await this['peerConnection']['createAnswer']();await this[_0x42c3e4(0x15e)][_0x42c3e4(0x11a)](_0x256052),this['send']({'type':_0x42c3e4(0xdb),'roomId':this['roomId'],'sdp':_0x256052[_0x42c3e4(0x14e)]});}catch(_0x3f8581){console[_0x42c3e4(0xee)](_0x42c3e4(0x102),_0x3f8581);}}async['handleAnswer'](_0xcd13ea){const _0x3bf9ac=_0x4b32ea;try{await this['peerConnection']['setRemoteDescription'](new RTCSessionDescription({'type':_0x3bf9ac(0xdb),'sdp':_0xcd13ea[_0x3bf9ac(0x14e)]}));}catch(_0x5f49a1){console[_0x3bf9ac(0xee)](_0x3bf9ac(0xd1),_0x5f49a1);}}async[_0x4b32ea(0x16b)](_0x2c9b78){const _0x5b4c5b=_0x4b32ea;try{_0x2c9b78[_0x5b4c5b(0x141)]&&await this[_0x5b4c5b(0x15e)]['addIceCandidate'](new RTCIceCandidate(_0x2c9b78[_0x5b4c5b(0x141)]));}catch(_0xe2d6fd){console['error'](_0x5b4c5b(0x103),_0xe2d6fd);}}['showRoomInfo'](){const _0x282b8b=_0x4b32ea;if(this['connectSection'])this['connectSection'][_0x282b8b(0x153)]['display']='none';if(this['roomInfoSection'])this['roomInfoSection'][_0x282b8b(0x153)][_0x282b8b(0xd8)]='block';this['startMatrixSphereAnimation']();}['startMatrixSphereAnimation'](){const _0x63478e=_0x4b32ea,_0x3c3e97=document['getElementById']('matrixSphereContainer'),_0x6332bf=document['getElementById']('matrixSphere'),_0x5c1f90=document[_0x63478e(0x126)]('matrixSphereStatus'),_0x1e6a3e=document['getElementById']('qchatRoomCodeSection'),_0x5846b4=document['getElementById'](_0x63478e(0x122));if(!_0x6332bf||!_0x3c3e97){if(this['roomCodeEl'])this[_0x63478e(0xd7)][_0x63478e(0x114)]=this['roomId'];return;}this['createMatrixSphere'](_0x6332bf);const _0x3c45e3=[_0x63478e(0xca),_0x63478e(0x152),_0x63478e(0x129),_0x63478e(0xd6)];let _0x397666=0x0;const _0x33bd36=setInterval(()=>{const _0xba4fe4=_0x63478e;_0x397666++,_0x397666<_0x3c45e3[_0xba4fe4(0xe8)]&&_0x5c1f90&&(_0x5c1f90[_0xba4fe4(0x114)]=_0x3c45e3[_0x397666]);},0x258);setTimeout(()=>{const _0x5d9ce1=_0x63478e;clearInterval(_0x33bd36),_0x6332bf['classList'][_0x5d9ce1(0x143)]('fade-out');if(_0x5c1f90)_0x5c1f90['style'][_0x5d9ce1(0xd8)]=_0x5d9ce1(0x15b);setTimeout(()=>{const _0x202bb7=_0x5d9ce1;_0x3c3e97[_0x202bb7(0x153)]['display']=_0x202bb7(0x15b);if(this[_0x202bb7(0xd7)])this[_0x202bb7(0xd7)]['textContent']=this['roomId'];_0x1e6a3e&&(_0x1e6a3e[_0x202bb7(0xc6)][_0x202bb7(0xdc)](_0x202bb7(0xf6)),_0x1e6a3e['classList'][_0x202bb7(0x143)]('reveal')),_0x5846b4&&_0x5846b4['classList']['remove']('hidden');},0x320);},0x9c4);}[_0x4b32ea(0xdf)](_0x5c08b7){const _0x1f2f79=_0x4b32ea;_0x5c08b7['innerHTML']='';const _0x579663=0x78,_0x586b05=0x3c;for(let _0x27bf65=0x0;_0x27bf65<_0x579663;_0x27bf65++){const _0x9f97ec=document['createElement']('span');_0x9f97ec[_0x1f2f79(0x174)]=_0x1f2f79(0x124),_0x9f97ec[_0x1f2f79(0x114)]=Math[_0x1f2f79(0x101)](Math['random']()*0xa);const _0x43f9c8=Math[_0x1f2f79(0x167)](0x1-0x2*(_0x27bf65+0.5)/_0x579663),_0x2f22f3=Math['PI']*(0x1+Math['sqrt'](0x5))*_0x27bf65,_0x5d2e02=_0x586b05*Math[_0x1f2f79(0xde)](_0x43f9c8)*Math['cos'](_0x2f22f3),_0x5a18c7=_0x586b05*Math[_0x1f2f79(0xde)](_0x43f9c8)*Math[_0x1f2f79(0xde)](_0x2f22f3),_0x3300c8=_0x586b05*Math[_0x1f2f79(0xe1)](_0x43f9c8);_0x9f97ec[_0x1f2f79(0x153)]['transform']=_0x1f2f79(0x134)+_0x5d2e02+_0x1f2f79(0x135)+_0x5a18c7+'px,\x20'+_0x3300c8+'px)',_0x9f97ec['style']['left']=_0x1f2f79(0xcc),_0x9f97ec[_0x1f2f79(0x153)]['top']=_0x1f2f79(0xcc),_0x9f97ec['style'][_0x1f2f79(0x10d)]=_0x1f2f79(0x151),_0x9f97ec[_0x1f2f79(0x153)][_0x1f2f79(0x10c)]='-10px',_0x9f97ec[_0x1f2f79(0x153)]['animationDelay']=Math['random']()*0.5+'s';const _0x2f6f49=0.4+(_0x3300c8+_0x586b05)/(0x2*_0x586b05)*0.6;_0x9f97ec['style']['opacity']=_0x2f6f49,_0x5c08b7['appendChild'](_0x9f97ec);}this['digitChangeInterval']=setInterval(()=>{const _0x4615b1=_0x1f2f79,_0x35b313=_0x5c08b7[_0x4615b1(0x160)]('.matrix-digit'),_0x3869a4=_0x35b313[Math[_0x4615b1(0x101)](Math['random']()*_0x35b313[_0x4615b1(0xe8)])];_0x3869a4&&(_0x3869a4[_0x4615b1(0x114)]=Math['floor'](Math[_0x4615b1(0x119)]()*0xa));},0x32),setTimeout(()=>{this['digitChangeInterval']&&clearInterval(this['digitChangeInterval']);},0xdac);}['showChatUI'](){const _0x1aa151=_0x4b32ea;if(this['connectSection'])this[_0x1aa151(0x14c)][_0x1aa151(0x153)][_0x1aa151(0xd8)]=_0x1aa151(0x15b);if(this['roomInfoSection'])this['roomInfoSection'][_0x1aa151(0x153)][_0x1aa151(0xd8)]=_0x1aa151(0x15b);if(this['messagesSection'])this[_0x1aa151(0x170)][_0x1aa151(0x153)][_0x1aa151(0xd8)]='flex';if(this[_0x1aa151(0x121)])this[_0x1aa151(0x121)]['style']['display']=_0x1aa151(0xf4);}['enableChat'](){const _0x95e912=_0x4b32ea;this['messageInput']&&(this[_0x95e912(0x130)][_0x95e912(0x166)]=![],this['messageInput']['focus']());if(this['sendBtn'])this[_0x95e912(0xc5)][_0x95e912(0x166)]=![];}[_0x4b32ea(0x13b)](){const _0x928e22=_0x4b32ea;if(this[_0x928e22(0x130)])this['messageInput'][_0x928e22(0x166)]=!![];if(this[_0x928e22(0xc5)])this[_0x928e22(0xc5)][_0x928e22(0x166)]=!![];}['sendMessage'](){const _0x577b45=_0x4b32ea,_0x4a1104=this['messageInput']?.[_0x577b45(0x13e)]['trim']();if(!_0x4a1104||!this['isConnected'])return;const _0x2ac030={'type':_0x577b45(0x109),'text':_0x4a1104,'timestamp':Date['now']()};try{this[_0x577b45(0x110)][_0x577b45(0x138)](JSON['stringify'](_0x2ac030)),this[_0x577b45(0xf9)](_0x4a1104,'sent',_0x2ac030['timestamp']),this[_0x577b45(0x130)][_0x577b45(0x13e)]='';}catch(_0x1e11b1){console['error']('Q-Chat:\x20Error\x20sending\x20message:',_0x1e11b1),this[_0x577b45(0xc8)]('Failed\x20to\x20send\x20message');}}[_0x4b32ea(0x156)](_0x3eef4f){const _0x5a180b=_0x4b32ea;_0x3eef4f[_0x5a180b(0x137)]===_0x5a180b(0x109)&&(this[_0x5a180b(0xf9)](_0x3eef4f[_0x5a180b(0xcb)],_0x5a180b(0x132),_0x3eef4f['timestamp']),!this['isPanelOpen']&&(this[_0x5a180b(0x116)]++,this['updateBadge']()));}[_0x4b32ea(0xf9)](_0x3acfdb,_0x380b7d,_0x49e70d){const _0x44567c=_0x4b32ea,_0x2866b=document[_0x44567c(0x14d)](_0x44567c(0xe7));_0x2866b['className']='qchat-message\x20'+_0x380b7d;const _0x4bed05=new Date(_0x49e70d)['toLocaleTimeString']([],{'hour':'2-digit','minute':'2-digit'});_0x2866b['innerHTML']=_0x44567c(0x118)+this['escapeHtml'](_0x3acfdb)+_0x44567c(0x144)+(_0x380b7d==='sent'?'âœ“\x20':'')+_0x4bed05+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',this['messagesList']?.[_0x44567c(0x10a)](_0x2866b),this['scrollToBottom']();}['showSystemMessage'](_0x548c74){const _0x2212e9=_0x4b32ea,_0x14bb3b=document[_0x2212e9(0x14d)](_0x2212e9(0xe7));_0x14bb3b['className']=_0x2212e9(0x13a),_0x14bb3b['textContent']=_0x548c74,this['messagesList']?.[_0x2212e9(0x10a)](_0x14bb3b),this['scrollToBottom']();}[_0x4b32ea(0xe3)](){const _0xb2854=_0x4b32ea;this[_0xb2854(0x170)]&&(this['messagesSection']['scrollTop']=this[_0xb2854(0x170)][_0xb2854(0x173)]);}['updateStatus'](_0x43f1ca,_0x3e75ce){const _0xb503f=_0x4b32ea;if(this['statusEl']){this['statusEl']['className']='qchat-status\x20'+_0x43f1ca;const _0x48a877=this['statusEl'][_0xb503f(0x16f)]('.status-text');if(_0x48a877)_0x48a877[_0xb503f(0x114)]=_0x3e75ce;}}['updateBadge'](){const _0x1d065c=_0x4b32ea;this['badge']&&(this['unreadCount']>0x0?(this[_0x1d065c(0x142)]['textContent']=this[_0x1d065c(0x116)]>0x63?_0x1d065c(0xe5):this['unreadCount'],this['badge'][_0x1d065c(0x153)]['display']=_0x1d065c(0x14a)):this['badge']['style'][_0x1d065c(0xd8)]='none');}[_0x4b32ea(0xd3)](){const _0x18fde2=_0x4b32ea;this['unreadCount']=0x0,this[_0x18fde2(0xf3)]();}['copyRoomCode'](){const _0x4daf10=_0x4b32ea;this[_0x4daf10(0x113)]&&navigator['clipboard']['writeText'](this[_0x4daf10(0x113)])[_0x4daf10(0xc7)](()=>{const _0x25f064=_0x4daf10;this['showSystemMessage'](_0x25f064(0x117));})[_0x4daf10(0x11b)](()=>{const _0x1e7653=_0x4daf10,_0x2a7c0e=document[_0x1e7653(0x14d)](_0x1e7653(0x148));_0x2a7c0e[_0x1e7653(0x13e)]=this['roomId'],document['body']['appendChild'](_0x2a7c0e),_0x2a7c0e[_0x1e7653(0x13c)](),document['execCommand'](_0x1e7653(0xdd)),document[_0x1e7653(0xf0)][_0x1e7653(0xf7)](_0x2a7c0e),this[_0x1e7653(0xc8)](_0x1e7653(0x117));});}[_0x4b32ea(0x169)](){const _0x3018e2=_0x4b32ea;this[_0x3018e2(0x176)]=![],this['updateStatus']('disconnected',_0x3018e2(0x12d)),this[_0x3018e2(0x13b)]();}['escapeHtml'](_0x33b32b){const _0xfbe6a4=_0x4b32ea,_0x96a526=document['createElement']('div');return _0x96a526[_0xfbe6a4(0x114)]=_0x33b32b,_0x96a526[_0xfbe6a4(0x158)];}}document['addEventListener']('DOMContentLoaded',()=>{window['qChat']=new QChat();});