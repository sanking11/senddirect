<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <title>Send Direct - Secure P2P File Sharing</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css?v=20260204c">
</head>
<body>
    <!-- Quantum Loading Screen -->
    <div class="quantum-loader" id="quantumLoader">
        <div class="loader-background">
            <canvas id="wormholeCanvas"></canvas>
            <div class="quantum-grid"></div>
            <div class="quantum-particles"></div>
        </div>

        <div class="loader-content">
            <div class="loader-logo">
                <div class="quantum-ring ring-1"></div>
                <div class="quantum-ring ring-2"></div>
                <div class="quantum-ring ring-3"></div>
                <div class="quantum-core">
                    <span class="infinity-symbol">‚àû</span>
                </div>
            </div>

            <h1 class="loader-title glitch-text" data-text="QUANTUM TUNNEL">QUANTUM TUNNEL</h1>
            <p class="loader-subtitle">Initializing Quantum Field....</p>

            <div class="loading-steps">
                <div class="step" data-step="1">
                    <span class="step-percent">[ 5% ]</span>
                    <span class="step-text">Quantum system isolated</span>
                    <span class="step-subtext">(Environmental decoherence suppressed)</span>
                </div>
                <div class="step" data-step="2">
                    <span class="step-percent">[ 12% ]</span>
                    <span class="step-text">Negative energy field initiated</span>
                    <span class="step-subtext">(Localized vacuum energy imbalance generated)</span>
                </div>
                <div class="step" data-step="3">
                    <span class="step-percent">[ 20% ]</span>
                    <span class="step-text">Exotic matter state formed</span>
                    <span class="step-subtext">(Sustained negative-energy configuration established)</span>
                </div>
                <div class="step" data-step="4">
                    <span class="step-percent">[ 28% ]</span>
                    <span class="step-text">Spacetime geometry modulated</span>
                    <span class="step-subtext">(Local spacetime curvature adjusted)</span>
                </div>
                <div class="step" data-step="5">
                    <span class="step-percent">[ 36% ]</span>
                    <span class="step-text">Quantum entanglement established</span>
                    <span class="step-subtext">(Non-classical correlations active)</span>
                </div>
                <div class="step" data-step="6">
                    <span class="step-percent">[ 48% ]</span>
                    <span class="step-text">Quantum reference frames aligned</span>
                    <span class="step-subtext">(Temporal and phase synchronization complete)</span>
                </div>
                <div class="step" data-step="7">
                    <span class="step-percent">[ 60% ]</span>
                    <span class="step-text">Quantum state lattice stabilized</span>
                    <span class="step-subtext">(State control matrix holding)</span>
                </div>
                <div class="step" data-step="8">
                    <span class="step-percent">[ 72% ]</span>
                    <span class="step-text">Quantum channels synchronized</span>
                    <span class="step-subtext">(Quantum and classical paths aligned)</span>
                </div>
                <div class="step" data-step="9">
                    <span class="step-percent">[ 84% ]</span>
                    <span class="step-text">Quantum measurement bases locked</span>
                    <span class="step-subtext">(Observation parameters fixed)</span>
                </div>
                <div class="step" data-step="10">
                    <span class="step-percent">[ 95% ]</span>
                    <span class="step-text">Quantum coherence confirmed</span>
                    <span class="step-subtext">(Decoherence within operational limits)</span>
                </div>
                <div class="step final-step" data-step="11">
                    <span class="step-percent">[ 100% ]</span>
                    <span class="step-text">QUANTUM STATE TRANSFER READY</span>
                </div>
            </div>

            <div class="progress-bar-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="loaderProgress"></div>
                    <div class="progress-glow"></div>
                </div>
                <span class="progress-percent" id="loaderPercent">0%</span>
            </div>
        </div>

        <div class="loader-scanlines"></div>
        <div class="loader-glitch-overlay"></div>
    </div>

    <!-- Background Canvas -->
    <canvas id="liquidCanvas"></canvas>

    <!-- Custom Cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>
    <div class="cursor-scanline"></div>
    <div class="cursor-data"></div>

    <!-- Futuristic Overlays -->
    <div class="grid-overlay"></div>
    <div class="screen-flicker"></div>
    <canvas id="particleCanvas"></canvas>

    <!-- Corner Decorations (HUD Elements) -->
    <div class="corner-decoration top-left">
        <span class="corner-line horizontal"></span>
        <span class="corner-line vertical"></span>
        <span class="corner-dot"></span>
    </div>
    <div class="corner-decoration top-right">
        <span class="corner-line horizontal"></span>
        <span class="corner-line vertical"></span>
        <span class="corner-dot"></span>
    </div>
    <div class="corner-decoration bottom-left">
        <span class="corner-line horizontal"></span>
        <span class="corner-line vertical"></span>
        <span class="corner-dot"></span>
    </div>
    <div class="corner-decoration bottom-right">
        <span class="corner-line horizontal"></span>
        <span class="corner-line vertical"></span>
        <span class="corner-dot"></span>
    </div>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="header liquid-glass">
            <div class="shimmer-effect"></div>
            <div class="card-corner top-left"></div>
            <div class="card-corner top-right"></div>
            <div class="card-corner bottom-left"></div>
            <div class="card-corner bottom-right"></div>
            <div class="header-left">
                <div class="logo glitch-text" data-text="Send Direct">
                    <span class="logo-icon">
                        <span class="quantum-symbol">S</span>
                        <span class="orbital-ring"></span>
                        <span class="orbital-ring-2"></span>
                        <span class="orbital-ring-3"></span>
                    </span>
                    <div class="logo-text-container">
                        <span class="logo-text">Send Direct </span>
                        <span class="logo-version"> Q-v1.0.7 Q-Systems Ltd.</span>
                    </div>
                </div>
                <div class="system-time">
                    <span class="time-label">SYS üåç</span>
                    <span class="time-display" id="systemTime">00:00:00</span>
                </div>
            </div>
            <nav class="header-nav">
                <a href="index.html" class="nav-link active" data-index="01">Share</a>
                <a href="receive.html" class="nav-link" data-index="02">Receive</a>
                <a href="about.html" class="nav-link" data-index="03">About</a>
            </nav>
            <div class="header-right">
                <div class="uptime-time">
                    <span class="time-label">UPTIME ‚åõ</span>
                    <span class="time-display" id="headerUptime">00:00</span>
                </div>
            </div>
        </header>

        <!-- Futuristic Dashboard Widgets -->
        <section class="dashboard-widgets">
            <!-- System Status Widget -->
            <div class="widget system-widget liquid-glass">
                <div class="shimmer-effect"></div>
                <!-- Green Corner Accents -->
                <div class="card-corner top-left"></div>
                <div class="card-corner top-right"></div>
                <div class="card-corner bottom-left"></div>
                <div class="card-corner bottom-right"></div>
                <div class="widget-header">
                    <span class="widget-icon">‚óà</span>
                    <span class="widget-title">SYS STATUS</span>
                </div>
                <div class="widget-content">
                    <div class="status-row">
                        <span class="status-name">QUANTUM CORE</span>
                        <span class="status-value online">ACTIVE</span>
                    </div>
                    <div class="status-row">
                        <span class="status-name">ENCRYPTION</span>
                        <span class="status-value online">AES-256</span>
                    </div>
                    <div class="status-row">
                        <span class="status-name">PROTOCOL</span>
                        <span class="status-value online" id="protocolStatus">WebRTC</span>
                    </div>
                    <div class="status-row">
                        <span class="status-name">MEMORY</span>
                        <span class="status-value" id="memoryUsage">-- MB</span>
                    </div>
                    <div class="status-row">
                        <span class="status-name">NETWORK</span>
                        <span class="status-value" id="networkStatus">SCANNING...</span>
                    </div>
                    <div class="status-bar-container">
                        <div class="status-bar-fill" id="systemHealth"></div>
                    </div>
                    <span class="status-percent" id="healthPercent">98%</span>
                </div>
            </div>

            <!-- Cosmic Time Widget -->
            <div class="widget clock-widget cosmic-widget liquid-glass">
                <div class="shimmer-effect"></div>
                <!-- Green Corner Accents -->
                <div class="card-corner top-left"></div>
                <div class="card-corner top-right"></div>
                <div class="card-corner bottom-left"></div>
                <div class="card-corner bottom-right"></div>
                <div class="widget-header">
                    <span class="widget-icon">‚ó∑</span>
                    <span class="widget-title">TEMPORAL SYNC</span>
                </div>
                <div class="widget-content cosmic-content">
                    <!-- Solar Time -->
                    <div class="cosmic-time-row solar-time">
                        <span class="planet-icon">‚òÄÔ∏è</span>
                        <span class="planet-name">SOLAR</span>
                        <span class="planet-time" id="solarTime">00:00:00</span>
                    </div>
                    <!-- Mars Time -->
                    <div class="cosmic-time-row mars-time">
                        <span class="planet-icon">üî¥</span>
                        <span class="planet-name">MARS</span>
                        <span class="planet-time" id="marsTime">00:00:00</span>
                    </div>
                    <!-- Jupiter Time -->
                    <div class="cosmic-time-row jupiter-time">
                        <span class="planet-icon">üü†</span>
                        <span class="planet-name">JUPITER</span>
                        <span class="planet-time" id="jupiterTime">00:00:00</span>
                    </div>
                    <!-- Saturn Time -->
                    <div class="cosmic-time-row saturn-time">
                        <span class="planet-icon">ü™ê</span>
                        <span class="planet-name">SATURN</span>
                        <span class="planet-time" id="saturnTime">00:00:00</span>
                    </div>
                    <!-- Black Hole Time -->
                    <div class="cosmic-time-row blackhole-time">
                        <span class="planet-icon">‚ö´</span>
                        <span class="planet-name">Sagittarius</span>
                        <span class="planet-time" id="blackholeTime">00:00:00</span>
                    </div>
                </div>
            </div>

            <!-- Weather Widget -->
            <div class="widget weather-widget liquid-glass">
                <div class="shimmer-effect"></div>
                <!-- Green Corner Accents -->
                <div class="card-corner top-left"></div>
                <div class="card-corner top-right"></div>
                <div class="card-corner bottom-left"></div>
                <div class="card-corner bottom-right"></div>
                <div class="widget-header">
                    <span class="widget-icon">‚óé</span>
                    <span class="widget-title">ATMOSPHERE</span>
                </div>
                <div class="widget-content weather-content">
                    <div class="weather-main">
                        <div class="weather-icon" id="weatherIcon">‚òÄ</div>
                        <div class="weather-temp" id="weatherTemp">--¬∞C</div>
                    </div>
                    <div class="weather-details">
                        <div class="weather-row">
                            <span class="weather-label">HUMIDITY</span>
                            <span class="weather-value" id="weatherHumidity">--%</span>
                        </div>
                        <div class="weather-row">
                            <span class="weather-label">WIND</span>
                            <span class="weather-value" id="weatherWind">-- km/h</span>
                        </div>
                        <div class="weather-row">
                            <span class="weather-label">PRESSURE</span>
                            <span class="weather-value" id="weatherPressure">-- hPa</span>
                        </div>
                        <div class="weather-row">
                            <span class="weather-label">UV INDEX</span>
                            <span class="weather-value" id="weatherUV">--</span>
                        </div>
                        <div class="weather-row">
                            <span class="weather-label">LOCATION</span>
                            <span class="weather-value" id="weatherLocation">DETECTING...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Network Monitor Widget -->
            <div class="widget network-widget liquid-glass">
                <div class="shimmer-effect"></div>
                <!-- Green Corner Accents -->
                <div class="card-corner top-left"></div>
                <div class="card-corner top-right"></div>
                <div class="card-corner bottom-left"></div>
                <div class="card-corner bottom-right"></div>
                <div class="widget-header">
                    <span class="widget-icon">‚¨°</span>
                    <span class="widget-title">Quantum PULSE</span>
                </div>
                <div class="widget-content network-content">
                    <div class="quantum-tunnel-status">
                        <span class="status-dot active" id="tunnelStatus"></span>
                        <span class="tunnel-label">Quantum Tunnel Ready</span>
                    </div>
                    <div class="network-graph">
                        <canvas id="networkGraph" width="200" height="35"></canvas>
                    </div>
                    <div class="network-stats">
                        <div class="stat-item">
                            <span class="stat-label">LATENCY</span>
                            <span class="stat-value" id="networkLatency">-- ms</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">BANDWIDTH</span>
                            <span class="stat-value" id="networkBandwidth">-- Mbps</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">PACKETS</span>
                            <span class="stat-value" id="networkPackets">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">CONN TYPE</span>
                            <span class="stat-value" id="connectionType">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-card liquid-glass">
                    <div class="shimmer-effect"></div>
                    <div class="circuit-pattern"></div>
                    <div class="card-scan-effect"></div>
                    <!-- Green Corner Accents -->
                    <div class="card-corner top-left"></div>
                    <div class="card-corner top-right"></div>
                    <div class="card-corner bottom-left"></div>
                    <div class="card-corner bottom-right"></div>

                    <div class="hero-content">
                        <h1 class="hero-title">Quantum Tunnelling  <span class="highlight">Drop Zone</span> Platform</h1>
                          <!--<h3>Quantum Tunnelling Drop Zone Platform</h3><br>-->
                        <p class="hero-subtitle">Quantum-speed file transference through encrypted neural networks enables true Point-to-Point teleportation with no intermediate observation and no persistent quantum footprint. Information exists only as a quantum state until observation, held in superposition and resolved through entanglement; upon measurement, the wavefunction collapses and the data manifests‚Äîits state reconstructed directly at the target node, without traversal, interception, or residual footprint.</p>

                        <!-- File Drop Zone -->
                        <div class="file-drop-zone" id="dropZone">
                            <!-- Green Corner Accents -->
                            <div class="card-corner top-left"></div>
                            <div class="card-corner top-right"></div>
                            <div class="card-corner bottom-left"></div>
                            <div class="card-corner bottom-right"></div>
                            <div class="drop-zone-content">
                                
                                <div class="drop-icon">
                                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="17 8 12 3 7 8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    <span class="orbital-ring"></span>
                                    <span class="orbital-ring-2"></span>
                                    <span class="orbital-ring-3"></span>
                                </div>
                                <p class="drop-text">Drop files here or <span class="browse-link">browse</span></p>
                                <p class="drop-hint">No file size limit ‚Ä¢ End-to-end encrypted</p>
                                
                            </div>
                            <input type="file" id="fileInput" multiple hidden>
                        </div>

                        <!-- Selected Files List -->
                        <div class="selected-files" id="selectedFiles" style="display: none;">
                            <div class="files-header">
                                <h3 class="files-title">Selected Files</h3>
                                <button type="button" class="clear-btn" id="clearFiles">Clear All</button>
                            </div>
                            <div class="files-list" id="filesList"></div>
                            <div class="files-total">
                                <span>Total: <span id="totalSize">0 MB</span></span>
                                <span id="fileCount">0 files</span>
                            </div>
                        </div>

                        <!-- Share Options -->
                        <div class="share-options" id="shareOptions" style="display: none;">
                            <!-- Transfer Mode Toggle -->
                            <div class="transfer-mode-toggle">
                                <button type="button" class="mode-btn active" id="modeLinkBtn" data-mode="link">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                                    </svg>
                                    Send link
                                </button>
                                <button type="button" class="mode-btn" id="modeEmailBtn" data-mode="email">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                        <polyline points="22,6 12,13 2,6"/>
                                    </svg>
                                    Send email
                                </button>
                            </div>

                            <!-- Email Form (hidden by default) -->
                            <div class="email-form" id="emailForm" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Send to</label>
                                    <input type="text" class="form-input" id="recipientEmails" placeholder="Send files to">
                                    <span class="form-hint">Separate multiple emails with commas.</span>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Your email</label>
                                    <input type="email" class="form-input" id="senderEmail" placeholder="yourname@email.com" value="SendDirect@fake1.lol">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email info <span class="optional">(Optional)</span></label>
                                    <input type="text" class="form-input" id="transferTitle" placeholder="Subject">
                                    <textarea class="form-input form-textarea" id="transferMessage" placeholder="Message" rows="3"></textarea>
                                </div>
                            </div>

                            <!-- Expiry Options -->
                            <div class="options-row">
                                <div class="option-group">
                                    <label class="option-label">Expires after</label>
                                    <select class="option-select" id="downloadLimit">
                                        <option value="1">1 download</option>
                                        <option value="5">5 downloads</option>
                                        <option value="10">10 downloads</option>
                                        <option value="25">25 downloads</option>
                                        <option value="0">Unlimited</option>
                                    </select>
                                </div>
                                <span class="option-or">or</span>
                                <div class="option-group">
                                    <select class="option-select" id="expiryTime">
                                        <option value="1">1 hour</option>
                                        <option value="24" selected>1 day</option>
                                        <option value="168">7 days</option>
                                        <option value="720">30 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="options-row password-row">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="enablePassword">
                                    <span class="checkmark"></span>
                                    <span class="checkbox-label">Protect with password</span>
                                </label>
                                <input type="password" class="password-input" id="sharePassword" placeholder="Enter password" style="display: none;">
                            </div>
                        </div>

                        <!-- Share Button -->
                        <button type="button" class="share-btn liquid-glass" id="shareBtn" disabled>
                            <span class="btn-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="18" cy="5" r="3"/>
                                    <circle cx="6" cy="12" r="3"/>
                                    <circle cx="18" cy="19" r="3"/>
                                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                                </svg>
                            </span>
                            <span class="btn-text" id="shareBtnText">Generate Share Link</span>
                        </button>
                    </div>
                </div>

                <!-- Stats Widgets Section (hidden until files are dropped) -->
                <section class="stats-widgets" id="statsWidgets" style="display: none;">
                    <div class="stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="stat-icon">üìÅ</div>
                        <div class="stat-number" id="statTotalFiles">0</div>
                        <div class="stat-label">TOTAL FILES</div>
                    </div>
                    <div class="stat-card liquid-glass success">
                        <div class="shimmer-effect"></div>
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-number" id="statSuccessful">0</div>
                        <div class="stat-label">SUCCESSFUL</div>
                    </div>
                    <div class="stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="stat-icon">üìã</div>
                        <div class="stat-number" id="statPending">0</div>
                        <div class="stat-label">PENDING</div>
                    </div>
                    <div class="stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="stat-icon">‚ö°</div>
                        <div class="stat-number" id="statTransferSpeed">0</div>
                        <div class="stat-label">AVG SPEED (MB/s)</div>
                    </div>
                    <div class="stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-number" id="statTimeTaken">0m</div>
                        <div class="stat-label">TIME TAKEN</div>
                    </div>
                </section>

                <!-- Share Link Section (Hidden until generated) -->
                <div class="share-link-section liquid-glass" id="shareLinkSection" style="display: none;">
                    <div class="shimmer-effect"></div>
                    <div class="circuit-pattern"></div>
                    <div class="card-scan-effect"></div>
                    <!-- Green Corner Accents -->
                    <div class="card-corner top-left"></div>
                    <div class="card-corner top-right"></div>
                    <div class="card-corner bottom-left"></div>
                    <div class="card-corner bottom-right"></div>

                    <div class="share-link-content">
                        <div class="share-status">
                            <div class="radar-loader">
                                <div class="radar-sweep"></div>
                                <div class="radar-dot"></div>
                            </div>
                            <h3 class="status-title">Waiting for receiver...</h3>
                            <p class="status-text">Share this link with the person you want to send files to</p>
                        </div>

                        <div class="link-box">
                            <input type="text" class="link-input" id="shareLink" readonly>
                            <button type="button" class="copy-btn" id="copyLink">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                                </svg>
                                <span>Copy</span>
                            </button>
                        </div>

                        <div class="qr-code-section">
                            <div class="qr-code" id="qrCode"></div>
                            <p class="qr-hint">Scan to receive on mobile</p>
                        </div>

                        <div class="transfer-warning">
                            <span class="warning-icon">‚ö†</span>
                            <span class="warning-text">Keep tab open, do not refresh until transfer completes</span>
                        </div>
                    </div>
                </div>

                <!-- Transfer Progress Section -->
                <div class="transfer-section liquid-glass" id="transferSection" style="display: none;">
                    <div class="shimmer-effect"></div>
                    <div class="circuit-pattern"></div>
                    <div class="card-scan-effect"></div>
                    <!-- Green Corner Accents -->
                    <div class="card-corner top-left"></div>
                    <div class="card-corner top-right"></div>
                    <div class="card-corner bottom-left"></div>
                    <div class="card-corner bottom-right"></div>

                    <div class="transfer-content">
                        <div class="transfer-header">
                            <div class="transfer-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
                                </svg>
                            </div>
                            <h3 class="transfer-title">Transferring Files</h3>
                        </div>

                        <div class="transfer-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                                <div class="progress-glow"></div>
                            </div>
                            <div class="progress-stats">
                                <span class="progress-percent" id="progressPercent">0%</span>
                                <span class="progress-speed" id="progressSpeed">0 MB/s</span>
                            </div>
                        </div>

                        <div class="transfer-details">
                            <div class="detail-item">
                                <span class="detail-label">Transferred</span>
                                <span class="detail-value" id="transferredSize">0 MB</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Remaining</span>
                                <span class="detail-value" id="remainingSize">0 MB</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Time Left</span>
                                <span class="detail-value" id="timeLeft">Calculating...</span>
                            </div>
                        </div>

                        <div class="current-file">
                            <span class="file-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
                                    <polyline points="13 2 13 9 20 9"/>
                                </svg>
                            </span>
                            <span class="file-name" id="currentFileName">file.txt</span>
                        </div>

                        <div class="connection-status-bar">
                            <span class="connection-status-icon">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M5 12.55a11 11 0 0 1 14.08 0"/>
                                    <path d="M1.42 9a16 16 0 0 1 21.16 0"/>
                                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
                                    <circle cx="12" cy="20" r="1"/>
                                </svg>
                            </span>
                            <span class="connection-status-text" id="connectionStatus">Connected</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section">
                <h2 class="section-title">Quantum Tunnel Properties</h2>
                <div class="features-grid">
                    <div class="feature-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="mouse-glow"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                                <line x1="12" y1="22.08" x2="12" y2="12"/>
                            </svg>
                        </div>
                        <h3 class="feature-title">Infinite Payload</h3>
                        <p class="feature-desc">No bandwidth throttling. No upload queues. Transmit terabytes through the void.</p>
                    </div>

                    <div class="feature-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="mouse-glow"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <h3 class="feature-title">Neural Link</h3>
                        <p class="feature-desc">WebRTC forges a direct synaptic bridge. Your data bypasses the matrix entirely.</p>
                    </div>
                    <div class="feature-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="mouse-glow"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                        </div>
                        <h3 class="feature-title">Warp Speed</h3>
                        <p class="feature-desc">Hyperloop routing finds the fastest vector. Local transfers never leave your grid.</p>
                    </div>
                    <div class="feature-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="mouse-glow"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <h3 class="feature-title">Quantum Encryption</h3>
                        <p class="feature-desc">DTLS 1.3 cloaks every packet. Invisible to surveillance. Untraceable by design.</p>
                    </div>

                   
                </div>
            </section>

            <!-- How It Works Section -->
            <section class="how-section">
                <h2 class="section-title">How It Works</h2>
                <div class="steps-grid">
                    <div class="step-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="step-number">01</div>
                        <h3 class="step-title">Initialize Payload</h3>
                        <p class="step-desc">Drop files into the portal. Data stays in your portal until the link activates.</p>
                    </div>
                    <div class="step-arrow">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="5" y1="12" x2="19" y2="12"/>
                            <polyline points="12 5 19 12 12 19"/>
                        </svg>
                    </div>
                    <div class="step-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="step-number">02</div>
                        <h3 class="step-title">Transmit Coordinates</h3>
                        <p class="step-desc">Generate a one-time quantum key. Share the Q-Key with your target Q-Node.</p>
                    </div>
                    <div class="step-arrow">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="5" y1="12" x2="19" y2="12"/>
                            <polyline points="12 5 19 12 12 19"/>
                        </svg>
                    </div>
                    <div class="step-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <!-- Green Corner Accents -->
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="step-number">03</div>
                        <h3 class="step-title">Execute Transfer</h3>
                        <p class="step-desc">Watch data stream through the Q-Tunnel. Mission complete? Vanish without a trace.</p>
                    </div>
                </div>

            </section>

            <!-- Global Transfer Stats Section -->
            <section class="stats-section">
                <h2 class="section-title">Quantum Field Statistics</h2>
                <div class="global-stats-container">
                    
                    <div class="global-stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="global-stat-number" id="globalTotalFiles">0</div>
                        <h3 class="global-stat-title">Files Transferred</h3>
                        <p class="global-stat-desc">Total payloads tunnelled through the Q-Gate</p>
                    </div>
                    <div class="global-stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="global-stat-number" id="globalTotalSize">0.0 GB</div>
                        <h3 class="global-stat-title">Data Transferred</h3>
                        <p class="global-stat-desc">Quantum encrypted bytes transmitted</p>
                    </div>
                    <div class="global-stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="global-stat-number" id="globalTotalSessions">0</div>
                        <h3 class="global-stat-title">Transfer Sessions</h3>
                        <p class="global-stat-desc">Total Quantum P2P tunnels established</p>
                    </div>
                    <div class="global-stat-card liquid-glass">
                        <div class="shimmer-effect"></div>
                        <div class="card-corner top-left"></div>
                        <div class="card-corner top-right"></div>
                        <div class="card-corner bottom-left"></div>
                        <div class="card-corner bottom-right"></div>
                        <div class="global-stat-number" id="globalAvgSpeed">--</div>
                        <h3 class="global-stat-title">Transfer Speed</h3>
                        <p class="global-stat-desc">Average speed across Q-Tunnels transfers</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer-animated">
            <div class="shimmer-effect"></div>
            <div class="card-corner top-left"></div>
            <div class="card-corner top-right"></div>
            <div class="card-corner bottom-left"></div>
            <div class="card-corner bottom-right"></div>
            <div class="footer-glow"></div>
            <div class="footer-border-animated"></div>
            <div class="hex-pattern"></div>
            <div class="footer-main-content">
                <div class="footer-top">
                    <div class="footer-brand">
                        <span class="logo-icon">
                            <span class="quantum-symbol">S</span>
                            <span class="orbital-ring"></span>
                            <span class="orbital-ring-2"></span>
                            <span class="orbital-ring-3"></span>
                        </span>
                        <div class="logo-text-container">
                            <span class="logo-text">Send Direct </span>
                            <span class="logo-version"> Q-v1.0.7 Q-Systems Ltd.</span>
                        </div>
                    </div>
                    <div class="footer-status">
                        <div class="status-indicator">
                            <span class="status-dot active"></span>
                            <span class="status-label">Quantum Field Stabilized</span>
                        </div>
                        <div class="status-indicator">
                            <span class="status-dot active" id="webrtcStatus"></span>
                            <span class="status-label">WebRTC Bridge Active</span>
                        </div>
                        <div class="status-indicator build-indicator">
                            <span class="status-dot active"></span>
                            <span class="status-label">BUILD <span id="commitHash">-------</span></span>
                        </div>
                        <span class="encryption-badge">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                            DTLS 1.3 Encrypted
                        </span>
                    </div>
                </div>
                <div class="footer-links">
                    <a href="about.html">About</a>
                    <a href="privacy.html">Privacy</a>
                    <a href="terms.html">Terms</a>
                </div>
                <div class="footer-credit">
                    <p class="footer-text">
                        Designed and Developed by <span class="footer-name">SUNNY</span> with lots of love
                        <span class="footer-emoji heart">&#x1F9E1;</span> coffee
                        <span class="footer-emoji coffee">&#x2615;</span> and AI
                        <span class="footer-emoji alien">&#x1F47D;</span>
                    </p>
                </div>
                <div class="footer-origin">
                    <a href="https://www.newzealand.com" target="_blank" rel="noopener" class="nz-logo-link">
                        <div class="nz-logo-container">
                            <!-- Corner accents -->
                            <div class="nz-corner-accent nz-top-left"></div>
                            <div class="nz-corner-accent nz-top-right"></div>
                            <div class="nz-corner-accent nz-bottom-left"></div>
                            <div class="nz-corner-accent nz-bottom-right"></div>

                            <!-- Main text with stars -->
                            <div class="nz-main-text">
                                <div class="nz-text-wrapper">
                                    <div class="nz-text">New Zealand</div>
                                    <div class="nz-underline"></div>
                                </div>

                                <div class="nz-stars-container">
                                    <div class="nz-stars-top">
                                        <div class="nz-star">
                                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M50 5 L61 39 L95 39 L68 58 L79 92 L50 73 L21 92 L32 58 L5 39 L39 39 Z"
                                                      fill="#ff4757" stroke="#ffffff" stroke-width="3"/>
                                            </svg>
                                        </div>
                                        <div class="nz-star">
                                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M50 5 L61 39 L95 39 L68 58 L79 92 L50 73 L21 92 L32 58 L5 39 L39 39 Z"
                                                      fill="#ff4757" stroke="#ffffff" stroke-width="3"/>
                                            </svg>
                                        </div>
                                        <div class="nz-star">
                                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M50 5 L61 39 L95 39 L68 58 L79 92 L50 73 L21 92 L32 58 L5 39 L39 39 Z"
                                                      fill="#ff4757" stroke="#ffffff" stroke-width="3"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="nz-stars-bottom">
                                        <div class="nz-star">
                                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M50 5 L61 39 L95 39 L68 58 L79 92 L50 73 L21 92 L32 58 L5 39 L39 39 Z"
                                                      fill="#ff4757" stroke="#ffffff" stroke-width="3"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- QR Code section -->
                            <div class="nz-barcode-section">
                                <div class="nz-qr-container" id="nz-qr-code"></div>
                                <div class="nz-barcode-text">Made in New Zealand</div>
                                <span class="nz-scan-note">www.newzealand.com</span>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <div class="footer-particles">
                <span class="particle"></span>
                <span class="particle"></span>
                <span class="particle"></span>
                <span class="particle"></span>
                <span class="particle"></span>
            </div>
        </footer>
    </div>

    <!-- Q-Chat Toggle Button -->
    <button type="button" class="qchat-toggle" id="qchatToggle" title="Q-Chat">
        <!-- Orbital Rings - 3D rotating like logo -->
        <div class="qchat-orbital-rings">
            <span class="qchat-orbit qchat-orbit-1"></span>
            <span class="qchat-orbit qchat-orbit-2"></span>
            <span class="qchat-orbit qchat-orbit-3"></span>
        </div>
        <!-- Chat Icon -->
        <div class="qchat-toggle-icon">
            <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="chat-bubble"/>
                <circle cx="8" cy="10" r="1.2" fill="currentColor" class="chat-dot chat-dot-1"/>
                <circle cx="12" cy="10" r="1.2" fill="currentColor" class="chat-dot chat-dot-2"/>
                <circle cx="16" cy="10" r="1.2" fill="currentColor" class="chat-dot chat-dot-3"/>
            </svg>
        </div>
        <!-- Glow Effect -->
        <div class="qchat-toggle-glow"></div>
        <span class="qchat-badge" id="qchatBadge" style="display: none;">0</span>
    </button>

    <!-- Q-Chat Panel -->
    <div class="qchat-panel" id="qchatPanel">
        <div class="qchat-container liquid-glass">
            <div class="shimmer-effect"></div>
            <div class="circuit-pattern"></div>

            <!-- Chat Header -->
            <div class="qchat-header">
                <div class="qchat-title">
                    <div class="qchat-logo-small">
                        <div class="quantum-rings">
                            <span class="ring ring-1"></span>
                            <span class="ring ring-2"></span>
                            <span class="ring ring-3"></span>
                        </div>
                        <span class="qchat-symbol">Q</span>
                    </div>
                    <span class="qchat-name">Q-Chat</span>
                    <span class="qchat-version">Q-v1.0.7</span><br>
                   
                </div>
                <div class="qchat-status" id="qchatStatus">
                    <span class="status-dot"></span>
                    <span class="status-text">Disconnected</span>
                </div>
                <button type="button" class="qchat-close" id="qchatClose" title="Close Q-Chat">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>

            <!-- Chat Connection Section -->
            <div class="qchat-connect" id="qchatConnect">
                <div class="qchat-connect-content">
                    <div class="qchat-logo">
                        <div class="quantum-rings">
                            <span class="ring ring-1"></span>
                            <span class="ring ring-2"></span>
                            <span class="ring ring-3"></span>
                        </div>
                        <span class="qchat-symbol">Q</span>
                    </div>

                    <span class="qchat-name">Q-Chat</span><br>
                    <span class="qchat-version">Q-v1.0.7</span><br><br>

                    <h3 class="qchat-connect-title">Q-Sentinel P2P encrypted Chat</h3>
                    <p class="qchat-connect-desc">Chats persist as quantum states in superposition until shared observation collapses the state, manifesting the conversation directly at the peer endpoint with no traversal and no trace.</p>

                    <div class="qchat-actions">
                        <button type="button" class="qchat-btn qchat-btn-primary" id="qchatCreate">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Create Quantum Tunnel
                        </button>
                        <div class="qchat-divider">
                            <span>or</span>
                        </div>
                        <div class="qchat-join-form">
                            <input type="text" class="qchat-input" id="qchatRoomInput" placeholder="Enter Quantum Tunel Code">
                            <button type="button" class="qchat-btn qchat-btn-secondary" id="qchatJoin">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                                    <polyline points="10 17 15 12 10 7"/>
                                    <line x1="15" y1="12" x2="3" y2="12"/>
                                </svg>
                                Join
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Room Info (shown after creating room) -->
            <div class="qchat-room-info" id="qchatRoomInfo" style="display: none;">
                <!-- Matrix Sphere Animation -->
                <div class="matrix-sphere-container" id="matrixSphereContainer">
                    <div class="matrix-sphere" id="matrixSphere"></div>
                </div>
                <p class="matrix-sphere-status" id="matrixSphereStatus">Generating Quantum Tunnel...</p>

                <div class="qchat-room-code hidden" id="qchatRoomCodeSection">
                    <span class="room-label">Quantum Tunnel Code</span>
                    <div class="room-code-display">
                        <span class="room-code" id="qchatRoomCode">------</span>
                        <button type="button" class="copy-btn" id="qchatCopyCode" title="Copy Code">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="qchat-waiting hidden" id="qchatWaiting">Waiting for peer to join...</p>
            </div>

            <!-- Chat Messages Section -->
            <div class="qchat-messages" id="qchatMessages" style="display: none;">
                <div class="qchat-messages-list" id="qchatMessagesList">
                    <!-- Messages will be added here -->
                </div>
            </div>

            <!-- Chat Input Section -->
            <div class="qchat-input-section" id="qchatInputSection" style="display: none;">
                <div class="qchat-encryption-badge">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                    <span>Quantum-Sentinel Encrypted</span>
                </div>
                <div class="qchat-input-wrapper">
                    <input type="text" class="qchat-message-input" id="qchatMessageInput" placeholder="Type a message..." disabled>
                    <button type="button" class="qchat-send-btn" id="qchatSendBtn" title="Send Message" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"/>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- SVG Filters -->
    <svg class="svg-filters">
        <defs>
            <filter id="glass-distortion" x="-50%" y="-50%" width="200%" height="200%">
                <feTurbulence type="fractalNoise" baseFrequency="0.01 0.003" numOctaves="3" result="noise"/>
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="5" xChannelSelector="R" yChannelSelector="G"/>
                <feGaussianBlur stdDeviation="0.3"/>
            </filter>
        </defs>
    </svg>

    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="js/blackhole-effect.js?v=20260204c"></script>
    <script src="js/background.js?v=20260204c"></script>
    <script src="js/animations.js?v=20260204c"></script>
    <script src="js/dashboard-widgets.js?v=20260204c"></script>
    <script src="js/file-share.js?v=20260204c"></script>
    <script src="js/q-chat.js?v=20260204c"></script>
    <script>
        // Generate small futuristic NZ QR Code
        document.addEventListener('DOMContentLoaded', function() {
            const qrContainer = document.getElementById('nz-qr-code');
            if (qrContainer && typeof qrcode !== 'undefined') {
                const qr = qrcode(0, 'M');
                qr.addData('https://www.newzealand.com/');
                qr.make();

                const moduleCount = qr.getModuleCount();
                const cellSize = 2;
                const margin = 4;
                const size = moduleCount * cellSize + margin * 2;

                let svg = '<svg xmlns="http://www.w3.org/2000/svg" width="' + size + '" height="' + size + '" viewBox="0 0 ' + size + ' ' + size + '">';
                svg += '<rect width="100%" height="100%" fill="#012169"/>';

                for (let row = 0; row < moduleCount; row++) {
                    for (let col = 0; col < moduleCount; col++) {
                        if (qr.isDark(row, col)) {
                            const x = col * cellSize + margin;
                            const y = row * cellSize + margin;
                            svg += '<rect x="' + x + '" y="' + y + '" width="' + cellSize + '" height="' + cellSize + '" fill="#64ffda"/>';
                        }
                    }
                }
                svg += '</svg>';
                qrContainer.innerHTML = svg;
            }
        });
    </script>
    <script>
        fetch('/api/version').then(r=>r.json()).then(d=>{
            const el=document.getElementById('commitHash');
            if(el&&d.hash)el.textContent=d.hash;
        }).catch(()=>{});
    </script>
</body>
</html>
